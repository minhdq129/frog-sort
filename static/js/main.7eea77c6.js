/*! For license information please see main.7eea77c6.js.LICENSE.txt */
!function(){var t={8041:function(t){"use strict";var e,n="object"===typeof Reflect?Reflect:null,r=n&&"function"===typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"===typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var i=Number.isNaN||function(t){return t!==t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,a),r(n)}function a(){"function"===typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}p(t,e,a,{once:!0}),"error"!==e&&function(t,e,n){"function"===typeof t.on&&p(t,"error",e,n)}(t,i,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function o(t){if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function h(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function l(t,e,n,r){var i,a,s,l;if(o(n),void 0===(a=t._events)?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),a=t._events),s=a[e]),void 0===s)s=a[e]=n,++t._eventsCount;else if("function"===typeof s?s=a[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=h(t))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,l=u,console&&console.warn&&console.warn(l)}return t}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=u.bind(r);return i.listener=n,r.wrapFn=i,i}function f(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"===typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):v(i,i.length)}function d(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function p(t,e,n,r){if("function"===typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!==typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(a){r.once&&t.removeEventListener(e,i),n(a)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!==typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");s=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return h(this)},a.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,a=this._events;if(void 0!==a)i=i&&void 0===a.error;else if(!i)return!1;if(i){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var h=a[t];if(void 0===h)return!1;if("function"===typeof h)r(h,this,e);else{var l=h.length,u=v(h,l);for(n=0;n<l;++n)r(u[n],this,e)}return!0},a.prototype.addListener=function(t,e){return l(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return l(this,t,e,!0)},a.prototype.once=function(t,e){return o(e),this.on(t,c(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return o(e),this.prependListener(t,c(this,t,e)),this},a.prototype.removeListener=function(t,e){var n,r,i,a,s;if(o(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!==typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===e||n[a].listener===e){s=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},a.prototype.listeners=function(t){return f(this,t,!0)},a.prototype.rawListeners=function(t){return f(this,t,!1)},a.listenerCount=function(t,e){return"function"===typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},a.prototype.listenerCount=d,a.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},9434:function(t,e,n){"use strict";var r=n(4704).default;function i(t){if(this.words=[],null!=(a=t)&&void 0!==a[Symbol.iterator]){var e,n=r(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.add(i)}}catch(s){n.e(s)}finally{n.f()}}var a}i.prototype.add=function(t){this.resize(t),this.words[t>>>5]|=1<<t},i.prototype.flip=function(t){this.resize(t),this.words[t>>>5]^=1<<t},i.prototype.clear=function(){this.words=[]},i.prototype.remove=function(t){this.resize(t),this.words[t>>>5]&=~(1<<t)},i.prototype.isEmpty=function(t){for(var e=this.words.length,n=0;n<e;n++)if(0!==this.words[n])return!1;return!0},i.prototype.has=function(t){return 0!==(this.words[t>>>5]&1<<t)},i.prototype.checkedAdd=function(t){this.resize(t);var e=this.words[t>>>5],n=e|1<<t;return this.words[t>>>5]=n,(n^e)>>>t},i.prototype.trim=function(t){for(var e=this.words.length;e>0&&0===this.words[e-1];)e--;this.words=this.words.slice(0,e)},i.prototype.resize=function(t){for(var e=t+32>>>5,n=this.words.length;n<e;n++)this.words[n]=0},i.prototype.hammingWeight=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},i.prototype.hammingWeight4=function(t,e,n,r){return 16843009*((t=(t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)+(e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)+(n=(n=(858993459&(n-=n>>>1&1431655765))+(n>>>2&858993459))+(n>>>4)&252645135)+(r=(r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135))>>>24},i.prototype.size=function(){for(var t=0,e=this.words.length,n=this.words,r=0;r<e;r++)t+=this.hammingWeight(n[r]);return t},i.prototype.array=function(){for(var t=new Array(this.size()),e=0,n=this.words.length,r=0;r<n;++r)for(var i=this.words[r];0!=i;){var a=i&-i;t[e++]=(r<<5)+this.hammingWeight(a-1|0),i^=a}return t},i.prototype.forEach=function(t){for(var e=this.words.length,n=0;n<e;++n)for(var r=this.words[n];0!=r;){var i=r&-r;t((n<<5)+this.hammingWeight(i-1|0)),r^=i}},i.prototype.clone=function(){var t=Object.create(i.prototype);return t.words=this.words.slice(),t},i.prototype.intersects=function(t){for(var e=Math.min(this.words.length,t.words.length),n=0;n<e;++n)if(0!==(this.words[n]&t.words[n]))return!0;return!1},i.prototype.intersection=function(t){for(var e=Math.min(this.words.length,t.words.length),n=0;n+7<e;n+=8)this.words[n]&=t.words[n],this.words[n+1]&=t.words[n+1],this.words[n+2]&=t.words[n+2],this.words[n+3]&=t.words[n+3],this.words[n+4]&=t.words[n+4],this.words[n+5]&=t.words[n+5],this.words[n+6]&=t.words[n+6],this.words[n+7]&=t.words[n+7];for(;n<e;++n)this.words[n]&=t.words[n];var r=this.words.length;for(n=e;n<r;++n)this.words[n]=0;return this},i.prototype.intersection_size=function(t){for(var e=Math.min(this.words.length,t.words.length),n=0,r=0;r<e;++r)n+=this.hammingWeight(this.words[r]&t.words[r]);return n},i.prototype.new_intersection=function(t){var e=Object.create(i.prototype),n=Math.min(this.words.length,t.words.length);e.words=new Array(n);for(var r=n,a=0;a+7<r;a+=8)e.words[a]=this.words[a]&t.words[a],e.words[a+1]=this.words[a+1]&t.words[a+1],e.words[a+2]=this.words[a+2]&t.words[a+2],e.words[a+3]=this.words[a+3]&t.words[a+3],e.words[a+4]=this.words[a+4]&t.words[a+4],e.words[a+5]=this.words[a+5]&t.words[a+5],e.words[a+6]=this.words[a+6]&t.words[a+6],e.words[a+7]=this.words[a+7]&t.words[a+7];for(;a<r;++a)e.words[a]=this.words[a]&t.words[a];return e},i.prototype.equals=function(t){for(var e=Math.min(this.words.length,t.words.length),n=0;n<e;++n)if(this.words[n]!=t.words[n])return!1;if(this.words.length<t.words.length){var r=t.words.length;for(n=this.words.length;n<r;++n)if(0!=t.words[n])return!1}else if(t.words.length<this.words.length)for(r=this.words.length,n=t.words.length;n<r;++n)if(0!=this.words[n])return!1;return!0},i.prototype.difference=function(t){for(var e=Math.min(this.words.length,t.words.length),n=0;n+7<e;n+=8)this.words[n]&=~t.words[n],this.words[n+1]&=~t.words[n+1],this.words[n+2]&=~t.words[n+2],this.words[n+3]&=~t.words[n+3],this.words[n+4]&=~t.words[n+4],this.words[n+5]&=~t.words[n+5],this.words[n+6]&=~t.words[n+6],this.words[n+7]&=~t.words[n+7];for(;n<e;++n)this.words[n]&=~t.words[n];return this},i.prototype.difference_size=function(t){for(var e=Math.min(this.words.length,t.words.length),n=0,r=0;r<e;++r)n+=this.hammingWeight(this.words[r]&~t.words[r]);for(var i=this.words.length;r<i;++r)n+=this.hammingWeight(this.words[r]);return n},i.prototype.toString=function(){return"{"+this.array().join(",")+"}"},i.prototype.union=function(t){for(var e=Math.min(this.words.length,t.words.length),n=0;n+7<e;n+=8)this.words[n]|=t.words[n],this.words[n+1]|=t.words[n+1],this.words[n+2]|=t.words[n+2],this.words[n+3]|=t.words[n+3],this.words[n+4]|=t.words[n+4],this.words[n+5]|=t.words[n+5],this.words[n+6]|=t.words[n+6],this.words[n+7]|=t.words[n+7];for(;n<e;++n)this.words[n]|=t.words[n];if(this.words.length<t.words.length){this.resize((t.words.length<<5)-1);var r=t.words.length;for(n=e;n<r;++n)this.words[n]=t.words[n]}return this},i.prototype.new_union=function(t){var e=Object.create(i.prototype),n=Math.max(this.words.length,t.words.length);e.words=new Array(n);for(var r=Math.min(this.words.length,t.words.length),a=0;a+7<r;a+=8)e.words[a]=this.words[a]|t.words[a],e.words[a+1]=this.words[a+1]|t.words[a+1],e.words[a+2]=this.words[a+2]|t.words[a+2],e.words[a+3]=this.words[a+3]|t.words[a+3],e.words[a+4]=this.words[a+4]|t.words[a+4],e.words[a+5]=this.words[a+5]|t.words[a+5],e.words[a+6]=this.words[a+6]|t.words[a+6],e.words[a+7]=this.words[a+7]|t.words[a+7];for(;a<r;++a)e.words[a]=this.words[a]|t.words[a];var s=this.words.length;for(a=r;a<s;++a)e.words[a]=this.words[a];var o=t.words.length;for(a=r;a<o;++a)e.words[a]=t.words[a];return e},i.prototype.new_difference=function(t){return this.clone().difference(t)},i.prototype.union_size=function(t){for(var e=Math.min(this.words.length,t.words.length),n=0,r=0;r<e;++r)n+=this.hammingWeight(this.words[r]|t.words[r]);if(this.words.length<t.words.length){var i=t.words.length;for(r=this.words.length;r<i;++r)n+=this.hammingWeight(0|t.words[r])}else for(i=this.words.length,r=t.words.length;r<i;++r)n+=this.hammingWeight(0|this.words[r]);return n},t.exports=i},1281:function(t,e,n){"use strict";var r=n(9728).default,i=n(6690).default,a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Archetype=void 0;var s=a(n(9434)),o=r((function t(e){i(this,t),this.componentBits=new s.default,this.componentBitsInitialized=!1,this.componentTypes=e}));e.Archetype=o},3713:function(t,e,n){"use strict";var r=n(9728).default,i=n(6690).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Component=void 0;var a=r((function t(){i(this,t)}));e.Component=a},9179:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.ComponentMapper=void 0;var a=function(){function t(){r(this,t),this.data=[]}return i(t,[{key:"add",value:function(t,e){this.data[t]=e}},{key:"get",value:function(t){return this.data[t]}},{key:"remove",value:function(t){delete this.data[t]}}]),t}();e.ComponentMapper=a},1218:function(t,e,n){"use strict";var r=n(4704).default,i=n(6690).default,a=n(9728).default,s=n(1588).default,o=n(3808).default,h=n(1655).default,l=n(6389).default,u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.EntityIteratingSystem=void 0;var c=n(4905),f=u(n(9434)),d=function(t){h(n,t);var e=l(n);function n(t){var r;return i(this,n),(r=e.call(this)).componentBits=new f.default,r.types=t,r}return a(n,[{key:"setWorld",value:function(t){s(o(n.prototype),"setWorld",this).call(this,t);var e,i=r(this.types);try{for(i.s();!(e=i.n()).done;){var a=e.value;this.componentBits.add(t.getComponentIndex(a))}}catch(h){i.e(h)}finally{i.f()}}},{key:"process",value:function(){this.begin(),this.world.getEntities(this.componentBits,this.processEntity.bind(this)),this.end()}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),n}(c.System);e.EntityIteratingSystem=d},2645:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default,a=n(1655).default,s=n(6389).default;Object.defineProperty(e,"__esModule",{value:!0}),e.EntitySystem=void 0;var o=function(t){a(n,t);var e=s(n);function n(){var t;return r(this,n),(t=e.apply(this,arguments)).entities=[],t}return i(n,[{key:"process",value:function(){this.entities.length=0,this.begin(),this.world.getEntities(this.componentBits,this.processEntity.bind(this)),this.processEntities(this.entities),this.end()}},{key:"processEntity",value:function(t){this.entities.push(t)}}]),n}(n(1218).EntityIteratingSystem);e.EntitySystem=o},6310:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Inject=void 0,e.Inject=function(t){return function(e,n){var r=e.constructor;r.hasOwnProperty("__inject__")||(r.__inject__={}),r.__inject__[n]=t}}},1185:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InjectMapper=void 0,e.InjectMapper=function(t){return function(e,n){var r=e.constructor;r.hasOwnProperty("__injectMapper__")||(r.__injectMapper__={}),r.__injectMapper__[n]=t}}},4905:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.System=void 0;var a=function(){function t(){r(this,t)}return i(t,[{key:"setWorld",value:function(t){this.world=t}},{key:"initialized",value:function(){}},{key:"dispose",value:function(){}}]),t}();e.System=a},8293:function(t,e,n){"use strict";var r=n(4704).default,i=n(6690).default,a=n(9728).default,s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(9434)),h=n(9179),l=function(){function t(){i(this,t),this.index=0,this.mappers={},this.componentBitsMap=[],this.componentIndices=new Map,this.currentComponentIndex=0,this.activeSystems=[],this.passiveSystems=[],this.injectionRegistry={},this.delta=0}return a(t,[{key:"getNewId",value:function(){return this.index++}},{key:"createEntity",value:function(){return this.getNewId()}},{key:"getComponentBits",value:function(t){return this.componentBitsMap[t]||(this.componentBitsMap[t]=new o.default),this.componentBitsMap[t]}},{key:"getMapper",value:function(t){var e=this.getComponentIndex(t);return this.getMapperByIndex(e)}},{key:"getMapperByIndex",value:function(t){return this.mappers[t]||(this.mappers[t]=new h.ComponentMapper),this.mappers[t]}},{key:"getComponentIndex",value:function(t){var e=this.componentIndices.get(t);return void 0===e&&(e=this.currentComponentIndex++,this.componentIndices.set(t,e)),e}},{key:"createEntityByArchetype",value:function(t){var e=this,n=this.getNewId();return t.componentTypes.forEach((function(r){var i=new r;t.componentBitsInitialized||t.componentBits.add(e.getComponentIndex(r)),e.addComponent(n,i,!1)})),this.componentBitsMap[n]=t.componentBits,n}},{key:"addComponent",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.getComponentIndex(e.constructor),i=this.getMapperByIndex(r);return i.add(t,e),n&&this.getComponentBits(t).add(r),e}},{key:"getComponent",value:function(t,e){return this.getMapper(e).get(t)}},{key:"getEntities",value:function(t,e){for(var n=0;n<this.componentBitsMap.length;n++)if(this.componentBitsMap[n]){var r=this.componentBitsMap[n];t.union_size(r)===r.size()&&e(n)}}},{key:"addSystem",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e?this.activeSystems.push(t):this.passiveSystems.push(t),t.setWorld(this),this.injectMapper(t),this.inject(t),t.initialized()}},{key:"injectMapper",value:function(t){var e=t.constructor.__injectMapper__||{};for(var n in e){var r=e[n];t[n]=this.getMapper(r)}}},{key:"register",value:function(t,e){this.injectionRegistry[t]=e}},{key:"inject",value:function(t){var e=t.constructor.__inject__||{};for(var n in e){var r=e[n];t[n]=this.injectionRegistry[r]}}},{key:"dispose",value:function(){var t,e=r(this.activeSystems);try{for(e.s();!(t=e.n()).done;){t.value.dispose()}}catch(a){e.e(a)}finally{e.f()}var n,i=r(this.passiveSystems);try{for(i.s();!(n=i.n()).done;){n.value.dispose()}}catch(a){i.e(a)}finally{i.f()}}},{key:"setDelta",value:function(t){this.delta=t}},{key:"processActiveSystem",value:function(){var t,e=r(this.activeSystems);try{for(e.s();!(t=e.n()).done;){t.value.process()}}catch(n){e.e(n)}finally{e.f()}}},{key:"processPassiveSystem",value:function(){var t,e=r(this.passiveSystems);try{for(e.s();!(t=e.n()).done;){t.value.process()}}catch(n){e.e(n)}finally{e.f()}}},{key:"deleteEntity",value:function(t){for(var e in this.mappers)this.mappers[e].remove(t);delete this.componentBitsMap[t]}},{key:"isEntityActive",value:function(t){return!!this.componentBitsMap[t]}}]),t}();e.default=l},9997:function(t,e,n){"use strict";var r=n(8293);Object.defineProperty(e,"q3",{enumerable:!0,get:function(){return r.default}});var i=n(1281);var a=n(3713);var s=n(9179);var o=n(1218);var h=n(2645);var l=n(4905);Object.defineProperty(e,"xP",{enumerable:!0,get:function(){return l.System}});var u=n(1185);var c=n(6310);Object.defineProperty(e,"tB",{enumerable:!0,get:function(){return c.Inject}})},951:function(t,e,n){"use strict";var r=n(9728).default,i=n(6690).default;Object.defineProperty(e,"__esModule",{value:!0}),e.SkeletonRenderer=void 0;var a=n(6914),s=n(2955),o=n(6160),h=r((function t(e,n,r){i(this,t),this.vertices=e,this.numVertices=n,this.numFloats=r})),l=function(){function t(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];i(this,t),this.premultipliedAlpha=!1,this.tempColor=new a.Color,this.tempColor2=new a.Color,this.vertexSize=8,this.twoColorTint=!1,this.renderable=new h([],0,0),this.clipper=new a.SkeletonClipping,this.temp=new s.Vector2,this.temp2=new s.Vector2,this.temp3=new a.Color,this.temp4=new a.Color,this.twoColorTint=n,n&&(this.vertexSize+=4),this.vertices=a.Utils.newFloatArray(1024*this.vertexSize)}return r(t,[{key:"draw",value:function(e,n){var r,i,s,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,u=this.clipper,c=this.premultipliedAlpha,f=this.twoColorTint,d=null,v=this.renderable,p=n.drawOrder,g=n.color,m=f?12:8,y=!1;-1===h&&(y=!0);for(var x=0,M=p.length;x<M;x++){var w=u.isClipping()?2:m,b=p[x];if(b.bone.active)if(h>=0&&h===b.data.index&&(y=!0),y){l>=0&&l===b.data.index&&(y=!1);var k=b.getAttachment(),T=void 0;if(k instanceof a.RegionAttachment){var S=k;v.vertices=this.vertices,v.numVertices=4,v.numFloats=w<<2,S.computeWorldVertices(b,v.vertices,0,w),i=t.QUAD_TRIANGLES,r=S.uvs,T=S.region.renderObject.page.texture,s=S.color}else{if(!(k instanceof a.MeshAttachment)){if(k instanceof a.ClippingAttachment){var A=k;u.clipStart(b,A);continue}u.clipEndWithSlot(b);continue}var C=k;v.vertices=this.vertices,v.numVertices=C.worldVerticesLength>>1,v.numFloats=v.numVertices*w,v.numFloats>v.vertices.length&&(v.vertices=this.vertices=a.Utils.newFloatArray(v.numFloats)),C.computeWorldVertices(b,0,C.worldVerticesLength,v.vertices,0,w),i=C.triangles,T=C.region.renderObject.page.texture,r=C.uvs,s=C.color}if(T){var _=b.color,I=this.tempColor;I.r=g.r*_.r*s.r,I.g=g.g*_.g*s.g,I.b=g.b*_.b*s.b,I.a=g.a*_.a*s.a,c&&(I.r*=I.a,I.g*=I.a,I.b*=I.a);var E=this.tempColor2;b.darkColor?(c?(E.r=b.darkColor.r*I.a,E.g=b.darkColor.g*I.a,E.b=b.darkColor.b*I.a):E.setFromColor(b.darkColor),E.a=c?1:0):E.set(0,0,0,1);var P=b.data.blendMode;if(P!==d&&(d=P,e.setBlendMode(o.WebGLBlendModeConverter.getSourceColorGLBlendMode(d,c),o.WebGLBlendModeConverter.getSourceAlphaGLBlendMode(d),o.WebGLBlendModeConverter.getDestGLBlendMode(d))),u.isClipping()){u.clipTriangles(v.vertices,v.numFloats,i,i.length,r,I,E,f);var R=new Float32Array(u.clippedVertices),F=u.clippedTriangles;e.drawVertices(T,R,F)}else{var B=v.vertices;if(f)for(var O=2,L=0,D=v.numFloats;O<D;O+=m,L+=2)B[O]=I.r,B[O+1]=I.g,B[O+2]=I.b,B[O+3]=I.a,B[O+4]=r[L],B[O+5]=r[L+1],B[O+6]=E.r,B[O+7]=E.g,B[O+8]=E.b,B[O+9]=E.a;else for(var Y=2,X=0,U=v.numFloats;Y<U;Y+=m,X+=2)B[Y]=I.r,B[Y+1]=I.g,B[Y+2]=I.b,B[Y+3]=I.a,B[Y+4]=r[X],B[Y+5]=r[X+1];var V=v.vertices.subarray(0,v.numFloats);e.drawVertices(T,V,i)}}u.clipEndWithSlot(b)}else u.clipEndWithSlot(b);else u.clipEndWithSlot(b)}u.clipEnd()}}]),t}();e.SkeletonRenderer=l,l.QUAD_TRIANGLES=[0,1,2,2,3,0]},2246:function(t,e,n){"use strict";var r=n(9728).default,i=n(6690).default,a=n(1655).default,s=n(6389).default;Object.defineProperty(e,"__esModule",{value:!0}),e.SpineAssetManager=void 0;var o=n(6914),h=n(2955),l=function(t){a(n,t);var e=s(n);function n(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new o.Downloader;return i(this,n),e.call(this,(function(e){return new h.Texture(t,e)}),r,a)}return r(n)}(o.AssetManagerBase);e.SpineAssetManager=l},6160:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLBlendModeConverter=void 0;var a=n(6914),s=770,o=771,h=function(){function t(){r(this,t)}return i(t,null,[{key:"getDestGLBlendMode",value:function(t){switch(t){case a.BlendMode.Normal:return o;case a.BlendMode.Additive:return 1;case a.BlendMode.Multiply:case a.BlendMode.Screen:return o;default:throw new Error("Unknown blend mode: "+t)}}},{key:"getSourceColorGLBlendMode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(t){case a.BlendMode.Normal:case a.BlendMode.Additive:return e?1:s;case a.BlendMode.Multiply:return 774;case a.BlendMode.Screen:return 1;default:throw new Error("Unknown blend mode: "+t)}}},{key:"getSourceAlphaGLBlendMode",value:function(t){switch(t){case a.BlendMode.Normal:case a.BlendMode.Additive:return 1;case a.BlendMode.Multiply:return o;case a.BlendMode.Screen:return 769;default:throw new Error("Unknown blend mode: "+t)}}}]),t}();e.WebGLBlendModeConverter=h},2474:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(951),e),i(n(6914),e),i(n(2246),e),i(n(6160),e)},9889:function(t,e,n){"use strict";var r=n(1655).default,i=n(6389).default,a=n(6690).default,s=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.SequenceTimeline=e.PathConstraintMixTimeline=e.PathConstraintSpacingTimeline=e.PathConstraintPositionTimeline=e.TransformConstraintTimeline=e.IkConstraintTimeline=e.DrawOrderTimeline=e.EventTimeline=e.DeformTimeline=e.AttachmentTimeline=e.RGB2Timeline=e.RGBA2Timeline=e.AlphaTimeline=e.RGBTimeline=e.RGBATimeline=e.ShearYTimeline=e.ShearXTimeline=e.ShearTimeline=e.ScaleYTimeline=e.ScaleXTimeline=e.ScaleTimeline=e.TranslateYTimeline=e.TranslateXTimeline=e.TranslateTimeline=e.RotateTimeline=e.CurveTimeline2=e.CurveTimeline1=e.CurveTimeline=e.Timeline=e.MixDirection=e.MixBlend=e.Animation=void 0;var o,h,l=n(353),u=n(4153),c=n(6436),f=function(){function t(e,n,r){if(a(this,t),this.timelines=[],this.timelineIds=new u.StringSet,!e)throw new Error("name cannot be null.");this.name=e,this.setTimelines(n),this.duration=r}return s(t,[{key:"setTimelines",value:function(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}},{key:"hasTimeline",value:function(t){for(var e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1}},{key:"apply",value:function(t,e,n,r,i,a,s,o){if(!t)throw new Error("skeleton cannot be null.");r&&0!==this.duration&&(n%=this.duration,e>0&&(e%=this.duration));for(var h=this.timelines,l=0,u=h.length;l<u;l++)h[l].apply(t,e,n,i,a,s,o)}}]),t}();e.Animation=f,function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(o=e.MixBlend||(e.MixBlend={})),function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"}(h=e.MixDirection||(e.MixDirection={}));var d=0,v=1,p=2,g=3,m=4,y=5,x=6,M=7,w=8,b=9,k=10,T=11,S=12,A=13,C=14,_=15,I=16,E=17,P=18,R=19,F=function(){function t(e,n){a(this,t),this.propertyIds=n,this.frames=u.Utils.newFloatArray(e*this.getFrameEntries())}return s(t,[{key:"getPropertyIds",value:function(){return this.propertyIds}},{key:"getFrameEntries",value:function(){return 1}},{key:"getFrameCount",value:function(){return this.frames.length/this.getFrameEntries()}},{key:"getDuration",value:function(){return this.frames[this.frames.length-this.getFrameEntries()]}}],[{key:"search1",value:function(t,e){for(var n=t.length,r=1;r<n;r++)if(t[r]>e)return r-1;return n-1}},{key:"search",value:function(t,e,n){for(var r=t.length,i=n;i<r;i+=n)if(t[i]>e)return i-n;return r-n}}]),t}();e.Timeline=F;var B=function(t){r(n,t);var e=i(n);function n(t,r,i){var s;return a(this,n),(s=e.call(this,t,i)).curves=u.Utils.newFloatArray(t+18*r),s.curves[t-1]=1,s}return s(n,[{key:"setLinear",value:function(t){this.curves[t]=0}},{key:"setStepped",value:function(t){this.curves[t]=1}},{key:"shrink",value:function(t){var e=this.getFrameCount()+18*t;if(this.curves.length>e){var n=u.Utils.newFloatArray(e);u.Utils.arrayCopy(this.curves,0,n,0,e),this.curves=n}}},{key:"setBezier",value:function(t,e,n,r,i,a,s,o,h,l,u){var c=this.curves,f=this.getFrameCount()+18*t;0===n&&(c[e]=2+f);for(var d=.03*(r-2*a+o),v=.03*(i-2*s+h),p=.006*(3*(a-o)-r+l),g=.006*(3*(s-h)-i+u),m=2*d+p,y=2*v+g,x=.3*(a-r)+d+.16666667*p,M=.3*(s-i)+v+.16666667*g,w=r+x,b=i+M,k=f+18;f<k;f+=2)c[f]=w,c[f+1]=b,x+=m,M+=y,m+=p,y+=g,w+=x,b+=M}},{key:"getBezierValue",value:function(t,e,n,r){var i=this.curves;if(i[r]>t){var a=this.frames[e],s=this.frames[e+n];return s+(t-a)/(i[r]-a)*(i[r+1]-s)}var o=r+18;for(r+=2;r<o;r+=2)if(i[r]>=t){var h=i[r-2],l=i[r-1];return l+(t-h)/(i[r]-h)*(i[r+1]-l)}e+=this.getFrameEntries();var u=i[o-2],c=i[o-1];return c+(t-u)/(this.frames[e]-u)*(this.frames[e+n]-c)}}]),n}(F);e.CurveTimeline=B;var O=function(t){r(n,t);var e=i(n);function n(t,r,i){return a(this,n),e.call(this,t,r,[i])}return s(n,[{key:"getFrameEntries",value:function(){return 2}},{key:"setFrame",value:function(t,e,n){t<<=1,this.frames[t]=e,this.frames[t+1]=n}},{key:"getCurveValue",value:function(t){for(var e=this.frames,n=e.length-2,r=2;r<=n;r+=2)if(e[r]>t){n=r-2;break}var i=this.curves[n>>1];switch(i){case 0:var a=e[n],s=e[n+1];return s+(t-a)/(e[n+2]-a)*(e[n+2+1]-s);case 1:return e[n+1]}return this.getBezierValue(t,n,1,i-2)}}]),n}(B);e.CurveTimeline1=O;var L=function(t){r(n,t);var e=i(n);function n(t,r,i,s){return a(this,n),e.call(this,t,r,[i,s])}return s(n,[{key:"getFrameEntries",value:function(){return 3}},{key:"setFrame",value:function(t,e,n,r){t*=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r}}]),n}(B);e.CurveTimeline2=L;var D=function(t){r(n,t);var e=i(n);function n(t,r,i){var s;return a(this,n),(s=e.call(this,t,r,d+"|"+i)).boneIndex=0,s.boneIndex=i,s}return s(n,[{key:"apply",value:function(t,e,n,r,i,a,s){var h=t.bones[this.boneIndex];if(h.active)if(n<this.frames[0])switch(a){case o.setup:return void(h.rotation=h.data.rotation);case o.first:h.rotation+=(h.data.rotation-h.rotation)*i}else{var l=this.getCurveValue(n);switch(a){case o.setup:h.rotation=h.data.rotation+l*i;break;case o.first:case o.replace:l+=h.data.rotation-h.rotation;case o.add:h.rotation+=l*i}}}}]),n}(O);e.RotateTimeline=D;var Y=function(t){r(n,t);var e=i(n);function n(t,r,i){var s;return a(this,n),(s=e.call(this,t,r,v+"|"+i,p+"|"+i)).boneIndex=0,s.boneIndex=i,s}return s(n,[{key:"apply",value:function(t,e,n,r,i,a,s){var h=t.bones[this.boneIndex];if(h.active){var l=this.frames;if(n<l[0])switch(a){case o.setup:return h.x=h.data.x,void(h.y=h.data.y);case o.first:h.x+=(h.data.x-h.x)*i,h.y+=(h.data.y-h.y)*i}else{var u=0,c=0,f=F.search(l,n,3),d=this.curves[f/3];switch(d){case 0:var v=l[f];u=l[f+1],c=l[f+2];var p=(n-v)/(l[f+3]-v);u+=(l[f+3+1]-u)*p,c+=(l[f+3+2]-c)*p;break;case 1:u=l[f+1],c=l[f+2];break;default:u=this.getBezierValue(n,f,1,d-2),c=this.getBezierValue(n,f,2,d+18-2)}switch(a){case o.setup:h.x=h.data.x+u*i,h.y=h.data.y+c*i;break;case o.first:case o.replace:h.x+=(h.data.x+u-h.x)*i,h.y+=(h.data.y+c-h.y)*i;break;case o.add:h.x+=u*i,h.y+=c*i}}}}}]),n}(L);e.TranslateTimeline=Y;var X=function(t){r(n,t);var e=i(n);function n(t,r,i){var s;return a(this,n),(s=e.call(this,t,r,v+"|"+i)).boneIndex=0,s.boneIndex=i,s}return s(n,[{key:"apply",value:function(t,e,n,r,i,a,s){var h=t.bones[this.boneIndex];if(h.active)if(n<this.frames[0])switch(a){case o.setup:return void(h.x=h.data.x);case o.first:h.x+=(h.data.x-h.x)*i}else{var l=this.getCurveValue(n);switch(a){case o.setup:h.x=h.data.x+l*i;break;case o.first:case o.replace:h.x+=(h.data.x+l-h.x)*i;break;case o.add:h.x+=l*i}}}}]),n}(O);e.TranslateXTimeline=X;var U=function(t){r(n,t);var e=i(n);function n(t,r,i){var s;return a(this,n),(s=e.call(this,t,r,p+"|"+i)).boneIndex=0,s.boneIndex=i,s}return s(n,[{key:"apply",value:function(t,e,n,r,i,a,s){var h=t.bones[this.boneIndex];if(h.active)if(n<this.frames[0])switch(a){case o.setup:return void(h.y=h.data.y);case o.first:h.y+=(h.data.y-h.y)*i}else{var l=this.getCurveValue(n);switch(a){case o.setup:h.y=h.data.y+l*i;break;case o.first:case o.replace:h.y+=(h.data.y+l-h.y)*i;break;case o.add:h.y+=l*i}}}}]),n}(O);e.TranslateYTimeline=U;var V=function(t){r(n,t);var e=i(n);function n(t,r,i){var s;return a(this,n),(s=e.call(this,t,r,g+"|"+i,m+"|"+i)).boneIndex=0,s.boneIndex=i,s}return s(n,[{key:"apply",value:function(t,e,n,r,i,a,s){var l=t.bones[this.boneIndex];if(l.active){var c=this.frames;if(n<c[0])switch(a){case o.setup:return l.scaleX=l.data.scaleX,void(l.scaleY=l.data.scaleY);case o.first:l.scaleX+=(l.data.scaleX-l.scaleX)*i,l.scaleY+=(l.data.scaleY-l.scaleY)*i}else{var f,d,v=F.search(c,n,3),p=this.curves[v/3];switch(p){case 0:var g=c[v];f=c[v+1],d=c[v+2];var m=(n-g)/(c[v+3]-g);f+=(c[v+3+1]-f)*m,d+=(c[v+3+2]-d)*m;break;case 1:f=c[v+1],d=c[v+2];break;default:f=this.getBezierValue(n,v,1,p-2),d=this.getBezierValue(n,v,2,p+18-2)}if(f*=l.data.scaleX,d*=l.data.scaleY,1===i)a===o.add?(l.scaleX+=f-l.data.scaleX,l.scaleY+=d-l.data.scaleY):(l.scaleX=f,l.scaleY=d);else{var y=0,x=0;if(s===h.mixOut)switch(a){case o.setup:y=l.data.scaleX,x=l.data.scaleY,l.scaleX=y+(Math.abs(f)*u.MathUtils.signum(y)-y)*i,l.scaleY=x+(Math.abs(d)*u.MathUtils.signum(x)-x)*i;break;case o.first:case o.replace:y=l.scaleX,x=l.scaleY,l.scaleX=y+(Math.abs(f)*u.MathUtils.signum(y)-y)*i,l.scaleY=x+(Math.abs(d)*u.MathUtils.signum(x)-x)*i;break;case o.add:l.scaleX+=(f-l.data.scaleX)*i,l.scaleY+=(d-l.data.scaleY)*i}else switch(a){case o.setup:y=Math.abs(l.data.scaleX)*u.MathUtils.signum(f),x=Math.abs(l.data.scaleY)*u.MathUtils.signum(d),l.scaleX=y+(f-y)*i,l.scaleY=x+(d-x)*i;break;case o.first:case o.replace:y=Math.abs(l.scaleX)*u.MathUtils.signum(f),x=Math.abs(l.scaleY)*u.MathUtils.signum(d),l.scaleX=y+(f-y)*i,l.scaleY=x+(d-x)*i;break;case o.add:l.scaleX+=(f-l.data.scaleX)*i,l.scaleY+=(d-l.data.scaleY)*i}}}}}}]),n}(L);e.ScaleTimeline=V;var j=function(t){r(n,t);var e=i(n);function n(t,r,i){var s;return a(this,n),(s=e.call(this,t,r,g+"|"+i)).boneIndex=0,s.boneIndex=i,s}return s(n,[{key:"apply",value:function(t,e,n,r,i,a,s){var l=t.bones[this.boneIndex];if(l.active)if(n<this.frames[0])switch(a){case o.setup:return void(l.scaleX=l.data.scaleX);case o.first:l.scaleX+=(l.data.scaleX-l.scaleX)*i}else{var c=this.getCurveValue(n)*l.data.scaleX;if(1===i)a===o.add?l.scaleX+=c-l.data.scaleX:l.scaleX=c;else{var f=0;if(s===h.mixOut)switch(a){case o.setup:f=l.data.scaleX,l.scaleX=f+(Math.abs(c)*u.MathUtils.signum(f)-f)*i;break;case o.first:case o.replace:f=l.scaleX,l.scaleX=f+(Math.abs(c)*u.MathUtils.signum(f)-f)*i;break;case o.add:l.scaleX+=(c-l.data.scaleX)*i}else switch(a){case o.setup:f=Math.abs(l.data.scaleX)*u.MathUtils.signum(c),l.scaleX=f+(c-f)*i;break;case o.first:case o.replace:f=Math.abs(l.scaleX)*u.MathUtils.signum(c),l.scaleX=f+(c-f)*i;break;case o.add:l.scaleX+=(c-l.data.scaleX)*i}}}}}]),n}(O);e.ScaleXTimeline=j;var N=function(t){r(n,t);var e=i(n);function n(t,r,i){var s;return a(this,n),(s=e.call(this,t,r,m+"|"+i)).boneIndex=0,s.boneIndex=i,s}return s(n,[{key:"apply",value:function(t,e,n,r,i,a,s){var l=t.bones[this.boneIndex];if(l.active)if(n<this.frames[0])switch(a){case o.setup:return void(l.scaleY=l.data.scaleY);case o.first:l.scaleY+=(l.data.scaleY-l.scaleY)*i}else{var c=this.getCurveValue(n)*l.data.scaleY;if(1===i)a===o.add?l.scaleY+=c-l.data.scaleY:l.scaleY=c;else{var f=0;if(s===h.mixOut)switch(a){case o.setup:f=l.data.scaleY,l.scaleY=f+(Math.abs(c)*u.MathUtils.signum(f)-f)*i;break;case o.first:case o.replace:f=l.scaleY,l.scaleY=f+(Math.abs(c)*u.MathUtils.signum(f)-f)*i;break;case o.add:l.scaleY+=(c-l.data.scaleY)*i}else switch(a){case o.setup:f=Math.abs(l.data.scaleY)*u.MathUtils.signum(c),l.scaleY=f+(c-f)*i;break;case o.first:case o.replace:f=Math.abs(l.scaleY)*u.MathUtils.signum(c),l.scaleY=f+(c-f)*i;break;case o.add:l.scaleY+=(c-l.data.scaleY)*i}}}}}]),n}(O);e.ScaleYTimeline=N;var z=function(t){r(n,t);var e=i(n);function n(t,r,i){var s;return a(this,n),(s=e.call(this,t,r,y+"|"+i,x+"|"+i)).boneIndex=0,s.boneIndex=i,s}return s(n,[{key:"apply",value:function(t,e,n,r,i,a,s){var h=t.bones[this.boneIndex];if(h.active){var l=this.frames;if(n<l[0])switch(a){case o.setup:return h.shearX=h.data.shearX,void(h.shearY=h.data.shearY);case o.first:h.shearX+=(h.data.shearX-h.shearX)*i,h.shearY+=(h.data.shearY-h.shearY)*i}else{var u=0,c=0,f=F.search(l,n,3),d=this.curves[f/3];switch(d){case 0:var v=l[f];u=l[f+1],c=l[f+2];var p=(n-v)/(l[f+3]-v);u+=(l[f+3+1]-u)*p,c+=(l[f+3+2]-c)*p;break;case 1:u=l[f+1],c=l[f+2];break;default:u=this.getBezierValue(n,f,1,d-2),c=this.getBezierValue(n,f,2,d+18-2)}switch(a){case o.setup:h.shearX=h.data.shearX+u*i,h.shearY=h.data.shearY+c*i;break;case o.first:case o.replace:h.shearX+=(h.data.shearX+u-h.shearX)*i,h.shearY+=(h.data.shearY+c-h.shearY)*i;break;case o.add:h.shearX+=u*i,h.shearY+=c*i}}}}}]),n}(L);e.ShearTimeline=z;var W=function(t){r(n,t);var e=i(n);function n(t,r,i){var s;return a(this,n),(s=e.call(this,t,r,y+"|"+i)).boneIndex=0,s.boneIndex=i,s}return s(n,[{key:"apply",value:function(t,e,n,r,i,a,s){var h=t.bones[this.boneIndex];if(h.active)if(n<this.frames[0])switch(a){case o.setup:return void(h.shearX=h.data.shearX);case o.first:h.shearX+=(h.data.shearX-h.shearX)*i}else{var l=this.getCurveValue(n);switch(a){case o.setup:h.shearX=h.data.shearX+l*i;break;case o.first:case o.replace:h.shearX+=(h.data.shearX+l-h.shearX)*i;break;case o.add:h.shearX+=l*i}}}}]),n}(O);e.ShearXTimeline=W;var G=function(t){r(n,t);var e=i(n);function n(t,r,i){var s;return a(this,n),(s=e.call(this,t,r,x+"|"+i)).boneIndex=0,s.boneIndex=i,s}return s(n,[{key:"apply",value:function(t,e,n,r,i,a,s){var h=t.bones[this.boneIndex];if(h.active)if(n<this.frames[0])switch(a){case o.setup:return void(h.shearY=h.data.shearY);case o.first:h.shearY+=(h.data.shearY-h.shearY)*i}else{var l=this.getCurveValue(n);switch(a){case o.setup:h.shearY=h.data.shearY+l*i;break;case o.first:case o.replace:h.shearY+=(h.data.shearY+l-h.shearY)*i;break;case o.add:h.shearY+=l*i}}}}]),n}(O);e.ShearYTimeline=G;var H=function(t){r(n,t);var e=i(n);function n(t,r,i){var s;return a(this,n),(s=e.call(this,t,r,[M+"|"+i,w+"|"+i])).slotIndex=0,s.slotIndex=i,s}return s(n,[{key:"getFrameEntries",value:function(){return 5}},{key:"setFrame",value:function(t,e,n,r,i,a){t*=5,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r,this.frames[t+3]=i,this.frames[t+4]=a}},{key:"apply",value:function(t,e,n,r,i,a,s){var h=t.slots[this.slotIndex];if(h.bone.active){var l=this.frames,u=h.color;if(n<l[0]){var c=h.data.color;switch(a){case o.setup:return void u.setFromColor(c);case o.first:u.add((c.r-u.r)*i,(c.g-u.g)*i,(c.b-u.b)*i,(c.a-u.a)*i)}}else{var f=0,d=0,v=0,p=0,g=F.search(l,n,5),m=this.curves[g/5];switch(m){case 0:var y=l[g];f=l[g+1],d=l[g+2],v=l[g+3],p=l[g+4];var x=(n-y)/(l[g+5]-y);f+=(l[g+5+1]-f)*x,d+=(l[g+5+2]-d)*x,v+=(l[g+5+3]-v)*x,p+=(l[g+5+4]-p)*x;break;case 1:f=l[g+1],d=l[g+2],v=l[g+3],p=l[g+4];break;default:f=this.getBezierValue(n,g,1,m-2),d=this.getBezierValue(n,g,2,m+18-2),v=this.getBezierValue(n,g,3,m+36-2),p=this.getBezierValue(n,g,4,m+54-2)}1===i?u.set(f,d,v,p):(a===o.setup&&u.setFromColor(h.data.color),u.add((f-u.r)*i,(d-u.g)*i,(v-u.b)*i,(p-u.a)*i))}}}}]),n}(B);e.RGBATimeline=H;var q=function(t){r(n,t);var e=i(n);function n(t,r,i){var s;return a(this,n),(s=e.call(this,t,r,[M+"|"+i])).slotIndex=0,s.slotIndex=i,s}return s(n,[{key:"getFrameEntries",value:function(){return 4}},{key:"setFrame",value:function(t,e,n,r,i){t<<=2,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r,this.frames[t+3]=i}},{key:"apply",value:function(t,e,n,r,i,a,s){var h=t.slots[this.slotIndex];if(h.bone.active){var l=this.frames,u=h.color;if(n<l[0]){var c=h.data.color;switch(a){case o.setup:return u.r=c.r,u.g=c.g,void(u.b=c.b);case o.first:u.r+=(c.r-u.r)*i,u.g+=(c.g-u.g)*i,u.b+=(c.b-u.b)*i}}else{var f=0,d=0,v=0,p=F.search(l,n,4),g=this.curves[p>>2];switch(g){case 0:var m=l[p];f=l[p+1],d=l[p+2],v=l[p+3];var y=(n-m)/(l[p+4]-m);f+=(l[p+4+1]-f)*y,d+=(l[p+4+2]-d)*y,v+=(l[p+4+3]-v)*y;break;case 1:f=l[p+1],d=l[p+2],v=l[p+3];break;default:f=this.getBezierValue(n,p,1,g-2),d=this.getBezierValue(n,p,2,g+18-2),v=this.getBezierValue(n,p,3,g+36-2)}if(1===i)u.r=f,u.g=d,u.b=v;else{if(a===o.setup){var x=h.data.color;u.r=x.r,u.g=x.g,u.b=x.b}u.r+=(f-u.r)*i,u.g+=(d-u.g)*i,u.b+=(v-u.b)*i}}}}}]),n}(B);e.RGBTimeline=q;var J=function(t){r(n,t);var e=i(n);function n(t,r,i){var s;return a(this,n),(s=e.call(this,t,r,w+"|"+i)).slotIndex=0,s.slotIndex=i,s}return s(n,[{key:"apply",value:function(t,e,n,r,i,a,s){var h=t.slots[this.slotIndex];if(h.bone.active){var l=h.color;if(n<this.frames[0]){var u=h.data.color;switch(a){case o.setup:return void(l.a=u.a);case o.first:l.a+=(u.a-l.a)*i}}else{var c=this.getCurveValue(n);1===i?l.a=c:(a===o.setup&&(l.a=h.data.color.a),l.a+=(c-l.a)*i)}}}}]),n}(O);e.AlphaTimeline=J;var K=function(t){r(n,t);var e=i(n);function n(t,r,i){var s;return a(this,n),(s=e.call(this,t,r,[M+"|"+i,w+"|"+i,b+"|"+i])).slotIndex=0,s.slotIndex=i,s}return s(n,[{key:"getFrameEntries",value:function(){return 8}},{key:"setFrame",value:function(t,e,n,r,i,a,s,o,h){t<<=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r,this.frames[t+3]=i,this.frames[t+4]=a,this.frames[t+5]=s,this.frames[t+6]=o,this.frames[t+7]=h}},{key:"apply",value:function(t,e,n,r,i,a,s){var h=t.slots[this.slotIndex];if(h.bone.active){var l=this.frames,u=h.color,c=h.darkColor;if(n<l[0]){var f=h.data.color,d=h.data.darkColor;switch(a){case o.setup:return u.setFromColor(f),c.r=d.r,c.g=d.g,void(c.b=d.b);case o.first:u.add((f.r-u.r)*i,(f.g-u.g)*i,(f.b-u.b)*i,(f.a-u.a)*i),c.r+=(d.r-c.r)*i,c.g+=(d.g-c.g)*i,c.b+=(d.b-c.b)*i}}else{var v=0,p=0,g=0,m=0,y=0,x=0,M=0,w=F.search(l,n,8),b=this.curves[w>>3];switch(b){case 0:var k=l[w];v=l[w+1],p=l[w+2],g=l[w+3],m=l[w+4],y=l[w+5],x=l[w+6],M=l[w+7];var T=(n-k)/(l[w+8]-k);v+=(l[w+8+1]-v)*T,p+=(l[w+8+2]-p)*T,g+=(l[w+8+3]-g)*T,m+=(l[w+8+4]-m)*T,y+=(l[w+8+5]-y)*T,x+=(l[w+8+6]-x)*T,M+=(l[w+8+7]-M)*T;break;case 1:v=l[w+1],p=l[w+2],g=l[w+3],m=l[w+4],y=l[w+5],x=l[w+6],M=l[w+7];break;default:v=this.getBezierValue(n,w,1,b-2),p=this.getBezierValue(n,w,2,b+18-2),g=this.getBezierValue(n,w,3,b+36-2),m=this.getBezierValue(n,w,4,b+54-2),y=this.getBezierValue(n,w,5,b+72-2),x=this.getBezierValue(n,w,6,b+90-2),M=this.getBezierValue(n,w,7,b+108-2)}if(1===i)u.set(v,p,g,m),c.r=y,c.g=x,c.b=M;else{if(a===o.setup){u.setFromColor(h.data.color);var S=h.data.darkColor;c.r=S.r,c.g=S.g,c.b=S.b}u.add((v-u.r)*i,(p-u.g)*i,(g-u.b)*i,(m-u.a)*i),c.r+=(y-c.r)*i,c.g+=(x-c.g)*i,c.b+=(M-c.b)*i}}}}}]),n}(B);e.RGBA2Timeline=K;var Q=function(t){r(n,t);var e=i(n);function n(t,r,i){var s;return a(this,n),(s=e.call(this,t,r,[M+"|"+i,b+"|"+i])).slotIndex=0,s.slotIndex=i,s}return s(n,[{key:"getFrameEntries",value:function(){return 7}},{key:"setFrame",value:function(t,e,n,r,i,a,s,o){t*=7,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r,this.frames[t+3]=i,this.frames[t+4]=a,this.frames[t+5]=s,this.frames[t+6]=o}},{key:"apply",value:function(t,e,n,r,i,a,s){var h=t.slots[this.slotIndex];if(h.bone.active){var l=this.frames,u=h.color,c=h.darkColor;if(n<l[0]){var f=h.data.color,d=h.data.darkColor;switch(a){case o.setup:return u.r=f.r,u.g=f.g,u.b=f.b,c.r=d.r,c.g=d.g,void(c.b=d.b);case o.first:u.r+=(f.r-u.r)*i,u.g+=(f.g-u.g)*i,u.b+=(f.b-u.b)*i,c.r+=(d.r-c.r)*i,c.g+=(d.g-c.g)*i,c.b+=(d.b-c.b)*i}}else{var v=0,p=0,g=0,m=0,y=0,x=0,M=F.search(l,n,7),w=this.curves[M/7];switch(w){case 0:var b=l[M];v=l[M+1],p=l[M+2],g=l[M+3],m=l[M+4],y=l[M+5],x=l[M+6];var k=(n-b)/(l[M+7]-b);v+=(l[M+7+1]-v)*k,p+=(l[M+7+2]-p)*k,g+=(l[M+7+3]-g)*k,m+=(l[M+7+4]-m)*k,y+=(l[M+7+5]-y)*k,x+=(l[M+7+6]-x)*k;break;case 1:v=l[M+1],p=l[M+2],g=l[M+3],m=l[M+4],y=l[M+5],x=l[M+6];break;default:v=this.getBezierValue(n,M,1,w-2),p=this.getBezierValue(n,M,2,w+18-2),g=this.getBezierValue(n,M,3,w+36-2),m=this.getBezierValue(n,M,4,w+54-2),y=this.getBezierValue(n,M,5,w+72-2),x=this.getBezierValue(n,M,6,w+90-2)}if(1===i)u.r=v,u.g=p,u.b=g,c.r=m,c.g=y,c.b=x;else{if(a===o.setup){var T=h.data.color,S=h.data.darkColor;u.r=T.r,u.g=T.g,u.b=T.b,c.r=S.r,c.g=S.g,c.b=S.b}u.r+=(v-u.r)*i,u.g+=(p-u.g)*i,u.b+=(g-u.b)*i,c.r+=(m-c.r)*i,c.g+=(y-c.g)*i,c.b+=(x-c.b)*i}}}}}]),n}(B);e.RGB2Timeline=Q;var Z=function(t){r(n,t);var e=i(n);function n(t,r){var i;return a(this,n),(i=e.call(this,t,[k+"|"+r])).slotIndex=0,i.slotIndex=r,i.attachmentNames=new Array(t),i}return s(n,[{key:"getFrameCount",value:function(){return this.frames.length}},{key:"setFrame",value:function(t,e,n){this.frames[t]=e,this.attachmentNames[t]=n}},{key:"apply",value:function(t,e,n,r,i,a,s){var l=t.slots[this.slotIndex];l.bone.active&&(s!==h.mixOut?n<this.frames[0]?a!==o.setup&&a!==o.first||this.setAttachment(t,l,l.data.attachmentName):this.setAttachment(t,l,this.attachmentNames[F.search1(this.frames,n)]):a===o.setup&&this.setAttachment(t,l,l.data.attachmentName))}},{key:"setAttachment",value:function(t,e,n){e.setAttachment(n?t.getAttachment(this.slotIndex,n):null)}}]),n}(F);e.AttachmentTimeline=Z;var $=function(t){r(n,t);var e=i(n);function n(t,r,i,s){var o;return a(this,n),(o=e.call(this,t,r,[T+"|"+i+"|"+s.id])).slotIndex=0,o.slotIndex=i,o.attachment=s,o.vertices=new Array(t),o}return s(n,[{key:"getFrameCount",value:function(){return this.frames.length}},{key:"setFrame",value:function(t,e,n){this.frames[t]=e,this.vertices[t]=n}},{key:"setBezier",value:function(t,e,n,r,i,a,s,o,h,l,u){var c=this.curves,f=this.getFrameCount()+18*t;0===n&&(c[e]=2+f);for(var d=.03*(r-2*a+o),v=.03*h-.06*s,p=.006*(3*(a-o)-r+l),g=.018*(s-h+.33333333),m=2*d+p,y=2*v+g,x=.3*(a-r)+d+.16666667*p,M=.3*s+v+.16666667*g,w=r+x,b=M,k=f+18;f<k;f+=2)c[f]=w,c[f+1]=b,x+=m,M+=y,m+=p,y+=g,w+=x,b+=M}},{key:"getCurvePercent",value:function(t,e){var n=this.curves,r=n[e];switch(r){case 0:var i=this.frames[e];return(t-i)/(this.frames[e+this.getFrameEntries()]-i);case 1:return 0}if(n[r-=2]>t){var a=this.frames[e];return n[r+1]*(t-a)/(n[r]-a)}var s=r+18;for(r+=2;r<s;r+=2)if(n[r]>=t){var o=n[r-2],h=n[r-1];return h+(t-o)/(n[r]-o)*(n[r+1]-h)}var l=n[s-2],u=n[s-1];return u+(1-u)*(t-l)/(this.frames[e+this.getFrameEntries()]-l)}},{key:"apply",value:function(t,e,n,r,i,a,s){var h=t.slots[this.slotIndex];if(h.bone.active){var c=h.getAttachment();if(c&&c instanceof l.VertexAttachment&&c.timelineAttachment===this.attachment){var f=h.deform;0===f.length&&(a=o.setup);var d=this.vertices,v=d[0].length,p=this.frames;if(n<p[0])switch(a){case o.setup:return void(f.length=0);case o.first:if(1===i)return void(f.length=0);f.length=v;var g=c;if(g.bones){i=1-i;for(y=0;y<v;y++)f[y]*=i}else for(var m=g.vertices,y=0;y<v;y++)f[y]+=(m[y]-f[y])*i}else if(f.length=v,n>=p[p.length-1]){var x=d[p.length-1];if(1===i)if(a===o.add){var M=c;if(M.bones)for(var w=0;w<v;w++)f[w]+=x[w];else for(var b=M.vertices,k=0;k<v;k++)f[k]+=x[k]-b[k]}else u.Utils.arrayCopy(x,0,f,0,v);else switch(a){case o.setup:var T=c;if(T.bones)for(var S=0;S<v;S++)f[S]=x[S]*i;else for(var A=T.vertices,C=0;C<v;C++){var _=A[C];f[C]=_+(x[C]-_)*i}break;case o.first:case o.replace:for(var I=0;I<v;I++)f[I]+=(x[I]-f[I])*i;break;case o.add:var E=c;if(E.bones)for(var P=0;P<v;P++)f[P]+=x[P]*i;else for(var R=E.vertices,B=0;B<v;B++)f[B]+=(x[B]-R[B])*i}}else{var O=F.search1(p,n),L=this.getCurvePercent(n,O),D=d[O],Y=d[O+1];if(1===i)if(a===o.add){var X=c;if(X.bones)for(var U=0;U<v;U++){var V=D[U];f[U]+=V+(Y[U]-V)*L}else for(var j=X.vertices,N=0;N<v;N++){var z=D[N];f[N]+=z+(Y[N]-z)*L-j[N]}}else for(var W=0;W<v;W++){var G=D[W];f[W]=G+(Y[W]-G)*L}else switch(a){case o.setup:var H=c;if(H.bones)for(var q=0;q<v;q++){var J=D[q];f[q]=(J+(Y[q]-J)*L)*i}else for(var K=H.vertices,Q=0;Q<v;Q++){var Z=D[Q],$=K[Q];f[Q]=$+(Z+(Y[Q]-Z)*L-$)*i}break;case o.first:case o.replace:for(var tt=0;tt<v;tt++){var et=D[tt];f[tt]+=(et+(Y[tt]-et)*L-f[tt])*i}break;case o.add:var nt=c;if(nt.bones)for(var rt=0;rt<v;rt++){var it=D[rt];f[rt]+=(it+(Y[rt]-it)*L)*i}else for(var at=nt.vertices,st=0;st<v;st++){var ot=D[st];f[st]+=(ot+(Y[st]-ot)*L-at[st])*i}}}}}}}]),n}(B);e.DeformTimeline=$;var tt=function(t){r(n,t);var e=i(n);function n(t){var r;return a(this,n),(r=e.call(this,t,n.propertyIds)).events=new Array(t),r}return s(n,[{key:"getFrameCount",value:function(){return this.frames.length}},{key:"setFrame",value:function(t,e){this.frames[t]=e.time,this.events[t]=e}},{key:"apply",value:function(t,e,n,r,i,a,s){if(r){var o=this.frames,h=this.frames.length;if(e>n)this.apply(t,e,Number.MAX_VALUE,r,i,a,s),e=-1;else if(e>=o[h-1])return;if(!(n<o[0])){var l=0;if(e<o[0])l=0;else for(var u=o[l=F.search1(o,e)+1];l>0&&o[l-1]===u;)l--;for(;l<h&&n>=o[l];l++)r.push(this.events[l])}}}}]),n}(F);e.EventTimeline=tt,tt.propertyIds=[""+S];var et=function(t){r(n,t);var e=i(n);function n(t){var r;return a(this,n),(r=e.call(this,t,n.propertyIds)).drawOrders=new Array(t),r}return s(n,[{key:"getFrameCount",value:function(){return this.frames.length}},{key:"setFrame",value:function(t,e,n){this.frames[t]=e,this.drawOrders[t]=n}},{key:"apply",value:function(t,e,n,r,i,a,s){if(s!==h.mixOut)if(n<this.frames[0])a!==o.setup&&a!==o.first||u.Utils.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var l=F.search1(this.frames,n),c=this.drawOrders[l];if(c)for(var f=t.drawOrder,d=t.slots,v=0,p=c.length;v<p;v++)f[v]=d[c[v]];else u.Utils.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}else a===o.setup&&u.Utils.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}}]),n}(F);e.DrawOrderTimeline=et,et.propertyIds=[""+A];var nt=function(t){r(n,t);var e=i(n);function n(t,r,i){var s;return a(this,n),(s=e.call(this,t,r,[C+"|"+i])).ikConstraintIndex=0,s.ikConstraintIndex=i,s}return s(n,[{key:"getFrameEntries",value:function(){return 6}},{key:"setFrame",value:function(t,e,n,r,i,a,s){t*=6,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r,this.frames[t+3]=i,this.frames[t+4]=a?1:0,this.frames[t+5]=s?1:0}},{key:"apply",value:function(t,e,n,r,i,a,s){var l=t.ikConstraints[this.ikConstraintIndex];if(l.active){var u=this.frames;if(n<u[0])switch(a){case o.setup:return l.mix=l.data.mix,l.softness=l.data.softness,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,void(l.stretch=l.data.stretch);case o.first:l.mix+=(l.data.mix-l.mix)*i,l.softness+=(l.data.softness-l.softness)*i,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch}else{var c=0,f=0,d=F.search(u,n,6),v=this.curves[d/6];switch(v){case 0:var p=u[d];c=u[d+1],f=u[d+2];var g=(n-p)/(u[d+6]-p);c+=(u[d+6+1]-c)*g,f+=(u[d+6+2]-f)*g;break;case 1:c=u[d+1],f=u[d+2];break;default:c=this.getBezierValue(n,d,1,v-2),f=this.getBezierValue(n,d,2,v+18-2)}a===o.setup?(l.mix=l.data.mix+(c-l.data.mix)*i,l.softness=l.data.softness+(f-l.data.softness)*i,s===h.mixOut?(l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch):(l.bendDirection=u[d+3],l.compress=0!==u[d+4],l.stretch=0!==u[d+5])):(l.mix+=(c-l.mix)*i,l.softness+=(f-l.softness)*i,s===h.mixIn&&(l.bendDirection=u[d+3],l.compress=0!==u[d+4],l.stretch=0!==u[d+5]))}}}}]),n}(B);e.IkConstraintTimeline=nt;var rt=function(t){r(n,t);var e=i(n);function n(t,r,i){var s;return a(this,n),(s=e.call(this,t,r,[_+"|"+i])).transformConstraintIndex=0,s.transformConstraintIndex=i,s}return s(n,[{key:"getFrameEntries",value:function(){return 7}},{key:"setFrame",value:function(t,e,n,r,i,a,s,o){var h=this.frames;h[t*=7]=e,h[t+1]=n,h[t+2]=r,h[t+3]=i,h[t+4]=a,h[t+5]=s,h[t+6]=o}},{key:"apply",value:function(t,e,n,r,i,a,s){var h=t.transformConstraints[this.transformConstraintIndex];if(h.active){var l=this.frames;if(n<l[0]){var u=h.data;switch(a){case o.setup:return h.mixRotate=u.mixRotate,h.mixX=u.mixX,h.mixY=u.mixY,h.mixScaleX=u.mixScaleX,h.mixScaleY=u.mixScaleY,void(h.mixShearY=u.mixShearY);case o.first:h.mixRotate+=(u.mixRotate-h.mixRotate)*i,h.mixX+=(u.mixX-h.mixX)*i,h.mixY+=(u.mixY-h.mixY)*i,h.mixScaleX+=(u.mixScaleX-h.mixScaleX)*i,h.mixScaleY+=(u.mixScaleY-h.mixScaleY)*i,h.mixShearY+=(u.mixShearY-h.mixShearY)*i}}else{var c,f,d,v,p,g,m=F.search(l,n,7),y=this.curves[m/7];switch(y){case 0:var x=l[m];c=l[m+1],f=l[m+2],d=l[m+3],v=l[m+4],p=l[m+5],g=l[m+6];var M=(n-x)/(l[m+7]-x);c+=(l[m+7+1]-c)*M,f+=(l[m+7+2]-f)*M,d+=(l[m+7+3]-d)*M,v+=(l[m+7+4]-v)*M,p+=(l[m+7+5]-p)*M,g+=(l[m+7+6]-g)*M;break;case 1:c=l[m+1],f=l[m+2],d=l[m+3],v=l[m+4],p=l[m+5],g=l[m+6];break;default:c=this.getBezierValue(n,m,1,y-2),f=this.getBezierValue(n,m,2,y+18-2),d=this.getBezierValue(n,m,3,y+36-2),v=this.getBezierValue(n,m,4,y+54-2),p=this.getBezierValue(n,m,5,y+72-2),g=this.getBezierValue(n,m,6,y+90-2)}if(a===o.setup){var w=h.data;h.mixRotate=w.mixRotate+(c-w.mixRotate)*i,h.mixX=w.mixX+(f-w.mixX)*i,h.mixY=w.mixY+(d-w.mixY)*i,h.mixScaleX=w.mixScaleX+(v-w.mixScaleX)*i,h.mixScaleY=w.mixScaleY+(p-w.mixScaleY)*i,h.mixShearY=w.mixShearY+(g-w.mixShearY)*i}else h.mixRotate+=(c-h.mixRotate)*i,h.mixX+=(f-h.mixX)*i,h.mixY+=(d-h.mixY)*i,h.mixScaleX+=(v-h.mixScaleX)*i,h.mixScaleY+=(p-h.mixScaleY)*i,h.mixShearY+=(g-h.mixShearY)*i}}}}]),n}(B);e.TransformConstraintTimeline=rt;var it=function(t){r(n,t);var e=i(n);function n(t,r,i){var s;return a(this,n),(s=e.call(this,t,r,I+"|"+i)).pathConstraintIndex=0,s.pathConstraintIndex=i,s}return s(n,[{key:"apply",value:function(t,e,n,r,i,a,s){var h=t.pathConstraints[this.pathConstraintIndex];if(h.active)if(n<this.frames[0])switch(a){case o.setup:return void(h.position=h.data.position);case o.first:h.position+=(h.data.position-h.position)*i}else{var l=this.getCurveValue(n);a===o.setup?h.position=h.data.position+(l-h.data.position)*i:h.position+=(l-h.position)*i}}}]),n}(O);e.PathConstraintPositionTimeline=it;var at=function(t){r(n,t);var e=i(n);function n(t,r,i){var s;return a(this,n),(s=e.call(this,t,r,E+"|"+i)).pathConstraintIndex=0,s.pathConstraintIndex=i,s}return s(n,[{key:"apply",value:function(t,e,n,r,i,a,s){var h=t.pathConstraints[this.pathConstraintIndex];if(h.active)if(n<this.frames[0])switch(a){case o.setup:return void(h.spacing=h.data.spacing);case o.first:h.spacing+=(h.data.spacing-h.spacing)*i}else{var l=this.getCurveValue(n);a===o.setup?h.spacing=h.data.spacing+(l-h.data.spacing)*i:h.spacing+=(l-h.spacing)*i}}}]),n}(O);e.PathConstraintSpacingTimeline=at;var st=function(t){r(n,t);var e=i(n);function n(t,r,i){var s;return a(this,n),(s=e.call(this,t,r,[P+"|"+i])).pathConstraintIndex=0,s.pathConstraintIndex=i,s}return s(n,[{key:"getFrameEntries",value:function(){return 4}},{key:"setFrame",value:function(t,e,n,r,i){var a=this.frames;a[t<<=2]=e,a[t+1]=n,a[t+2]=r,a[t+3]=i}},{key:"apply",value:function(t,e,n,r,i,a,s){var h=t.pathConstraints[this.pathConstraintIndex];if(h.active){var l=this.frames;if(n<l[0])switch(a){case o.setup:return h.mixRotate=h.data.mixRotate,h.mixX=h.data.mixX,void(h.mixY=h.data.mixY);case o.first:h.mixRotate+=(h.data.mixRotate-h.mixRotate)*i,h.mixX+=(h.data.mixX-h.mixX)*i,h.mixY+=(h.data.mixY-h.mixY)*i}else{var u,c,f,d=F.search(l,n,4),v=this.curves[d>>2];switch(v){case 0:var p=l[d];u=l[d+1],c=l[d+2],f=l[d+3];var g=(n-p)/(l[d+4]-p);u+=(l[d+4+1]-u)*g,c+=(l[d+4+2]-c)*g,f+=(l[d+4+3]-f)*g;break;case 1:u=l[d+1],c=l[d+2],f=l[d+3];break;default:u=this.getBezierValue(n,d,1,v-2),c=this.getBezierValue(n,d,2,v+18-2),f=this.getBezierValue(n,d,3,v+36-2)}if(a===o.setup){var m=h.data;h.mixRotate=m.mixRotate+(u-m.mixRotate)*i,h.mixX=m.mixX+(c-m.mixX)*i,h.mixY=m.mixY+(f-m.mixY)*i}else h.mixRotate+=(u-h.mixRotate)*i,h.mixX+=(c-h.mixX)*i,h.mixY+=(f-h.mixY)*i}}}}]),n}(B);e.PathConstraintMixTimeline=st;var ot=function(t){r(n,t);var e=i(n);function n(t,r,i){var s;return a(this,n),(s=e.call(this,t,[R+"|"+r+"|"+i.sequence.id])).slotIndex=r,s.attachment=i,s}return s(n,[{key:"getFrameEntries",value:function(){return n.ENTRIES}},{key:"getSlotIndex",value:function(){return this.slotIndex}},{key:"getAttachment",value:function(){return this.attachment}},{key:"setFrame",value:function(t,e,r,i,a){var s=this.frames;s[t*=n.ENTRIES]=e,s[t+n.MODE]=r|i<<4,s[t+n.DELAY]=a}},{key:"apply",value:function(t,e,r,i,a,s,h){var u=t.slots[this.slotIndex];if(u.bone.active){var f=u.attachment,d=this.attachment;if(f===d||f instanceof l.VertexAttachment&&f.timelineAttachment===d){var v=this.frames;if(r<v[0])s!==o.setup&&s!==o.first||(u.sequenceIndex=-1);else{var p=F.search(v,r,n.ENTRIES),g=v[p],m=v[p+n.MODE],y=v[p+n.DELAY];if(this.attachment.sequence){var x=m>>4,M=this.attachment.sequence.regions.length,w=c.SequenceModeValues[15&m];if(w!==c.SequenceMode.hold)switch(x+=(r-g)/y+1e-5|0,w){case c.SequenceMode.once:x=Math.min(M-1,x);break;case c.SequenceMode.loop:x%=M;break;case c.SequenceMode.pingpong:var b=(M<<1)-2;(x=0===b?0:x%b)>=M&&(x=b-x);break;case c.SequenceMode.onceReverse:x=Math.max(M-1-x,0);break;case c.SequenceMode.loopReverse:x=M-1-x%M;break;case c.SequenceMode.pingpongReverse:var k=(M<<1)-2;(x=0===k?0:(x+M-1)%k)>=M&&(x=k-x)}u.sequenceIndex=x}}}}}}]),n}(F);e.SequenceTimeline=ot,ot.ENTRIES=3,ot.MODE=1,ot.DELAY=2},1700:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.CURRENT=e.SETUP=e.HOLD_MIX=e.HOLD_FIRST=e.HOLD_SUBSEQUENT=e.FIRST=e.SUBSEQUENT=e.AnimationStateAdapter=e.EventType=e.EventQueue=e.TrackEntry=e.AnimationState=void 0;var a=n(9889),s=n(4153),o=function(){function t(e){r(this,t),this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new u(this),this.propertyIDs=new s.StringSet,this.animationsChanged=!1,this.trackEntryPool=new s.Pool((function(){return new h})),this.data=e}return i(t,[{key:"update",value:function(t){t*=this.timeScale;for(var e=this.tracks,n=0,r=e.length;n<r;n++){var i=e[n];if(i){i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast;var a=t*i.timeScale;if(i.delay>0){if(i.delay-=a,i.delay>0)continue;a=-i.delay,i.delay=0}var s=i.next;if(s){var o=i.trackLast-s.delay;if(o>=0){for(s.delay=0,s.trackTime+=0===i.timeScale?0:(o/i.timeScale+t)*s.timeScale,i.trackTime+=a,this.setCurrent(n,s,!0);s.mixingFrom;)s.mixTime+=t,s=s.mixingFrom;continue}}else if(i.trackLast>=i.trackEnd&&!i.mixingFrom){e[n]=null,this.queue.end(i),this.clearNext(i);continue}if(i.mixingFrom&&this.updateMixingFrom(i,t)){var h=i.mixingFrom;for(i.mixingFrom=null,h&&(h.mixingTo=null);h;)this.queue.end(h),h=h.mixingFrom}i.trackTime+=a}}this.queue.drain()}},{key:"updateMixingFrom",value:function(t,e){var n=t.mixingFrom;if(!n)return!0;var r=this.updateMixingFrom(n,e);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!==n.totalAlpha&&0!==t.mixDuration||(t.mixingFrom=n.mixingFrom,n.mixingFrom&&(n.mixingFrom.mixingTo=t),t.interruptAlpha=n.interruptAlpha,this.queue.end(n)),r):(n.trackTime+=e*n.timeScale,t.mixTime+=e,!1)}},{key:"apply",value:function(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var n=this.events,r=this.tracks,i=!1,o=0,h=r.length;o<h;o++){var l=r[o];if(l&&!(l.delay>0)){i=!0;var u=0===o?a.MixBlend.first:l.mixBlend,c=l.alpha;l.mixingFrom?c*=this.applyMixingFrom(l,t,u):l.trackTime>=l.trackEnd&&!l.next&&(c=0);var f=l.animationLast,d=l.getAnimationTime(),v=d,p=n;l.reverse&&(v=l.animation.duration-v,p=null);var g=l.animation.timelines,m=g.length;if(0===o&&1===c||u===a.MixBlend.add)for(var y=0;y<m;y++){s.Utils.webkit602BugfixHelper(c,u);var x=g[y];x instanceof a.AttachmentTimeline?this.applyAttachmentTimeline(x,t,v,u,!0):x.apply(t,f,v,p,c,u,a.MixDirection.mixIn)}else{var M=l.timelineMode,w=l.shortestRotation,b=!w&&l.timelinesRotation.length!==m<<1;b&&(l.timelinesRotation.length=m<<1);for(var k=0;k<m;k++){var T=g[k],S=M[k]===e.SUBSEQUENT?u:a.MixBlend.setup;!w&&T instanceof a.RotateTimeline?this.applyRotateTimeline(T,t,v,c,S,l.timelinesRotation,k<<1,b):T instanceof a.AttachmentTimeline?this.applyAttachmentTimeline(T,t,v,u,!0):(s.Utils.webkit602BugfixHelper(c,u),T.apply(t,f,v,p,c,S,a.MixDirection.mixIn))}}this.queueEvents(l,d),n.length=0,l.nextAnimationLast=d,l.nextTrackLast=l.trackTime}}for(var A=this.unkeyedState+e.SETUP,C=t.slots,_=0,I=t.slots.length;_<I;_++){var E=C[_];if(E.attachmentState===A){var P=E.data.attachmentName;E.setAttachment(P?t.getAttachment(E.data.index,P):null)}}return this.unkeyedState+=2,this.queue.drain(),i}},{key:"applyMixingFrom",value:function(t,n,r){var i=t.mixingFrom;i.mixingFrom&&this.applyMixingFrom(i,n,r);var o=0;0===t.mixDuration?(o=1,r===a.MixBlend.first&&(r=a.MixBlend.setup)):((o=t.mixTime/t.mixDuration)>1&&(o=1),r!==a.MixBlend.first&&(r=i.mixBlend));var h=o<i.attachmentThreshold,l=o<i.drawOrderThreshold,u=i.animation.timelines,c=u.length,f=i.alpha*t.interruptAlpha,d=f*(1-o),v=i.animationLast,p=i.getAnimationTime(),g=p,m=null;if(i.reverse?g=i.animation.duration-g:o<i.eventThreshold&&(m=this.events),r===a.MixBlend.add)for(var y=0;y<c;y++)u[y].apply(n,v,g,m,d,r,a.MixDirection.mixOut);else{var x=i.timelineMode,M=i.timelineHoldMix,w=i.shortestRotation,b=!w&&i.timelinesRotation.length!==c<<1;b&&(i.timelinesRotation.length=c<<1),i.totalAlpha=0;for(var k=0;k<c;k++){var T=u[k],S=a.MixDirection.mixOut,A=void 0,C=0;switch(x[k]){case e.SUBSEQUENT:if(!l&&T instanceof a.DrawOrderTimeline)continue;A=r,C=d;break;case e.FIRST:A=a.MixBlend.setup,C=d;break;case e.HOLD_SUBSEQUENT:A=r,C=f;break;case e.HOLD_FIRST:A=a.MixBlend.setup,C=f;break;default:A=a.MixBlend.setup;var _=M[k];C=f*Math.max(0,1-_.mixTime/_.mixDuration)}i.totalAlpha+=C,!w&&T instanceof a.RotateTimeline?this.applyRotateTimeline(T,n,g,C,A,i.timelinesRotation,k<<1,b):T instanceof a.AttachmentTimeline?this.applyAttachmentTimeline(T,n,g,A,h):(s.Utils.webkit602BugfixHelper(C,r),l&&T instanceof a.DrawOrderTimeline&&A===a.MixBlend.setup&&(S=a.MixDirection.mixIn),T.apply(n,v,g,m,C,A,S))}}return t.mixDuration>0&&this.queueEvents(i,p),this.events.length=0,i.nextAnimationLast=p,i.nextTrackLast=i.trackTime,o}},{key:"applyAttachmentTimeline",value:function(t,n,r,i,s){var o=n.slots[t.slotIndex];o.bone.active&&(r<t.frames[0]?i!==a.MixBlend.setup&&i!==a.MixBlend.first||this.setAttachment(n,o,o.data.attachmentName,s):this.setAttachment(n,o,t.attachmentNames[a.Timeline.search1(t.frames,r)],s),o.attachmentState<=this.unkeyedState&&(o.attachmentState=this.unkeyedState+e.SETUP))}},{key:"setAttachment",value:function(t,n,r,i){n.setAttachment(r?t.getAttachment(n.data.index,r):null),i&&(n.attachmentState=this.unkeyedState+e.CURRENT)}},{key:"applyRotateTimeline",value:function(t,e,n,r,i,o,h,l){if(l&&(o[h]=0),1!==r){var u=e.bones[t.boneIndex];if(u.active){var c=0,f=0;if(n<t.frames[0])switch(i){case a.MixBlend.setup:u.rotation=u.data.rotation;default:return;case a.MixBlend.first:c=u.rotation,f=u.data.rotation}else c=i===a.MixBlend.setup?u.data.rotation:u.rotation,f=u.data.rotation+t.getCurveValue(n);var d=0,v=f-c;if(0===(v-=360*(16384-(16384.499999999996-v/360|0))))d=o[h];else{var p=0,g=0;l?(p=0,g=v):(p=o[h],g=o[h+1]);var m=v>0,y=p>=0;s.MathUtils.signum(g)!==s.MathUtils.signum(v)&&Math.abs(g)<=90&&(Math.abs(p)>180&&(p+=360*s.MathUtils.signum(p)),y=m),d=v+p-p%360,y!==m&&(d+=360*s.MathUtils.signum(p)),o[h]=d}o[h+1]=v,u.rotation=c+d*r}}else t.apply(e,0,n,null,1,i,a.MixDirection.mixIn)}},{key:"queueEvents",value:function(t,e){for(var n=t.animationStart,r=t.animationEnd,i=r-n,a=t.trackLast%i,s=this.events,o=0,h=s.length;o<h;o++){var l=s[o];if(l.time<a)break;l.time>r||this.queue.event(t,l)}for((t.loop?0===i||a>t.trackTime%i:e>=r&&t.animationLast<r)&&this.queue.complete(t);o<h;o++){var u=s[o];u.time<n||this.queue.event(t,u)}}},{key:"clearTracks",value:function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,n=this.tracks.length;e<n;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}},{key:"clearTrack",value:function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(e){this.queue.end(e),this.clearNext(e);for(var n=e;;){var r=n.mixingFrom;if(!r)break;this.queue.end(r),n.mixingFrom=null,n.mixingTo=null,n=r}this.tracks[e.trackIndex]=null,this.queue.drain()}}}},{key:"setCurrent",value:function(t,e,n){var r=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,r&&(n&&this.queue.interrupt(r),e.mixingFrom=r,r.mixingTo=e,e.mixTime=0,r.mixingFrom&&r.mixDuration>0&&(e.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(e)}},{key:"setAnimation",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.data.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,r,n)}},{key:"setAnimationWith",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)throw new Error("animation cannot be null.");var r=!0,i=this.expandToIndex(t);i&&(-1===i.nextTrackLast?(this.tracks[t]=i.mixingFrom,this.queue.interrupt(i),this.queue.end(i),this.clearNext(i),i=i.mixingFrom,r=!1):this.clearNext(i));var a=this.trackEntry(t,e,n,i);return this.setCurrent(t,a,r),this.queue.drain(),a}},{key:"addAnimation",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=this.data.skeletonData.findAnimation(e);if(!i)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,i,n,r)}},{key:"addAnimationWith",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!e)throw new Error("animation cannot be null.");var i=this.expandToIndex(t);if(i)for(;i.next;)i=i.next;var a=this.trackEntry(t,e,n,i);return i?(i.next=a,a.previous=i,r<=0&&(r+=i.getTrackComplete()-a.mixDuration)):(this.setCurrent(t,a,!0),this.queue.drain()),a.delay=r,a}},{key:"setEmptyAnimation",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.setAnimationWith(e,t.emptyAnimation(),!1);return r.mixDuration=n,r.trackEnd=n,r}},{key:"addEmptyAnimation",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.addAnimationWith(e,t.emptyAnimation(),!1,r);return r<=0&&(i.delay+=i.mixDuration-n),i.mixDuration=n,i.trackEnd=n,i}},{key:"setEmptyAnimations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,r=this.tracks.length;n<r;n++){var i=this.tracks[n];i&&this.setEmptyAnimation(i.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}},{key:"expandToIndex",value:function(t){return t<this.tracks.length?this.tracks[t]:(s.Utils.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}},{key:"trackEntry",value:function(t,e,n,r){var i=this.trackEntryPool.obtain();return i.reset(),i.trackIndex=t,i.animation=e,i.loop=n,i.holdPrevious=!1,i.reverse=!1,i.shortestRotation=!1,i.eventThreshold=0,i.attachmentThreshold=0,i.drawOrderThreshold=0,i.animationStart=0,i.animationEnd=e.duration,i.animationLast=-1,i.nextAnimationLast=-1,i.delay=0,i.trackTime=0,i.trackLast=-1,i.nextTrackLast=-1,i.trackEnd=Number.MAX_VALUE,i.timeScale=1,i.alpha=1,i.mixTime=0,i.mixDuration=r?this.data.getMix(r.animation,e):0,i.interruptAlpha=1,i.totalAlpha=0,i.mixBlend=a.MixBlend.replace,i}},{key:"clearNext",value:function(t){for(var e=t.next;e;)this.queue.dispose(e),e=e.next;t.next=null}},{key:"_animationsChanged",value:function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=this.tracks,e=0,n=t.length;e<n;e++){var r=t[e];if(r){for(;r.mixingFrom;)r=r.mixingFrom;do{r.mixingTo&&r.mixBlend===a.MixBlend.add||this.computeHold(r),r=r.mixingTo}while(r)}}}},{key:"computeHold",value:function(t){var n=t.mixingTo,r=t.animation.timelines,i=t.animation.timelines.length,s=t.timelineMode;s.length=i;var o=t.timelineHoldMix;o.length=0;var h=this.propertyIDs;if(n&&n.holdPrevious)for(var l=0;l<i;l++)s[l]=h.addAll(r[l].getPropertyIds())?e.HOLD_FIRST:e.HOLD_SUBSEQUENT;else t:for(var u=0;u<i;u++){var c=r[u],f=c.getPropertyIds();if(h.addAll(f))if(!n||c instanceof a.AttachmentTimeline||c instanceof a.DrawOrderTimeline||c instanceof a.EventTimeline||!n.animation.hasTimeline(f))s[u]=e.FIRST;else{for(var d=n.mixingTo;d;d=d.mixingTo)if(!d.animation.hasTimeline(f)){if(t.mixDuration>0){s[u]=e.HOLD_MIX,o[u]=d;continue t}break}s[u]=e.HOLD_FIRST}else s[u]=e.SUBSEQUENT}}},{key:"getCurrent",value:function(t){return t>=this.tracks.length?null:this.tracks[t]}},{key:"addListener",value:function(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)}},{key:"removeListener",value:function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}},{key:"clearListeners",value:function(){this.listeners.length=0}},{key:"clearListenerNotifications",value:function(){this.queue.clear()}}],[{key:"emptyAnimation",value:function(){return t._emptyAnimation}}]),t}();e.AnimationState=o,o._emptyAnimation=new a.Animation("<empty>",[],0);var h=function(){function t(){r(this,t),this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.shortestRotation=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=a.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return i(t,[{key:"reset",value:function(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}},{key:"getAnimationTime",value:function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0===t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}},{key:"setAnimationLast",value:function(t){this.animationLast=t,this.nextAnimationLast=t}},{key:"isComplete",value:function(){return this.trackTime>=this.animationEnd-this.animationStart}},{key:"resetRotationDirections",value:function(){this.timelinesRotation.length=0}},{key:"getTrackComplete",value:function(){var t=this.animationEnd-this.animationStart;if(0!==t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}}]),t}();e.TrackEntry=h;var l,u=function(){function t(e){r(this,t),this.objects=[],this.drainDisabled=!1,this.animState=e}return i(t,[{key:"start",value:function(t){this.objects.push(l.start),this.objects.push(t),this.animState.animationsChanged=!0}},{key:"interrupt",value:function(t){this.objects.push(l.interrupt),this.objects.push(t)}},{key:"end",value:function(t){this.objects.push(l.end),this.objects.push(t),this.animState.animationsChanged=!0}},{key:"dispose",value:function(t){this.objects.push(l.dispose),this.objects.push(t)}},{key:"complete",value:function(t){this.objects.push(l.complete),this.objects.push(t)}},{key:"event",value:function(t,e){this.objects.push(l.event),this.objects.push(t),this.objects.push(e)}},{key:"drain",value:function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];switch(r){case l.start:i.listener&&i.listener.start&&i.listener.start(i);for(var a=0;a<e.length;a++){var s=e[a];s.start&&s.start(i)}break;case l.interrupt:i.listener&&i.listener.interrupt&&i.listener.interrupt(i);for(var o=0;o<e.length;o++){var h=e[o];h.interrupt&&h.interrupt(i)}break;case l.end:i.listener&&i.listener.end&&i.listener.end(i);for(var u=0;u<e.length;u++){var c=e[u];c.end&&c.end(i)}case l.dispose:i.listener&&i.listener.dispose&&i.listener.dispose(i);for(var f=0;f<e.length;f++){var d=e[f];d.dispose&&d.dispose(i)}this.animState.trackEntryPool.free(i);break;case l.complete:i.listener&&i.listener.complete&&i.listener.complete(i);for(var v=0;v<e.length;v++){var p=e[v];p.complete&&p.complete(i)}break;case l.event:var g=t[2+n++];i.listener&&i.listener.event&&i.listener.event(i,g);for(var m=0;m<e.length;m++){var y=e[m];y.event&&y.event(i,g)}}}this.clear(),this.drainDisabled=!1}}},{key:"clear",value:function(){this.objects.length=0}}]),t}();e.EventQueue=u,function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(l=e.EventType||(e.EventType={}));var c=function(){function t(){r(this,t)}return i(t,[{key:"start",value:function(t){}},{key:"interrupt",value:function(t){}},{key:"end",value:function(t){}},{key:"dispose",value:function(t){}},{key:"complete",value:function(t){}},{key:"event",value:function(t,e){}}]),t}();e.AnimationStateAdapter=c,e.SUBSEQUENT=0,e.FIRST=1,e.HOLD_SUBSEQUENT=2,e.HOLD_FIRST=3,e.HOLD_MIX=4,e.SETUP=1,e.CURRENT=2},1657:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationStateData=void 0;var a=function(){function t(e){if(r(this,t),this.animationToMixTime={},this.defaultMix=0,!e)throw new Error("skeletonData cannot be null.");this.skeletonData=e}return i(t,[{key:"setMix",value:function(t,e,n){var r=this.skeletonData.findAnimation(t);if(!r)throw new Error("Animation not found: "+t);var i=this.skeletonData.findAnimation(e);if(!i)throw new Error("Animation not found: "+e);this.setMixWith(r,i,n)}},{key:"setMixWith",value:function(t,e,n){if(!t)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");var r=t.name+"."+e.name;this.animationToMixTime[r]=n}},{key:"getMix",value:function(t,e){var n=t.name+"."+e.name,r=this.animationToMixTime[n];return void 0===r?this.defaultMix:r}}]),t}();e.AnimationStateData=a},2957:function(t,e,n){"use strict";var r=n(4704).default,i=n(6690).default,a=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Downloader=e.AssetManagerBase=void 0;var s=n(3416),o=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new h;i(this,t),this.pathPrefix="",this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=e,this.pathPrefix=n,this.downloader=r}return a(t,[{key:"start",value:function(t){return this.toLoad++,this.pathPrefix+t}},{key:"success",value:function(t,e,n){this.toLoad--,this.loaded++,this.assets[e]=n,t&&t(e,n)}},{key:"error",value:function(t,e,n){this.toLoad--,this.loaded++,this.errors[e]=n,t&&t(e,n)}},{key:"loadAll",value:function(){var t=this;return new Promise((function(e,n){requestAnimationFrame((function r(){t.isLoadingComplete()?t.hasErrors()?n(t.errors):e(t):requestAnimationFrame(r)}))}))}},{key:"setRawDataURI",value:function(t,e){this.downloader.rawDataUris[this.pathPrefix+t]=e}},{key:"loadBinary",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t=this.start(t),this.downloader.downloadBinary(t,(function(r){e.success(n,t,r)}),(function(n,i){e.error(r,t,"Couldn't load binary ".concat(t,": status ").concat(n,", ").concat(i))}))}},{key:"loadText",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t=this.start(t),this.downloader.downloadText(t,(function(r){e.success(n,t,r)}),(function(n,i){e.error(r,t,"Couldn't load text ".concat(t,": status ").concat(n,", ").concat(i))}))}},{key:"loadJson",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t=this.start(t),this.downloader.downloadJson(t,(function(r){e.success(n,t,r)}),(function(n,i){e.error(r,t,"Couldn't load JSON ".concat(t,": status ").concat(n,", ").concat(i))}))}},{key:"loadTexture",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t=this.start(t);var i=!("undefined"===typeof window||"undefined"===typeof navigator||!window.document),a=!i;if(a)fetch(t,{mode:"cors"}).then((function(n){return n.ok?n.blob():(e.error(r,t,"Couldn't load image: ".concat(t)),null)})).then((function(t){return t?createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null})).then((function(r){r&&e.success(n,t,e.textureLoader(r))}));else{var s=new Image;s.crossOrigin="anonymous",s.onload=function(){e.success(n,t,e.textureLoader(s))},s.onerror=function(){e.error(r,t,"Couldn't load image: ".concat(t))},this.downloader.rawDataUris[t]&&(t=this.downloader.rawDataUris[t]),s.src=t}}},{key:"loadTextureAtlas",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=arguments.length>3?arguments[3]:void 0,o=t.lastIndexOf("/"),h=o>=0?t.substring(0,o+1):"";t=this.start(t),this.downloader.downloadText(t,(function(o){try{!function(){var l,u=new s.TextureAtlas(o),c=u.pages.length,f=!1,d=r(u.pages);try{var v=function(){var r=l.value;e.loadTexture(a?a[r.name]:h+r.name,(function(i,a){f||(r.setTexture(a),0===--c&&e.success(n,t,u))}),(function(n,r){f||e.error(i,t,"Couldn't load texture atlas ".concat(t," page image: ").concat(n)),f=!0}))};for(d.s();!(l=d.n()).done;)v()}catch(p){d.e(p)}finally{d.f()}}()}catch(l){e.error(i,t,"Couldn't parse texture atlas ".concat(t,": ").concat(l.message))}}),(function(n,r){e.error(i,t,"Couldn't load texture atlas ".concat(t,": status ").concat(n,", ").concat(r))}))}},{key:"get",value:function(t){return this.assets[this.pathPrefix+t]}},{key:"require",value:function(t){t=this.pathPrefix+t;var e=this.assets[t];if(e)return e;var n=this.errors[t];throw Error("Asset not found: "+t+(n?"\n"+n:""))}},{key:"remove",value:function(t){t=this.pathPrefix+t;var e=this.assets[t];return e.dispose&&e.dispose(),delete this.assets[t],e}},{key:"removeAll",value:function(){for(var t in this.assets){var e=this.assets[t];e.dispose&&e.dispose()}this.assets={}}},{key:"isLoadingComplete",value:function(){return 0===this.toLoad}},{key:"getToLoad",value:function(){return this.toLoad}},{key:"getLoaded",value:function(){return this.loaded}},{key:"dispose",value:function(){this.removeAll()}},{key:"hasErrors",value:function(){return Object.keys(this.errors).length>0}},{key:"getErrors",value:function(){return this.errors}}]),t}();e.AssetManagerBase=o;var h=function(){function t(){i(this,t),this.callbacks={},this.rawDataUris={}}return a(t,[{key:"dataUriToString",value:function(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");var e=t.indexOf("base64,");return-1!==e?(e+="base64,".length,atob(t.substr(e))):t.substr(t.indexOf(",")+1)}},{key:"base64ToUint8Array",value:function(t){for(var e=window.atob(t),n=e.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=e.charCodeAt(i);return r}},{key:"dataUriToUint8Array",value:function(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");var e=t.indexOf("base64,");if(-1===e)throw new Error("Not a binary data URI.");return e+="base64,".length,this.base64ToUint8Array(t.substr(e))}},{key:"downloadText",value:function(t,e,n){var r=this;if(!this.start(t,e,n))if(this.rawDataUris[t])try{var i=this.rawDataUris[t];this.finish(t,200,this.dataUriToString(i))}catch(o){this.finish(t,400,JSON.stringify(o))}else{var a=new XMLHttpRequest;a.overrideMimeType("text/html"),a.open("GET",t,!0);var s=function(){r.finish(t,a.status,a.responseText)};a.onload=s,a.onerror=s,a.send()}}},{key:"downloadJson",value:function(t,e,n){this.downloadText(t,(function(t){e(JSON.parse(t))}),n)}},{key:"downloadBinary",value:function(t,e,n){var r=this;if(!this.start(t,e,n))if(this.rawDataUris[t])try{var i=this.rawDataUris[t];this.finish(t,200,this.dataUriToUint8Array(i))}catch(o){this.finish(t,400,JSON.stringify(o))}else{var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer";var s=function(){r.finish(t,a.status,a.response)};a.onload=function(){200===a.status||0===a.status?r.finish(t,200,new Uint8Array(a.response)):s()},a.onerror=s,a.send()}}},{key:"start",value:function(t,e,n){var r=this.callbacks[t];try{if(r)return!0;this.callbacks[t]=r=[]}finally{r.push(e,n)}}},{key:"finish",value:function(t,e,n){var r=this.callbacks[t];delete this.callbacks[t];for(var i=200===e||0===e?[n]:[e,n],a=i.length-1,s=r.length;a<s;a+=2)r[a].apply(null,i)}}]),t}();e.Downloader=h},3006:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.AtlasAttachmentLoader=void 0;var a=n(9374),s=n(2024),o=n(8582),h=n(397),l=n(630),u=n(7045),c=function(){function t(e){r(this,t),this.atlas=e}return i(t,[{key:"loadSequence",value:function(t,e,n){for(var r=n.regions,i=0,a=r.length;i<a;i++){var s=n.getPath(e,i),o=this.atlas.findRegion(s);if(null===o)throw new Error("Region not found in atlas: "+s+" (sequence: "+t+")");r[i]=o,r[i].renderObject=r[i]}}},{key:"newRegionAttachment",value:function(t,e,n,r){var i=new u.RegionAttachment(e,n);if(null!==r)this.loadSequence(e,n,r);else{var a=this.atlas.findRegion(n);if(!a)throw new Error("Region not found in atlas: "+n+" (region attachment: "+e+")");a.renderObject=a,i.region=a}return i}},{key:"newMeshAttachment",value:function(t,e,n,r){var i=new o.MeshAttachment(e,n);if(null!==r)this.loadSequence(e,n,r);else{var a=this.atlas.findRegion(n);if(!a)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+e+")");a.renderObject=a,i.region=a}return i}},{key:"newBoundingBoxAttachment",value:function(t,e){return new a.BoundingBoxAttachment(e)}},{key:"newPathAttachment",value:function(t,e){return new h.PathAttachment(e)}},{key:"newPointAttachment",value:function(t,e){return new l.PointAttachment(e)}},{key:"newClippingAttachment",value:function(t,e){return new s.ClippingAttachment(e)}}]),t}();e.AtlasAttachmentLoader=c},1362:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Bone=void 0;var a=n(196),s=n(4153),o=function(){function t(e,n,i){if(r(this,t),this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,!e)throw new Error("data cannot be null.");if(!n)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=n,this.parent=i,this.setToSetupPose()}return i(t,[{key:"isActive",value:function(){return this.active}},{key:"update",value:function(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}},{key:"updateWorldTransform",value:function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}},{key:"updateWorldTransformWith",value:function(t,e,n,r,i,o,h){this.ax=t,this.ay=e,this.arotation=n,this.ascaleX=r,this.ascaleY=i,this.ashearX=o,this.ashearY=h;var l=this.parent;if(!l){var u=this.skeleton,c=n+90+h,f=u.scaleX,d=u.scaleY;return this.a=s.MathUtils.cosDeg(n+o)*r*f,this.b=s.MathUtils.cosDeg(c)*i*f,this.c=s.MathUtils.sinDeg(n+o)*r*d,this.d=s.MathUtils.sinDeg(c)*i*d,this.worldX=t*f+u.x,void(this.worldY=e*d+u.y)}var v=l.a,p=l.b,g=l.c,m=l.d;switch(this.worldX=v*t+p*e+l.worldX,this.worldY=g*t+m*e+l.worldY,this.data.transformMode){case a.TransformMode.Normal:var y=n+90+h,x=s.MathUtils.cosDeg(n+o)*r,M=s.MathUtils.cosDeg(y)*i,w=s.MathUtils.sinDeg(n+o)*r,b=s.MathUtils.sinDeg(y)*i;return this.a=v*x+p*w,this.b=v*M+p*b,this.c=g*x+m*w,void(this.d=g*M+m*b);case a.TransformMode.OnlyTranslation:var k=n+90+h;this.a=s.MathUtils.cosDeg(n+o)*r,this.b=s.MathUtils.cosDeg(k)*i,this.c=s.MathUtils.sinDeg(n+o)*r,this.d=s.MathUtils.sinDeg(k)*i;break;case a.TransformMode.NoRotationOrReflection:var T=v*v+g*g,S=0;T>1e-4?(T=Math.abs(v*m-p*g)/T,v/=this.skeleton.scaleX,p=(g/=this.skeleton.scaleY)*T,m=v*T,S=Math.atan2(g,v)*s.MathUtils.radDeg):(v=0,g=0,S=90-Math.atan2(m,p)*s.MathUtils.radDeg);var A=n+o-S,C=n+h-S+90,_=s.MathUtils.cosDeg(A)*r,I=s.MathUtils.cosDeg(C)*i,E=s.MathUtils.sinDeg(A)*r,P=s.MathUtils.sinDeg(C)*i;this.a=v*_-p*E,this.b=v*I-p*P,this.c=g*_+m*E,this.d=g*I+m*P;break;case a.TransformMode.NoScale:case a.TransformMode.NoScaleOrReflection:var R=s.MathUtils.cosDeg(n),F=s.MathUtils.sinDeg(n),B=(v*R+p*F)/this.skeleton.scaleX,O=(g*R+m*F)/this.skeleton.scaleY,L=Math.sqrt(B*B+O*O);L>1e-5&&(L=1/L),B*=L,O*=L,L=Math.sqrt(B*B+O*O),this.data.transformMode===a.TransformMode.NoScale&&v*m-p*g<0!==(this.skeleton.scaleX<0!==this.skeleton.scaleY<0)&&(L=-L);var D=Math.PI/2+Math.atan2(O,B),Y=Math.cos(D)*L,X=Math.sin(D)*L,U=s.MathUtils.cosDeg(o)*r,V=s.MathUtils.cosDeg(90+h)*i,j=s.MathUtils.sinDeg(o)*r,N=s.MathUtils.sinDeg(90+h)*i;this.a=B*U+Y*j,this.b=B*V+Y*N,this.c=O*U+X*j,this.d=O*V+X*N}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}},{key:"setToSetupPose",value:function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}},{key:"getWorldRotationX",value:function(){return Math.atan2(this.c,this.a)*s.MathUtils.radDeg}},{key:"getWorldRotationY",value:function(){return Math.atan2(this.d,this.b)*s.MathUtils.radDeg}},{key:"getWorldScaleX",value:function(){return Math.sqrt(this.a*this.a+this.c*this.c)}},{key:"getWorldScaleY",value:function(){return Math.sqrt(this.b*this.b+this.d*this.d)}},{key:"updateAppliedTransform",value:function(){var t=this.parent;if(!t)return this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*s.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*s.MathUtils.radDeg);var e=t.a,n=t.b,r=t.c,i=t.d,a=1/(e*i-n*r),o=this.worldX-t.worldX,h=this.worldY-t.worldY;this.ax=o*i*a-h*n*a,this.ay=h*e*a-o*r*a;var l=a*i,u=a*e,c=a*n,f=a*r,d=l*this.a-c*this.c,v=l*this.b-c*this.d,p=u*this.c-f*this.a,g=u*this.d-f*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(d*d+p*p),this.ascaleX>1e-4){var m=d*g-v*p;this.ascaleY=m/this.ascaleX,this.ashearY=Math.atan2(d*v+p*g,m)*s.MathUtils.radDeg,this.arotation=Math.atan2(p,d)*s.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(v*v+g*g),this.ashearY=0,this.arotation=90-Math.atan2(g,v)*s.MathUtils.radDeg}},{key:"worldToLocal",value:function(t){var e=1/(this.a*this.d-this.b*this.c),n=t.x-this.worldX,r=t.y-this.worldY;return t.x=n*this.d*e-r*this.b*e,t.y=r*this.a*e-n*this.c*e,t}},{key:"localToWorld",value:function(t){var e=t.x,n=t.y;return t.x=e*this.a+n*this.b+this.worldX,t.y=e*this.c+n*this.d+this.worldY,t}},{key:"worldToLocalRotation",value:function(t){var e=s.MathUtils.sinDeg(t),n=s.MathUtils.cosDeg(t);return Math.atan2(this.a*e-this.c*n,this.d*n-this.b*e)*s.MathUtils.radDeg+this.rotation-this.shearX}},{key:"localToWorldRotation",value:function(t){t-=this.rotation-this.shearX;var e=s.MathUtils.sinDeg(t),n=s.MathUtils.cosDeg(t);return Math.atan2(n*this.c+e*this.d,n*this.a+e*this.b)*s.MathUtils.radDeg}},{key:"rotateWorld",value:function(t){var e=this.a,n=this.b,r=this.c,i=this.d,a=s.MathUtils.cosDeg(t),o=s.MathUtils.sinDeg(t);this.a=a*e-o*r,this.b=a*n-o*i,this.c=o*e+a*r,this.d=o*n+a*i}}]),t}();e.Bone=o},196:function(t,e,n){"use strict";var r=n(9728).default,i=n(6690).default;Object.defineProperty(e,"__esModule",{value:!0}),e.TransformMode=e.BoneData=void 0;var a,s=n(4153),o=r((function t(e,n,r){if(i(this,t),this.index=0,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=a.Normal,this.skinRequired=!1,this.color=new s.Color,e<0)throw new Error("index must be >= 0.");if(!n)throw new Error("name cannot be null.");this.index=e,this.name=n,this.parent=r}));e.BoneData=o,function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(a=e.TransformMode||(e.TransformMode={}))},5221:function(t,e,n){"use strict";var r=n(9728).default,i=n(6690).default;Object.defineProperty(e,"__esModule",{value:!0}),e.ConstraintData=void 0;var a=r((function t(e,n,r){i(this,t),this.name=e,this.order=n,this.skinRequired=r}));e.ConstraintData=a},300:function(t,e,n){"use strict";var r=n(9728).default,i=n(6690).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Event=void 0;var a=r((function t(e,n){if(i(this,t),this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!n)throw new Error("data cannot be null.");this.time=e,this.data=n}));e.Event=a},4013:function(t,e,n){"use strict";var r=n(9728).default,i=n(6690).default;Object.defineProperty(e,"__esModule",{value:!0}),e.EventData=void 0;var a=r((function t(e){i(this,t),this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=e}));e.EventData=a},7111:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.IkConstraint=void 0;var a=n(196),s=n(4153),o=function(){function t(e,n){if(r(this,t),this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!e)throw new Error("data cannot be null.");if(!n)throw new Error("skeleton cannot be null.");this.data=e,this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch,this.bones=new Array;for(var i=0;i<e.bones.length;i++){var a=n.findBone(e.bones[i].name);if(!a)throw new Error("Couldn't find bone ".concat(e.bones[i].name));this.bones.push(a)}var s=n.findBone(e.target.name);if(!s)throw new Error("Couldn't find bone ".concat(e.target.name));this.target=s}return i(t,[{key:"isActive",value:function(){return this.active}},{key:"update",value:function(){if(0!==this.mix){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}}},{key:"apply1",value:function(t,e,n,r,i,o,h){var l=t.parent;if(!l)throw new Error("IK bone must have parent.");var u=l.a,c=l.b,f=l.c,d=l.d,v=-t.ashearX-t.arotation,p=0,g=0;switch(t.data.transformMode){case a.TransformMode.OnlyTranslation:p=e-t.worldX,g=n-t.worldY;break;case a.TransformMode.NoRotationOrReflection:var m=Math.abs(u*d-c*f)/(u*u+f*f),y=u/t.skeleton.scaleX,x=f/t.skeleton.scaleY;c=-x*m*t.skeleton.scaleX,d=y*m*t.skeleton.scaleY,v+=Math.atan2(x,y)*s.MathUtils.radDeg;default:var M=e-l.worldX,w=n-l.worldY,b=u*d-c*f;p=(M*d-w*c)/b-t.ax,g=(w*u-M*f)/b-t.ay}v+=Math.atan2(g,p)*s.MathUtils.radDeg,t.ascaleX<0&&(v+=180),v>180?v-=360:v<-180&&(v+=360);var k=t.ascaleX,T=t.ascaleY;if(r||i){switch(t.data.transformMode){case a.TransformMode.NoScale:case a.TransformMode.NoScaleOrReflection:p=e-t.worldX,g=n-t.worldY}var S=t.data.length*k,A=Math.sqrt(p*p+g*g);if(r&&A<S||i&&A>S&&S>1e-4){var C=(A/S-1)*h+1;k*=C,o&&(T*=C)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+v*h,k,T,t.ashearX,t.ashearY)}},{key:"apply2",value:function(t,e,n,r,i,a,o,h,l){var u=t.ax,c=t.ay,f=t.ascaleX,d=t.ascaleY,v=f,p=d,g=e.ascaleX,m=0,y=0,x=0;f<0?(f=-f,m=180,x=-1):(m=0,x=1),d<0&&(d=-d,x=-x),g<0?(g=-g,y=180):y=0;var M=e.ax,w=0,b=0,k=0,T=t.a,S=t.b,A=t.c,C=t.d,_=Math.abs(f-d)<=1e-4;!_||a?(w=0,b=T*M+t.worldX,k=A*M+t.worldY):(b=T*M+S*(w=e.ay)+t.worldX,k=A*M+C*w+t.worldY);var I=t.parent;if(!I)throw new Error("IK parent must itself have a parent.");T=I.a,S=I.b,A=I.c;var E,P,R=1/(T*(C=I.d)-S*A),F=b-I.worldX,B=k-I.worldY,O=(F*C-B*S)*R-u,L=(B*T-F*A)*R-c,D=Math.sqrt(O*O+L*L),Y=e.data.length*g;if(D<1e-4)return this.apply1(t,n,r,!1,a,!1,l),void e.updateWorldTransformWith(M,w,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);var X=((F=n-I.worldX)*C-(B=r-I.worldY)*S)*R-u,U=(B*T-F*A)*R-c,V=X*X+U*U;if(0!==h){h*=f*(g+1)*.5;var j=Math.sqrt(V),N=j-D-Y*f+h;if(N>0){var z=Math.min(1,N/(2*h))-1;V=(X-=(z=(N-h*(1-z*z))/j)*X)*X+(U-=z*U)*U}}t:if(_){var W=(V-D*D-(Y*=f)*Y)/(2*D*Y);W<-1?(W=-1,P=Math.PI*i):W>1?(W=1,P=0,a&&(v*=T=(Math.sqrt(V)/(D+Y)-1)*l+1,o&&(p*=T))):P=Math.acos(W)*i,T=D+Y*W,S=Y*Math.sin(P),E=Math.atan2(U*T-X*S,X*T+U*S)}else{var G=(T=f*Y)*T,H=(S=d*Y)*S,q=Math.atan2(U,X),J=-2*H*D,K=H-G;if((C=J*J-4*K*(A=H*D*D+G*V-G*H))>=0){var Q=Math.sqrt(C);J<0&&(Q=-Q);var Z=(Q=.5*-(J+Q))/K,$=A/Q,tt=Math.abs(Z)<Math.abs($)?Z:$;if(tt*tt<=V){B=Math.sqrt(V-tt*tt)*i,E=q-Math.atan2(B,tt),P=Math.atan2(B/d,(tt-D)/f);break t}}var et=s.MathUtils.PI,nt=D-T,rt=nt*nt,it=0,at=0,st=D+T,ot=st*st,ht=0;(A=-T*D/(G-H))>=-1&&A<=1&&(A=Math.acos(A),(C=(F=T*Math.cos(A)+D)*F+(B=S*Math.sin(A))*B)<rt&&(et=A,rt=C,nt=F,it=B),C>ot&&(at=A,ot=C,st=F,ht=B)),V<=.5*(rt+ot)?(E=q-Math.atan2(it*i,nt),P=et*i):(E=q-Math.atan2(ht*i,st),P=at*i)}var lt=Math.atan2(w,M)*x,ut=t.arotation;(E=(E-lt)*s.MathUtils.radDeg+m-ut)>180?E-=360:E<-180&&(E+=360),t.updateWorldTransformWith(u,c,ut+E*l,v,p,0,0),ut=e.arotation,(P=((P+lt)*s.MathUtils.radDeg-e.ashearX)*x+y-ut)>180?P-=360:P<-180&&(P+=360),e.updateWorldTransformWith(M,w,ut+P*l,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}}]),t}();e.IkConstraint=o},8155:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default,a=n(1655).default,s=n(6389).default;Object.defineProperty(e,"__esModule",{value:!0}),e.IkConstraintData=void 0;var o=function(t){a(n,t);var e=s(n);function n(t){var i;return r(this,n),(i=e.call(this,t,0,!1)).bones=new Array,i._target=null,i.bendDirection=1,i.compress=!1,i.stretch=!1,i.uniform=!1,i.mix=1,i.softness=0,i}return i(n,[{key:"target",get:function(){if(this._target)return this._target;throw new Error("BoneData not set.")},set:function(t){this._target=t}}]),n}(n(5221).ConstraintData);e.IkConstraintData=o},3093:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.PathConstraint=void 0;var a=n(397),s=n(9841),o=n(4153),h=function(){function t(e,n){if(r(this,t),this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!e)throw new Error("data cannot be null.");if(!n)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(var i=0,a=e.bones.length;i<a;i++){var s=n.findBone(e.bones[i].name);if(!s)throw new Error("Couldn't find bone ".concat(e.bones[i].name,"."));this.bones.push(s)}var o=n.findSlot(e.target.name);if(!o)throw new Error("Couldn't find target bone ".concat(e.target.name));this.target=o,this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY}return i(t,[{key:"isActive",value:function(){return this.active}},{key:"update",value:function(){var e=this.target.getAttachment();if(e instanceof a.PathAttachment){var n=this.mixRotate,r=this.mixX,i=this.mixY;if(0!==n||0!==r||0!==i){var h=this.data,l=h.rotateMode===s.RotateMode.Tangent,u=h.rotateMode===s.RotateMode.ChainScale,c=this.bones,f=c.length,d=l?f:f+1,v=o.Utils.setArraySize(this.spaces,d),p=u?this.lengths=o.Utils.setArraySize(this.lengths,f):[],g=this.spacing;switch(h.spacingMode){case s.SpacingMode.Percent:if(u)for(var m=0,y=d-1;m<y;m++){var x=c[m],M=x.data.length;if(M<t.epsilon)p[m]=0;else{var w=M*x.a,b=M*x.c;p[m]=Math.sqrt(w*w+b*b)}}o.Utils.arrayFill(v,1,d,g);break;case s.SpacingMode.Proportional:for(var k=0,T=0,S=d-1;T<S;){var A=c[T],C=A.data.length;if(C<t.epsilon)u&&(p[T]=0),v[++T]=g;else{var _=C*A.a,I=C*A.c,E=Math.sqrt(_*_+I*I);u&&(p[T]=E),v[++T]=E,k+=E}}if(k>0){k=d/k*g;for(var P=1;P<d;P++)v[P]*=k}break;default:for(var R=h.spacingMode===s.SpacingMode.Length,F=0,B=d-1;F<B;){var O=c[F],L=O.data.length;if(L<t.epsilon)u&&(p[F]=0),v[++F]=g;else{var D=L*O.a,Y=L*O.c,X=Math.sqrt(D*D+Y*Y);u&&(p[F]=X),v[++F]=(R?L+g:g)*X/L}}}var U=this.computeWorldPositions(e,d,l),V=U[0],j=U[1],N=h.offsetRotation,z=!1;if(0===N)z=h.rotateMode===s.RotateMode.Chain;else{z=!1;var W=this.target.bone;N*=W.a*W.d-W.b*W.c>0?o.MathUtils.degRad:-o.MathUtils.degRad}for(var G=0,H=3;G<f;G++,H+=3){var q=c[G];q.worldX+=(V-q.worldX)*r,q.worldY+=(j-q.worldY)*i;var J=U[H],K=U[H+1],Q=J-V,Z=K-j;if(u){var $=p[G];if(0!==$){var tt=(Math.sqrt(Q*Q+Z*Z)/$-1)*n+1;q.a*=tt,q.c*=tt}}if(V=J,j=K,n>0){var et=q.a,nt=q.b,rt=q.c,it=q.d,at=0,st=0,ot=0;if(at=l?U[H-1]:0===v[G+1]?U[H+2]:Math.atan2(Z,Q),at-=Math.atan2(rt,et),z){st=Math.cos(at),ot=Math.sin(at);var ht=q.data.length;V+=(ht*(st*et-ot*rt)-Q)*n,j+=(ht*(ot*et+st*rt)-Z)*n}else at+=N;at>o.MathUtils.PI?at-=o.MathUtils.PI2:at<-o.MathUtils.PI&&(at+=o.MathUtils.PI2),at*=n,st=Math.cos(at),ot=Math.sin(at),q.a=st*et-ot*rt,q.b=st*nt-ot*it,q.c=ot*et+st*rt,q.d=ot*nt+st*it}q.updateAppliedTransform()}}}}},{key:"computeWorldPositions",value:function(e,n,r){var i=this.target,a=this.position,h=this.spaces,l=o.Utils.setArraySize(this.positions,3*n+2),u=this.world,c=e.closed,f=e.worldVerticesLength,d=f/6,v=t.NONE;if(!e.constantSpeed){var p,g=e.lengths,m=g[d-=c?1:2];switch(this.data.positionMode===s.PositionMode.Percent&&(a*=m),this.data.spacingMode){case s.SpacingMode.Percent:p=m;break;case s.SpacingMode.Proportional:p=m/n;break;default:p=1}u=o.Utils.setArraySize(this.world,8);for(var y=0,x=0,M=0;y<n;y++,x+=3){var w=h[y]*p,b=a+=w;if(c)(b%=m)<0&&(b+=m),M=0;else{if(b<0){v!==t.BEFORE&&(v=t.BEFORE,e.computeWorldVertices(i,2,4,u,0,2)),this.addBeforePosition(b,u,0,l,x);continue}if(b>m){v!==t.AFTER&&(v=t.AFTER,e.computeWorldVertices(i,f-6,4,u,0,2)),this.addAfterPosition(b-m,u,0,l,x);continue}}for(;;M++){var k=g[M];if(!(b>k)){if(0===M)b/=k;else{var T=g[M-1];b=(b-T)/(k-T)}break}}M!==v&&(v=M,c&&M===d?(e.computeWorldVertices(i,f-4,4,u,0,2),e.computeWorldVertices(i,0,4,u,4,2)):e.computeWorldVertices(i,6*M+2,8,u,0,2)),this.addCurvePosition(b,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],l,x,r||y>0&&0===w)}return l}c?(f+=2,u=o.Utils.setArraySize(this.world,f),e.computeWorldVertices(i,2,f-4,u,0,2),e.computeWorldVertices(i,0,2,u,f-4,2),u[f-2]=u[0],u[f-1]=u[1]):(d--,f-=4,u=o.Utils.setArraySize(this.world,f),e.computeWorldVertices(i,2,f,u,0,2));for(var S,A=o.Utils.setArraySize(this.curves,d),C=0,_=u[0],I=u[1],E=0,P=0,R=0,F=0,B=0,O=0,L=0,D=0,Y=0,X=0,U=0,V=0,j=0,N=0,z=0,W=2;z<d;z++,W+=6)E=u[W],P=u[W+1],R=u[W+2],F=u[W+3],U=2*(L=.1875*(_-2*E+R))+(Y=.09375*(3*(E-R)-_+(B=u[W+4]))),V=2*(D=.1875*(I-2*P+F))+(X=.09375*(3*(P-F)-I+(O=u[W+5]))),j=.75*(E-_)+L+.16666667*Y,N=.75*(P-I)+D+.16666667*X,C+=Math.sqrt(j*j+N*N),j+=U,N+=V,U+=Y,V+=X,C+=Math.sqrt(j*j+N*N),j+=U,N+=V,C+=Math.sqrt(j*j+N*N),j+=U+Y,N+=V+X,C+=Math.sqrt(j*j+N*N),A[z]=C,_=B,I=O;switch(this.data.positionMode===s.PositionMode.Percent&&(a*=C),this.data.spacingMode){case s.SpacingMode.Percent:S=C;break;case s.SpacingMode.Proportional:S=C/n;break;default:S=1}for(var G=this.segments,H=0,q=0,J=0,K=0,Q=0;q<n;q++,J+=3){var Z=h[q]*S,$=a+=Z;if(c)($%=C)<0&&($+=C),K=0;else{if($<0){this.addBeforePosition($,u,0,l,J);continue}if($>C){this.addAfterPosition($-C,u,f-4,l,J);continue}}for(;;K++){var tt=A[K];if(!($>tt)){if(0===K)$/=tt;else{var et=A[K-1];$=($-et)/(tt-et)}break}}if(K!==v){v=K;var nt=6*K;for(_=u[nt],I=u[nt+1],E=u[nt+2],P=u[nt+3],R=u[nt+4],F=u[nt+5],U=2*(L=.03*(_-2*E+R))+(Y=.006*(3*(E-R)-_+(B=u[nt+6]))),V=2*(D=.03*(I-2*P+F))+(X=.006*(3*(P-F)-I+(O=u[nt+7]))),j=.3*(E-_)+L+.16666667*Y,N=.3*(P-I)+D+.16666667*X,H=Math.sqrt(j*j+N*N),G[0]=H,nt=1;nt<8;nt++)j+=U,N+=V,U+=Y,V+=X,H+=Math.sqrt(j*j+N*N),G[nt]=H;j+=U,N+=V,H+=Math.sqrt(j*j+N*N),G[8]=H,j+=U+Y,N+=V+X,H+=Math.sqrt(j*j+N*N),G[9]=H,Q=0}for($*=H;;Q++){var rt=G[Q];if(!($>rt)){if(0===Q)$/=rt;else{var it=G[Q-1];$=Q+($-it)/(rt-it)}break}}this.addCurvePosition(.1*$,_,I,E,P,R,F,B,O,l,J,r||q>0&&0===Z)}return l}},{key:"addBeforePosition",value:function(t,e,n,r,i){var a=e[n],s=e[n+1],o=e[n+2]-a,h=e[n+3]-s,l=Math.atan2(h,o);r[i]=a+t*Math.cos(l),r[i+1]=s+t*Math.sin(l),r[i+2]=l}},{key:"addAfterPosition",value:function(t,e,n,r,i){var a=e[n+2],s=e[n+3],o=a-e[n],h=s-e[n+1],l=Math.atan2(h,o);r[i]=a+t*Math.cos(l),r[i+1]=s+t*Math.sin(l),r[i+2]=l}},{key:"addCurvePosition",value:function(t,e,n,r,i,a,s,o,h,l,u,c){if(0===t||isNaN(t))return l[u]=e,l[u+1]=n,void(l[u+2]=Math.atan2(i-n,r-e));var f=t*t,d=f*t,v=1-t,p=v*v,g=p*v,m=v*t,y=3*m,x=v*y,M=y*t,w=e*g+r*x+a*M+o*d,b=n*g+i*x+s*M+h*d;l[u]=w,l[u+1]=b,c&&(l[u+2]=t<.001?Math.atan2(i-n,r-e):Math.atan2(b-(n*p+i*m*2+s*f),w-(e*p+r*m*2+a*f)))}}]),t}();e.PathConstraint=h,h.NONE=-1,h.BEFORE=-2,h.AFTER=-3,h.epsilon=1e-5},9841:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default,a=n(1655).default,s=n(6389).default;Object.defineProperty(e,"__esModule",{value:!0}),e.RotateMode=e.SpacingMode=e.PositionMode=e.PathConstraintData=void 0;var o,h,l,u=function(t){a(n,t);var e=s(n);function n(t){var i;return r(this,n),(i=e.call(this,t,0,!1)).bones=new Array,i._target=null,i.positionMode=o.Fixed,i.spacingMode=h.Fixed,i.rotateMode=l.Chain,i.offsetRotation=0,i.position=0,i.spacing=0,i.mixRotate=0,i.mixX=0,i.mixY=0,i}return i(n,[{key:"target",get:function(){if(this._target)return this._target;throw new Error("SlotData not set.")},set:function(t){this._target=t}}]),n}(n(5221).ConstraintData);e.PathConstraintData=u,function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(o=e.PositionMode||(e.PositionMode={})),function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional"}(h=e.SpacingMode||(e.SpacingMode={})),function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(l=e.RotateMode||(e.RotateMode={}))},9965:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Skeleton=void 0;var a=n(2955),s=n(8582),o=n(397),h=n(7045),l=n(1362),u=n(7111),c=n(3093),f=n(3356),d=n(4672),v=n(4153),p=function(){function t(e){if(r(this,t),this._updateCache=new Array,this.skin=null,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var n=0;n<e.bones.length;n++){var i=e.bones[n],a=void 0;if(i.parent){var s=this.bones[i.parent.index];a=new l.Bone(i,this,s),s.children.push(a)}else a=new l.Bone(i,this,null);this.bones.push(a)}this.slots=new Array,this.drawOrder=new Array;for(var o=0;o<e.slots.length;o++){var h=e.slots[o],p=this.bones[h.boneData.index],g=new f.Slot(h,p);this.slots.push(g),this.drawOrder.push(g)}this.ikConstraints=new Array;for(var m=0;m<e.ikConstraints.length;m++){var y=e.ikConstraints[m];this.ikConstraints.push(new u.IkConstraint(y,this))}this.transformConstraints=new Array;for(var x=0;x<e.transformConstraints.length;x++){var M=e.transformConstraints[x];this.transformConstraints.push(new d.TransformConstraint(M,this))}this.pathConstraints=new Array;for(var w=0;w<e.pathConstraints.length;w++){var b=e.pathConstraints[w];this.pathConstraints.push(new c.PathConstraint(b,this))}this.color=new v.Color(1,1,1,1),this.updateCache()}return i(t,[{key:"updateCache",value:function(){var t=this._updateCache;t.length=0;for(var e=this.bones,n=0,r=e.length;n<r;n++){var i=e[n];i.sorted=i.data.skinRequired,i.active=!i.sorted}if(this.skin)for(var a=this.skin.bones,s=0,o=this.skin.bones.length;s<o;s++){var h=this.bones[a[s].index];do{h.sorted=!1,h.active=!0,h=h.parent}while(h)}var l=this.ikConstraints,u=this.transformConstraints,c=this.pathConstraints,f=l.length,d=u.length,v=c.length,p=f+d+v;t:for(var g=0;g<p;g++){for(var m=0;m<f;m++){var y=l[m];if(y.data.order===g){this.sortIkConstraint(y);continue t}}for(var x=0;x<d;x++){var M=u[x];if(M.data.order===g){this.sortTransformConstraint(M);continue t}}for(var w=0;w<v;w++){var b=c[w];if(b.data.order===g){this.sortPathConstraint(b);continue t}}}for(var k=0,T=e.length;k<T;k++)this.sortBone(e[k])}},{key:"sortIkConstraint",value:function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&v.Utils.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target;this.sortBone(e);var n=t.bones,r=n[0];if(this.sortBone(r),1===n.length)this._updateCache.push(t),this.sortReset(r.children);else{var i=n[n.length-1];this.sortBone(i),this._updateCache.push(t),this.sortReset(r.children),i.sorted=!0}}}},{key:"sortPathConstraint",value:function(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&v.Utils.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target,n=e.data.index,r=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,n,r),this.data.defaultSkin&&this.data.defaultSkin!==this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,r);for(var i=0,a=this.data.skins.length;i<a;i++)this.sortPathConstraintAttachment(this.data.skins[i],n,r);var s=e.getAttachment();s instanceof o.PathAttachment&&this.sortPathConstraintAttachmentWith(s,r);for(var h=t.bones,l=h.length,u=0;u<l;u++)this.sortBone(h[u]);this._updateCache.push(t);for(var c=0;c<l;c++)this.sortReset(h[c].children);for(var f=0;f<l;f++)h[f].sorted=!0}}},{key:"sortTransformConstraint",value:function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&v.Utils.contains(this.skin.constraints,t.data,!0)),t.active){this.sortBone(t.target);var e=t.bones,n=e.length;if(t.data.local)for(var r=0;r<n;r++){var i=e[r];this.sortBone(i.parent),this.sortBone(i)}else for(var a=0;a<n;a++)this.sortBone(e[a]);this._updateCache.push(t);for(var s=0;s<n;s++)this.sortReset(e[s].children);for(var o=0;o<n;o++)e[o].sorted=!0}}},{key:"sortPathConstraintAttachment",value:function(t,e,n){var r=t.attachments[e];if(r)for(var i in r)this.sortPathConstraintAttachmentWith(r[i],n)}},{key:"sortPathConstraintAttachmentWith",value:function(t,e){if(t instanceof o.PathAttachment){var n=t.bones;if(n)for(var r=this.bones,i=0,a=n.length;i<a;){var s=n[i++];for(s+=i;i<s;)this.sortBone(r[n[i++]])}else this.sortBone(e)}}},{key:"sortBone",value:function(t){if(t&&!t.sorted){var e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}}},{key:"sortReset",value:function(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];r.active&&(r.sorted&&this.sortReset(r.children),r.sorted=!1)}}},{key:"updateWorldTransform",value:function(){for(var t=this.bones,e=0,n=t.length;e<n;e++){var r=t[e];r.ax=r.x,r.ay=r.y,r.arotation=r.rotation,r.ascaleX=r.scaleX,r.ascaleY=r.scaleY,r.ashearX=r.shearX,r.ashearY=r.shearY}for(var i=this._updateCache,a=0,s=i.length;a<s;a++)i[a].update()}},{key:"updateWorldTransformWith",value:function(t){var e=this.getRootBone();if(!e)throw new Error("Root bone must not be null.");var n=t.a,r=t.b,i=t.c,a=t.d;e.worldX=n*this.x+r*this.y+t.worldX,e.worldY=i*this.x+a*this.y+t.worldY;var s=e.rotation+90+e.shearY,o=v.MathUtils.cosDeg(e.rotation+e.shearX)*e.scaleX,h=v.MathUtils.cosDeg(s)*e.scaleY,l=v.MathUtils.sinDeg(e.rotation+e.shearX)*e.scaleX,u=v.MathUtils.sinDeg(s)*e.scaleY;e.a=(n*o+r*l)*this.scaleX,e.b=(n*h+r*u)*this.scaleX,e.c=(i*o+a*l)*this.scaleY,e.d=(i*h+a*u)*this.scaleY;for(var c=this._updateCache,f=0,d=c.length;f<d;f++){var p=c[f];p!==e&&p.update()}}},{key:"setToSetupPose",value:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}},{key:"setBonesToSetupPose",value:function(){for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].setToSetupPose();for(var r=this.ikConstraints,i=0,a=r.length;i<a;i++){var s=r[i];s.mix=s.data.mix,s.softness=s.data.softness,s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch}for(var o=this.transformConstraints,h=0,l=o.length;h<l;h++){var u=o[h],c=u.data;u.mixRotate=c.mixRotate,u.mixX=c.mixX,u.mixY=c.mixY,u.mixScaleX=c.mixScaleX,u.mixScaleY=c.mixScaleY,u.mixShearY=c.mixShearY}for(var f=this.pathConstraints,d=0,v=f.length;d<v;d++){var p=f[d],g=p.data;p.position=g.position,p.spacing=g.spacing,p.mixRotate=g.mixRotate,p.mixX=g.mixX,p.mixY=g.mixY}}},{key:"setSlotsToSetupPose",value:function(){var t=this.slots;v.Utils.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,n=t.length;e<n;e++)t[e].setToSetupPose()}},{key:"getRootBone",value:function(){return 0===this.bones.length?null:this.bones[0]}},{key:"findBone",value:function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name===t)return i}return null}},{key:"findSlot",value:function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name===t)return i}return null}},{key:"setSkinByName",value:function(t){var e=this.data.findSkin(t);if(!e)throw new Error("Skin not found: "+t);this.setSkin(e)}},{key:"setSkin",value:function(t){if(t!==this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,n=0,r=e.length;n<r;n++){var i=e[n],a=i.data.attachmentName;if(a){var s=t.getAttachment(n,a);s&&i.setAttachment(s)}}this.skin=t,this.updateCache()}}},{key:"getAttachmentByName",value:function(t,e){var n=this.data.findSlot(t);if(!n)throw new Error("Can't find slot with name ".concat(t));return this.getAttachment(n.index,e)}},{key:"getAttachment",value:function(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){var n=this.skin.getAttachment(t,e);if(n)return n}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}},{key:"setAttachment",value:function(t,e){if(!t)throw new Error("slotName cannot be null.");for(var n=this.slots,r=0,i=n.length;r<i;r++){var a=n[r];if(a.data.name===t){var s=null;if(e&&!(s=this.getAttachment(r,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void a.setAttachment(s)}}throw new Error("Slot not found: "+t)}},{key:"findIkConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name===t)return i}return null}},{key:"findTransformConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name===t)return i}return null}},{key:"findPathConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name===t)return i}return null}},{key:"getBoundsRect",value:function(){var t=new a.Vector2,e=new a.Vector2;return this.getBounds(t,e),{x:t.x,y:t.y,width:e.x,height:e.y}}},{key:"getBounds",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Array(2);if(!t)throw new Error("offset cannot be null.");if(!e)throw new Error("size cannot be null.");for(var r=this.drawOrder,i=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY,u=0,c=r.length;u<c;u++){var f=r[u];if(f.bone.active){var d=0,p=null,g=f.getAttachment();if(g instanceof h.RegionAttachment)d=8,p=v.Utils.setArraySize(n,d,0),g.computeWorldVertices(f,p,0,2);else if(g instanceof s.MeshAttachment){var m=g;d=m.worldVerticesLength,p=v.Utils.setArraySize(n,d,0),m.computeWorldVertices(f,0,d,p,0,2)}if(p)for(var y=0,x=p.length;y<x;y+=2){var M=p[y],w=p[y+1];i=Math.min(i,M),a=Math.min(a,w),o=Math.max(o,M),l=Math.max(l,w)}}}t.set(i,a),e.set(o-i,l-a)}}]),t}();e.Skeleton=p},2411:function(t,e,n){"use strict";var r=n(9728).default,i=n(6690).default;Object.defineProperty(e,"__esModule",{value:!0}),e.BinaryInput=e.SkeletonBinary=void 0;var a,s=n(9889),o=n(6436),h=n(196),l=n(300),u=n(4013),c=n(8155),f=n(9841),d=n(2032),v=n(3099),p=n(3605),g=n(7841),m=n(4153),y=r((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,t),this.bones=e,this.vertices=n}));function x(t,e,n){for(var r=t.readFloat(),i=t.readFloat()*n,a=0,s=0,o=e.getFrameCount()-1;e.setFrame(a,r,i),a!==o;a++){var h=t.readFloat(),l=t.readFloat()*n;switch(t.readByte()){case b:e.setStepped(a);break;case k:w(t,e,s++,a,0,r,h,i,l,n)}r=h,i=l}return e}function M(t,e,n){for(var r=t.readFloat(),i=t.readFloat()*n,a=t.readFloat()*n,s=0,o=0,h=e.getFrameCount()-1;e.setFrame(s,r,i,a),s!==h;s++){var l=t.readFloat(),u=t.readFloat()*n,c=t.readFloat()*n;switch(t.readByte()){case b:e.setStepped(s);break;case k:w(t,e,o++,s,0,r,l,i,u,n),w(t,e,o++,s,1,r,l,a,c,n)}r=l,i=u,a=c}return e}function w(t,e,n,r,i,a,s,o,h,l){e.setBezier(n,r,i,a,o,t.readFloat(),t.readFloat()*l,t.readFloat(),t.readFloat()*l,s,h)}!function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping"}(a||(a={}));var b=1,k=2,T=function(){function t(e){i(this,t),this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}return r(t,[{key:"readSkeletonData",value:function(t){var e=this.scale,n=new d.SkeletonData;n.name="";var r=new S(t),i=r.readInt32(),a=r.readInt32();n.hash=0===a&&0===i?null:a.toString(16)+i.toString(16),n.version=r.readString(),n.x=r.readFloat(),n.y=r.readFloat(),n.width=r.readFloat(),n.height=r.readFloat();var s=r.readBoolean();s&&(n.fps=r.readFloat(),n.imagesPath=r.readString(),n.audioPath=r.readString());var o=0;o=r.readInt(!0);for(var l=0;l<o;l++){var v=r.readString();if(!v)throw new Error("String in string table must not be null.");r.strings.push(v)}o=r.readInt(!0);for(var y=0;y<o;y++){var x=r.readString();if(!x)throw new Error("Bone name must not be null.");var M=0===y?null:n.bones[r.readInt(!0)],w=new h.BoneData(y,x,M);w.rotation=r.readFloat(),w.x=r.readFloat()*e,w.y=r.readFloat()*e,w.scaleX=r.readFloat(),w.scaleY=r.readFloat(),w.shearX=r.readFloat(),w.shearY=r.readFloat(),w.length=r.readFloat()*e,w.transformMode=r.readInt(!0),w.skinRequired=r.readBoolean(),s&&m.Color.rgba8888ToColor(w.color,r.readInt32()),n.bones.push(w)}o=r.readInt(!0);for(var b=0;b<o;b++){var k=r.readString();if(!k)throw new Error("Slot name must not be null.");var T=n.bones[r.readInt(!0)],A=new p.SlotData(b,k,T);m.Color.rgba8888ToColor(A.color,r.readInt32());var C=r.readInt32();-1!==C&&m.Color.rgb888ToColor(A.darkColor=new m.Color,C),A.attachmentName=r.readStringRef(),A.blendMode=r.readInt(!0),n.slots.push(A)}o=r.readInt(!0);for(var _,I=0;I<o;I++){var E=r.readString();if(!E)throw new Error("IK constraint data name must not be null.");var P=new c.IkConstraintData(E);P.order=r.readInt(!0),P.skinRequired=r.readBoolean(),_=r.readInt(!0);for(var R=0;R<_;R++)P.bones.push(n.bones[r.readInt(!0)]);P.target=n.bones[r.readInt(!0)],P.mix=r.readFloat(),P.softness=r.readFloat()*e,P.bendDirection=r.readByte(),P.compress=r.readBoolean(),P.stretch=r.readBoolean(),P.uniform=r.readBoolean(),n.ikConstraints.push(P)}o=r.readInt(!0);for(var F,B=0;B<o;B++){var O=r.readString();if(!O)throw new Error("Transform constraint data name must not be null.");var L=new g.TransformConstraintData(O);L.order=r.readInt(!0),L.skinRequired=r.readBoolean(),F=r.readInt(!0);for(var D=0;D<F;D++)L.bones.push(n.bones[r.readInt(!0)]);L.target=n.bones[r.readInt(!0)],L.local=r.readBoolean(),L.relative=r.readBoolean(),L.offsetRotation=r.readFloat(),L.offsetX=r.readFloat()*e,L.offsetY=r.readFloat()*e,L.offsetScaleX=r.readFloat(),L.offsetScaleY=r.readFloat(),L.offsetShearY=r.readFloat(),L.mixRotate=r.readFloat(),L.mixX=r.readFloat(),L.mixY=r.readFloat(),L.mixScaleX=r.readFloat(),L.mixScaleY=r.readFloat(),L.mixShearY=r.readFloat(),n.transformConstraints.push(L)}o=r.readInt(!0);for(var Y,X=0;X<o;X++){var U=r.readString();if(!U)throw new Error("Path constraint data name must not be null.");var V=new f.PathConstraintData(U);V.order=r.readInt(!0),V.skinRequired=r.readBoolean(),Y=r.readInt(!0);for(var j=0;j<Y;j++)V.bones.push(n.bones[r.readInt(!0)]);V.target=n.slots[r.readInt(!0)],V.positionMode=r.readInt(!0),V.spacingMode=r.readInt(!0),V.rotateMode=r.readInt(!0),V.offsetRotation=r.readFloat(),V.position=r.readFloat(),V.positionMode===f.PositionMode.Fixed&&(V.position*=e),V.spacing=r.readFloat(),V.spacingMode!==f.SpacingMode.Length&&V.spacingMode!==f.SpacingMode.Fixed||(V.spacing*=e),V.mixRotate=r.readFloat(),V.mixX=r.readFloat(),V.mixY=r.readFloat(),n.pathConstraints.push(V)}var N=this.readSkin(r,n,!0,s);N&&(n.defaultSkin=N,n.skins.push(N));var z=n.skins.length;for(m.Utils.setArraySize(n.skins,o=z+r.readInt(!0));z<o;z++){var W=this.readSkin(r,n,!1,s);if(!W)throw new Error("readSkin() should not have returned null.");n.skins[z]=W}o=this.linkedMeshes.length;for(var G=0;G<o;G++){var H=this.linkedMeshes[G],q=H.skin?n.findSkin(H.skin):n.defaultSkin;if(!q)throw new Error("Not skin found for linked mesh.");if(!H.parent)throw new Error("Linked mesh parent must not be null");var J=q.getAttachment(H.slotIndex,H.parent);if(!J)throw new Error("Parent mesh not found: ".concat(H.parent));H.mesh.timelineAttachment=H.inheritTimeline?J:H.mesh,H.mesh.setParentMesh(J),null!==H.mesh.region&&H.mesh.updateRegion()}this.linkedMeshes.length=0,o=r.readInt(!0);for(var K=0;K<o;K++){var Q=r.readStringRef();if(!Q)throw new Error;var Z=new u.EventData(Q);Z.intValue=r.readInt(!1),Z.floatValue=r.readFloat(),Z.stringValue=r.readString(),Z.audioPath=r.readString(),Z.audioPath&&(Z.volume=r.readFloat(),Z.balance=r.readFloat()),n.events.push(Z)}o=r.readInt(!0);for(var $=0;$<o;$++){var tt=r.readString();if(!tt)throw new Error("Animatio name must not be null.");n.animations.push(this.readAnimation(r,tt,n))}return n}},{key:"readSkin",value:function(t,e,n,r){var i=null,a=0;if(n){if(0===(a=t.readInt(!0)))return null;i=new v.Skin("default")}else{var s=t.readStringRef();if(!s)throw new Error("Skin name must not be null.");(i=new v.Skin(s)).bones.length=t.readInt(!0);for(var o=0,h=i.bones.length;o<h;o++)i.bones[o]=e.bones[t.readInt(!0)];for(var l=0,u=t.readInt(!0);l<u;l++)i.constraints.push(e.ikConstraints[t.readInt(!0)]);for(var c=0,f=t.readInt(!0);c<f;c++)i.constraints.push(e.transformConstraints[t.readInt(!0)]);for(var d=0,p=t.readInt(!0);d<p;d++)i.constraints.push(e.pathConstraints[t.readInt(!0)]);a=t.readInt(!0)}for(var g=0;g<a;g++)for(var m=t.readInt(!0),y=0,x=t.readInt(!0);y<x;y++){var M=t.readStringRef();if(!M)throw new Error("Attachment name must not be null");var w=this.readAttachment(t,e,i,m,M,r);w&&i.setAttachment(m,M,w)}return i}},{key:"readAttachment",value:function(t,e,n,r,i,s){var o=this.scale,h=t.readStringRef();switch(h||(h=i),t.readByte()){case a.Region:var l=t.readStringRef(),u=t.readFloat(),c=t.readFloat(),f=t.readFloat(),d=t.readFloat(),v=t.readFloat(),p=t.readFloat(),g=t.readFloat(),y=t.readInt32(),x=this.readSequence(t);l||(l=h);var M=this.attachmentLoader.newRegionAttachment(n,h,l,x);return M?(M.path=l,M.x=c*o,M.y=f*o,M.scaleX=d,M.scaleY=v,M.rotation=u,M.width=p*o,M.height=g*o,m.Color.rgba8888ToColor(M.color,y),M.sequence=x,null===x&&M.updateRegion(),M):null;case a.BoundingBox:var w=t.readInt(!0),b=this.readVertices(t,w),k=s?t.readInt32():0,T=this.attachmentLoader.newBoundingBoxAttachment(n,h);return T?(T.worldVerticesLength=w<<1,T.vertices=b.vertices,T.bones=b.bones,s&&m.Color.rgba8888ToColor(T.color,k),T):null;case a.Mesh:var S=t.readStringRef(),C=t.readInt32(),_=t.readInt(!0),I=this.readFloatArray(t,_<<1,1),E=this.readShortArray(t),P=this.readVertices(t,_),R=t.readInt(!0),F=this.readSequence(t),B=[],O=0,L=0;s&&(B=this.readShortArray(t),O=t.readFloat(),L=t.readFloat()),S||(S=h);var D=this.attachmentLoader.newMeshAttachment(n,h,S,F);return D?(D.path=S,m.Color.rgba8888ToColor(D.color,C),D.bones=P.bones,D.vertices=P.vertices,D.worldVerticesLength=_<<1,D.triangles=E,D.regionUVs=I,null===F&&D.updateRegion(),D.hullLength=R<<1,D.sequence=F,s&&(D.edges=B,D.width=O*o,D.height=L*o),D):null;case a.LinkedMesh:var Y=t.readStringRef(),X=t.readInt32(),U=t.readStringRef(),V=t.readStringRef(),j=t.readBoolean(),N=this.readSequence(t),z=0,W=0;s&&(z=t.readFloat(),W=t.readFloat()),Y||(Y=h);var G=this.attachmentLoader.newMeshAttachment(n,h,Y,N);return G?(G.path=Y,m.Color.rgba8888ToColor(G.color,X),G.sequence=N,s&&(G.width=z*o,G.height=W*o),this.linkedMeshes.push(new A(G,U,r,V,j)),G):null;case a.Path:for(var H=t.readBoolean(),q=t.readBoolean(),J=t.readInt(!0),K=this.readVertices(t,J),Q=m.Utils.newArray(J/3,0),Z=0,$=Q.length;Z<$;Z++)Q[Z]=t.readFloat()*o;var tt=s?t.readInt32():0,et=this.attachmentLoader.newPathAttachment(n,h);return et?(et.closed=H,et.constantSpeed=q,et.worldVerticesLength=J<<1,et.vertices=K.vertices,et.bones=K.bones,et.lengths=Q,s&&m.Color.rgba8888ToColor(et.color,tt),et):null;case a.Point:var nt=t.readFloat(),rt=t.readFloat(),it=t.readFloat(),at=s?t.readInt32():0,st=this.attachmentLoader.newPointAttachment(n,h);return st?(st.x=rt*o,st.y=it*o,st.rotation=nt,s&&m.Color.rgba8888ToColor(st.color,at),st):null;case a.Clipping:var ot=t.readInt(!0),ht=t.readInt(!0),lt=this.readVertices(t,ht),ut=s?t.readInt32():0,ct=this.attachmentLoader.newClippingAttachment(n,h);return ct?(ct.endSlot=e.slots[ot],ct.worldVerticesLength=ht<<1,ct.vertices=lt.vertices,ct.bones=lt.bones,s&&m.Color.rgba8888ToColor(ct.color,ut),ct):null}return null}},{key:"readSequence",value:function(t){if(!t.readBoolean())return null;var e=new o.Sequence(t.readInt(!0));return e.start=t.readInt(!0),e.digits=t.readInt(!0),e.setupIndex=t.readInt(!0),e}},{key:"readVertices",value:function(t,e){var n=this.scale,r=e<<1,i=new y;if(!t.readBoolean())return i.vertices=this.readFloatArray(t,r,n),i;for(var a=new Array,s=new Array,o=0;o<e;o++){var h=t.readInt(!0);s.push(h);for(var l=0;l<h;l++)s.push(t.readInt(!0)),a.push(t.readFloat()*n),a.push(t.readFloat()*n),a.push(t.readFloat())}return i.vertices=m.Utils.toFloatArray(a),i.bones=s,i}},{key:"readFloatArray",value:function(t,e,n){var r=new Array(e);if(1===n)for(var i=0;i<e;i++)r[i]=t.readFloat();else for(var a=0;a<e;a++)r[a]=t.readFloat()*n;return r}},{key:"readShortArray",value:function(t){for(var e=t.readInt(!0),n=new Array(e),r=0;r<e;r++)n[r]=t.readShort();return n}},{key:"readAnimation",value:function(t,e,n){t.readInt(!0);for(var r=new Array,i=this.scale,a=(new m.Color,new m.Color,0),h=t.readInt(!0);a<h;a++)for(var u=t.readInt(!0),c=0,d=t.readInt(!0);c<d;c++){var v=t.readByte(),p=t.readInt(!0),g=p-1;switch(v){case 0:for(var y=new s.AttachmentTimeline(p,u),T=0;T<p;T++)y.setFrame(T,t.readFloat(),t.readStringRef());r.push(y);break;case 1:for(var S=t.readInt(!0),A=new s.RGBATimeline(p,S,u),C=t.readFloat(),_=t.readUnsignedByte()/255,I=t.readUnsignedByte()/255,E=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255,R=0,F=0;A.setFrame(R,C,_,I,E,P),R!==g;R++){var B=t.readFloat(),O=t.readUnsignedByte()/255,L=t.readUnsignedByte()/255,D=t.readUnsignedByte()/255,Y=t.readUnsignedByte()/255;switch(t.readByte()){case b:A.setStepped(R);break;case k:w(t,A,F++,R,0,C,B,_,O,1),w(t,A,F++,R,1,C,B,I,L,1),w(t,A,F++,R,2,C,B,E,D,1),w(t,A,F++,R,3,C,B,P,Y,1)}C=B,_=O,I=L,E=D,P=Y}r.push(A);break;case 2:for(var X=t.readInt(!0),U=new s.RGBTimeline(p,X,u),V=t.readFloat(),j=t.readUnsignedByte()/255,N=t.readUnsignedByte()/255,z=t.readUnsignedByte()/255,W=0,G=0;U.setFrame(W,V,j,N,z),W!==g;W++){var H=t.readFloat(),q=t.readUnsignedByte()/255,J=t.readUnsignedByte()/255,K=t.readUnsignedByte()/255;switch(t.readByte()){case b:U.setStepped(W);break;case k:w(t,U,G++,W,0,V,H,j,q,1),w(t,U,G++,W,1,V,H,N,J,1),w(t,U,G++,W,2,V,H,z,K,1)}V=H,j=q,N=J,z=K}r.push(U);break;case 3:for(var Q=t.readInt(!0),Z=new s.RGBA2Timeline(p,Q,u),$=t.readFloat(),tt=t.readUnsignedByte()/255,et=t.readUnsignedByte()/255,nt=t.readUnsignedByte()/255,rt=t.readUnsignedByte()/255,it=t.readUnsignedByte()/255,at=t.readUnsignedByte()/255,st=t.readUnsignedByte()/255,ot=0,ht=0;Z.setFrame(ot,$,tt,et,nt,rt,it,at,st),ot!==g;ot++){var lt=t.readFloat(),ut=t.readUnsignedByte()/255,ct=t.readUnsignedByte()/255,ft=t.readUnsignedByte()/255,dt=t.readUnsignedByte()/255,vt=t.readUnsignedByte()/255,pt=t.readUnsignedByte()/255,gt=t.readUnsignedByte()/255;switch(t.readByte()){case b:Z.setStepped(ot);break;case k:w(t,Z,ht++,ot,0,$,lt,tt,ut,1),w(t,Z,ht++,ot,1,$,lt,et,ct,1),w(t,Z,ht++,ot,2,$,lt,nt,ft,1),w(t,Z,ht++,ot,3,$,lt,rt,dt,1),w(t,Z,ht++,ot,4,$,lt,it,vt,1),w(t,Z,ht++,ot,5,$,lt,at,pt,1),w(t,Z,ht++,ot,6,$,lt,st,gt,1)}$=lt,tt=ut,et=ct,nt=ft,rt=dt,it=vt,at=pt,st=gt}r.push(Z);break;case 4:for(var mt=t.readInt(!0),yt=new s.RGB2Timeline(p,mt,u),xt=t.readFloat(),Mt=t.readUnsignedByte()/255,wt=t.readUnsignedByte()/255,bt=t.readUnsignedByte()/255,kt=t.readUnsignedByte()/255,Tt=t.readUnsignedByte()/255,St=t.readUnsignedByte()/255,At=0,Ct=0;yt.setFrame(At,xt,Mt,wt,bt,kt,Tt,St),At!==g;At++){var _t=t.readFloat(),It=t.readUnsignedByte()/255,Et=t.readUnsignedByte()/255,Pt=t.readUnsignedByte()/255,Rt=t.readUnsignedByte()/255,Ft=t.readUnsignedByte()/255,Bt=t.readUnsignedByte()/255;switch(t.readByte()){case b:yt.setStepped(At);break;case k:w(t,yt,Ct++,At,0,xt,_t,Mt,It,1),w(t,yt,Ct++,At,1,xt,_t,wt,Et,1),w(t,yt,Ct++,At,2,xt,_t,bt,Pt,1),w(t,yt,Ct++,At,3,xt,_t,kt,Rt,1),w(t,yt,Ct++,At,4,xt,_t,Tt,Ft,1),w(t,yt,Ct++,At,5,xt,_t,St,Bt,1)}xt=_t,Mt=It,wt=Et,bt=Pt,kt=Rt,Tt=Ft,St=Bt}r.push(yt);break;case 5:for(var Ot=new s.AlphaTimeline(p,t.readInt(!0),u),Lt=t.readFloat(),Dt=t.readUnsignedByte()/255,Yt=0,Xt=0;Ot.setFrame(Yt,Lt,Dt),Yt!==g;Yt++){var Ut=t.readFloat(),Vt=t.readUnsignedByte()/255;switch(t.readByte()){case b:Ot.setStepped(Yt);break;case k:w(t,Ot,Xt++,Yt,0,Lt,Ut,Dt,Vt,1)}Lt=Ut,Dt=Vt}r.push(Ot)}}for(var jt=0,Nt=t.readInt(!0);jt<Nt;jt++)for(var zt=t.readInt(!0),Wt=0,Gt=t.readInt(!0);Wt<Gt;Wt++){var Ht=t.readByte(),qt=t.readInt(!0),Jt=t.readInt(!0);switch(Ht){case 0:r.push(x(t,new s.RotateTimeline(qt,Jt,zt),1));break;case 1:r.push(M(t,new s.TranslateTimeline(qt,Jt,zt),i));break;case 2:r.push(x(t,new s.TranslateXTimeline(qt,Jt,zt),i));break;case 3:r.push(x(t,new s.TranslateYTimeline(qt,Jt,zt),i));break;case 4:r.push(M(t,new s.ScaleTimeline(qt,Jt,zt),1));break;case 5:r.push(x(t,new s.ScaleXTimeline(qt,Jt,zt),1));break;case 6:r.push(x(t,new s.ScaleYTimeline(qt,Jt,zt),1));break;case 7:r.push(M(t,new s.ShearTimeline(qt,Jt,zt),1));break;case 8:r.push(x(t,new s.ShearXTimeline(qt,Jt,zt),1));break;case 9:r.push(x(t,new s.ShearYTimeline(qt,Jt,zt),1))}}for(var Kt=0,Qt=t.readInt(!0);Kt<Qt;Kt++){for(var Zt=t.readInt(!0),$t=t.readInt(!0),te=$t-1,ee=new s.IkConstraintTimeline($t,t.readInt(!0),Zt),ne=t.readFloat(),re=t.readFloat(),ie=t.readFloat()*i,ae=0,se=0;ee.setFrame(ae,ne,re,ie,t.readByte(),t.readBoolean(),t.readBoolean()),ae!==te;ae++){var oe=t.readFloat(),he=t.readFloat(),le=t.readFloat()*i;switch(t.readByte()){case b:ee.setStepped(ae);break;case k:w(t,ee,se++,ae,0,ne,oe,re,he,1),w(t,ee,se++,ae,1,ne,oe,ie,le,i)}ne=oe,re=he,ie=le}r.push(ee)}for(var ue=0,ce=t.readInt(!0);ue<ce;ue++){for(var fe=t.readInt(!0),de=t.readInt(!0),ve=de-1,pe=new s.TransformConstraintTimeline(de,t.readInt(!0),fe),ge=t.readFloat(),me=t.readFloat(),ye=t.readFloat(),xe=t.readFloat(),Me=t.readFloat(),we=t.readFloat(),be=t.readFloat(),ke=0,Te=0;pe.setFrame(ke,ge,me,ye,xe,Me,we,be),ke!==ve;ke++){var Se=t.readFloat(),Ae=t.readFloat(),Ce=t.readFloat(),_e=t.readFloat(),Ie=t.readFloat(),Ee=t.readFloat(),Pe=t.readFloat();switch(t.readByte()){case b:pe.setStepped(ke);break;case k:w(t,pe,Te++,ke,0,ge,Se,me,Ae,1),w(t,pe,Te++,ke,1,ge,Se,ye,Ce,1),w(t,pe,Te++,ke,2,ge,Se,xe,_e,1),w(t,pe,Te++,ke,3,ge,Se,Me,Ie,1),w(t,pe,Te++,ke,4,ge,Se,we,Ee,1),w(t,pe,Te++,ke,5,ge,Se,be,Pe,1)}ge=Se,me=Ae,ye=Ce,xe=_e,Me=Ie,we=Ee,be=Pe}r.push(pe)}for(var Re=0,Fe=t.readInt(!0);Re<Fe;Re++)for(var Be=t.readInt(!0),Oe=n.pathConstraints[Be],Le=0,De=t.readInt(!0);Le<De;Le++)switch(t.readByte()){case 0:r.push(x(t,new s.PathConstraintPositionTimeline(t.readInt(!0),t.readInt(!0),Be),Oe.positionMode===f.PositionMode.Fixed?i:1));break;case 1:r.push(x(t,new s.PathConstraintSpacingTimeline(t.readInt(!0),t.readInt(!0),Be),Oe.spacingMode===f.SpacingMode.Length||Oe.spacingMode===f.SpacingMode.Fixed?i:1));break;case 2:for(var Ye=new s.PathConstraintMixTimeline(t.readInt(!0),t.readInt(!0),Be),Xe=t.readFloat(),Ue=t.readFloat(),Ve=t.readFloat(),je=t.readFloat(),Ne=0,ze=0,We=Ye.getFrameCount()-1;Ye.setFrame(Ne,Xe,Ue,Ve,je),Ne!==We;Ne++){var Ge=t.readFloat(),He=t.readFloat(),qe=t.readFloat(),Je=t.readFloat();switch(t.readByte()){case b:Ye.setStepped(Ne);break;case k:w(t,Ye,ze++,Ne,0,Xe,Ge,Ue,He,1),w(t,Ye,ze++,Ne,1,Xe,Ge,Ve,qe,1),w(t,Ye,ze++,Ne,2,Xe,Ge,je,Je,1)}Xe=Ge,Ue=He,Ve=qe,je=Je}r.push(Ye)}for(var Ke=0,Qe=t.readInt(!0);Ke<Qe;Ke++)for(var Ze=n.skins[t.readInt(!0)],$e=0,tn=t.readInt(!0);$e<tn;$e++)for(var en=t.readInt(!0),nn=0,rn=t.readInt(!0);nn<rn;nn++){var an=t.readStringRef();if(!an)throw new Error("attachmentName must not be null.");var sn=Ze.getAttachment(en,an),on=t.readByte(),hn=t.readInt(!0),ln=hn-1;switch(on){case 0:for(var un=sn,cn=un.bones,fn=un.vertices,dn=cn?fn.length/3*2:fn.length,vn=t.readInt(!0),pn=new s.DeformTimeline(hn,vn,en,un),gn=t.readFloat(),mn=0,yn=0;;mn++){var xn=void 0,Mn=t.readInt(!0);if(0===Mn)xn=cn?m.Utils.newFloatArray(dn):fn;else{xn=m.Utils.newFloatArray(dn);var wn=t.readInt(!0);if(Mn+=wn,1===i)for(var bn=wn;bn<Mn;bn++)xn[bn]=t.readFloat();else for(var kn=wn;kn<Mn;kn++)xn[kn]=t.readFloat()*i;if(!cn)for(var Tn=0,Sn=xn.length;Tn<Sn;Tn++)xn[Tn]+=fn[Tn]}if(pn.setFrame(mn,gn,xn),mn===ln)break;var An=t.readFloat();switch(t.readByte()){case b:pn.setStepped(mn);break;case k:w(t,pn,yn++,mn,0,gn,An,0,1,1)}gn=An}r.push(pn);break;case 1:for(var Cn=new s.SequenceTimeline(hn,en,sn),_n=0;_n<hn;_n++){var In=t.readFloat(),En=t.readInt32();Cn.setFrame(_n,In,o.SequenceModeValues[15&En],En>>4,t.readFloat())}r.push(Cn)}}var Pn=t.readInt(!0);if(Pn>0){for(var Rn=new s.DrawOrderTimeline(Pn),Fn=n.slots.length,Bn=0;Bn<Pn;Bn++){for(var On=t.readFloat(),Ln=t.readInt(!0),Dn=m.Utils.newArray(Fn,0),Yn=Fn-1;Yn>=0;Yn--)Dn[Yn]=-1;for(var Xn=m.Utils.newArray(Fn-Ln,0),Un=0,Vn=0,jn=0;jn<Ln;jn++){for(var Nn=t.readInt(!0);Un!==Nn;)Xn[Vn++]=Un++;Dn[Un+t.readInt(!0)]=Un++}for(;Un<Fn;)Xn[Vn++]=Un++;for(var zn=Fn-1;zn>=0;zn--)-1===Dn[zn]&&(Dn[zn]=Xn[--Vn]);Rn.setFrame(Bn,On,Dn)}r.push(Rn)}var Wn=t.readInt(!0);if(Wn>0){for(var Gn=new s.EventTimeline(Wn),Hn=0;Hn<Wn;Hn++){var qn=t.readFloat(),Jn=n.events[t.readInt(!0)],Kn=new l.Event(qn,Jn);Kn.intValue=t.readInt(!1),Kn.floatValue=t.readFloat(),Kn.stringValue=t.readBoolean()?t.readString():Jn.stringValue,Kn.data.audioPath&&(Kn.volume=t.readFloat(),Kn.balance=t.readFloat()),Gn.setFrame(Hn,Kn)}r.push(Gn)}for(var Qn=0,Zn=0,$n=r.length;Zn<$n;Zn++)Qn=Math.max(Qn,r[Zn].getDuration());return new s.Animation(e,r,Qn)}}]),t}();e.SkeletonBinary=T;var S=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new DataView(e.buffer);i(this,t),this.strings=n,this.index=r,this.buffer=a}return r(t,[{key:"readByte",value:function(){return this.buffer.getInt8(this.index++)}},{key:"readUnsignedByte",value:function(){return this.buffer.getUint8(this.index++)}},{key:"readShort",value:function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t}},{key:"readInt32",value:function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t}},{key:"readInt",value:function(t){var e=this.readByte(),n=127&e;return 0!==(128&e)&&(n|=(127&(e=this.readByte()))<<7,0!==(128&e)&&(n|=(127&(e=this.readByte()))<<14,0!==(128&e)&&(n|=(127&(e=this.readByte()))<<21,0!==(128&e)&&(n|=(127&(e=this.readByte()))<<28)))),t?n:n>>>1^-(1&n)}},{key:"readStringRef",value:function(){var t=this.readInt(!0);return 0===t?null:this.strings[t-1]}},{key:"readString",value:function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var e="",n=0;n<t;){var r=this.readUnsignedByte();switch(r>>4){case 12:case 13:e+=String.fromCharCode((31&r)<<6|63&this.readByte()),n+=2;break;case 14:e+=String.fromCharCode((15&r)<<12|(63&this.readByte())<<6|63&this.readByte()),n+=3;break;default:e+=String.fromCharCode(r),n++}}return e}},{key:"readFloat",value:function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t}},{key:"readBoolean",value:function(){return 0!==this.readByte()}}]),t}();e.BinaryInput=S;var A=r((function t(e,n,r,a,s){i(this,t),this.mesh=e,this.skin=n,this.slotIndex=r,this.parent=a,this.inheritTimeline=s}))},1164:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.SkeletonBounds=void 0;var a=n(9374),s=n(4153),o=function(){function t(){r(this,t),this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new s.Pool((function(){return s.Utils.newFloatArray(16)}))}return i(t,[{key:"update",value:function(t,e){if(!t)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,r=this.polygons,i=this.polygonPool,o=t.slots,h=o.length;n.length=0,i.freeAll(r),r.length=0;for(var l=0;l<h;l++){var u=o[l];if(u.bone.active){var c=u.getAttachment();if(c instanceof a.BoundingBoxAttachment){var f=c;n.push(f);var d=i.obtain();d.length!==f.worldVerticesLength&&(d=s.Utils.newFloatArray(f.worldVerticesLength)),r.push(d),f.computeWorldVertices(u,0,f.worldVerticesLength,d,0,2)}}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}},{key:"aabbCompute",value:function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,i=this.polygons,a=0,s=i.length;a<s;a++)for(var o=i[a],h=o,l=0,u=o.length;l<u;l+=2){var c=h[l],f=h[l+1];t=Math.min(t,c),e=Math.min(e,f),n=Math.max(n,c),r=Math.max(r,f)}this.minX=t,this.minY=e,this.maxX=n,this.maxY=r}},{key:"aabbContainsPoint",value:function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}},{key:"aabbIntersectsSegment",value:function(t,e,n,r){var i=this.minX,a=this.minY,s=this.maxX,o=this.maxY;if(t<=i&&n<=i||e<=a&&r<=a||t>=s&&n>=s||e>=o&&r>=o)return!1;var h=(r-e)/(n-t),l=h*(i-t)+e;if(l>a&&l<o)return!0;if((l=h*(s-t)+e)>a&&l<o)return!0;var u=(a-e)/h+t;return u>i&&u<s||(u=(o-e)/h+t)>i&&u<s}},{key:"aabbIntersectsSkeleton",value:function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}},{key:"containsPoint",value:function(t,e){for(var n=this.polygons,r=0,i=n.length;r<i;r++)if(this.containsPointPolygon(n[r],t,e))return this.boundingBoxes[r];return null}},{key:"containsPointPolygon",value:function(t,e,n){for(var r=t,i=t.length,a=i-2,s=!1,o=0;o<i;o+=2){var h=r[o+1],l=r[a+1];if(h<n&&l>=n||l<n&&h>=n){var u=r[o];u+(n-h)/(l-h)*(r[a]-u)<e&&(s=!s)}a=o}return s}},{key:"intersectsSegment",value:function(t,e,n,r){for(var i=this.polygons,a=0,s=i.length;a<s;a++)if(this.intersectsSegmentPolygon(i[a],t,e,n,r))return this.boundingBoxes[a];return null}},{key:"intersectsSegmentPolygon",value:function(t,e,n,r,i){for(var a=t,s=t.length,o=e-r,h=n-i,l=e*i-n*r,u=a[s-2],c=a[s-1],f=0;f<s;f+=2){var d=a[f],v=a[f+1],p=u*v-c*d,g=u-d,m=c-v,y=o*m-h*g,x=(l*g-o*p)/y;if((x>=u&&x<=d||x>=d&&x<=u)&&(x>=e&&x<=r||x>=r&&x<=e)){var M=(l*m-h*p)/y;if((M>=c&&M<=v||M>=v&&M<=c)&&(M>=n&&M<=i||M>=i&&M<=n))return!0}u=d,c=v}return!1}},{key:"getPolygon",value:function(t){if(!t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1===e?null:this.polygons[e]}},{key:"getWidth",value:function(){return this.maxX-this.minX}},{key:"getHeight",value:function(){return this.maxY-this.minY}}]),t}();e.SkeletonBounds=o},3461:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.SkeletonClipping=void 0;var a=n(9438),s=n(4153),o=function(){function t(){r(this,t),this.triangulator=new a.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array,this.clipAttachment=null,this.clippingPolygons=null}return i(t,[{key:"clipStart",value:function(e,n){if(this.clipAttachment)return 0;this.clipAttachment=n;var r=n.worldVerticesLength,i=s.Utils.setArraySize(this.clippingPolygon,r);n.computeWorldVertices(e,0,r,i,0,2);var a=this.clippingPolygon;t.makeClockwise(a);for(var o=this.clippingPolygons=this.triangulator.decompose(a,this.triangulator.triangulate(a)),h=0,l=o.length;h<l;h++){var u=o[h];t.makeClockwise(u),u.push(u[0]),u.push(u[1])}return o.length}},{key:"clipEndWithSlot",value:function(t){this.clipAttachment&&this.clipAttachment.endSlot===t.data&&this.clipEnd()}},{key:"clipEnd",value:function(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}},{key:"isClipping",value:function(){return null!==this.clipAttachment}},{key:"clipTriangles",value:function(t,e,n,r,i,a,o,h){var l=this.clipOutput,u=this.clippedVertices,c=this.clippedTriangles,f=this.clippingPolygons,d=f.length,v=h?12:8,p=0;u.length=0,c.length=0;t:for(var g=0;g<r;g+=3)for(var m=n[g]<<1,y=t[m],x=t[m+1],M=i[m],w=i[m+1],b=t[m=n[g+1]<<1],k=t[m+1],T=i[m],S=i[m+1],A=t[m=n[g+2]<<1],C=t[m+1],_=i[m],I=i[m+1],E=0;E<d;E++){var P=u.length;if(!this.clip(y,x,b,k,A,C,f[E],l)){var R=s.Utils.setArraySize(u,P+3*v);R[P]=y,R[P+1]=x,R[P+2]=a.r,R[P+3]=a.g,R[P+4]=a.b,R[P+5]=a.a,h?(R[P+6]=M,R[P+7]=w,R[P+8]=o.r,R[P+9]=o.g,R[P+10]=o.b,R[P+11]=o.a,R[P+12]=b,R[P+13]=k,R[P+14]=a.r,R[P+15]=a.g,R[P+16]=a.b,R[P+17]=a.a,R[P+18]=T,R[P+19]=S,R[P+20]=o.r,R[P+21]=o.g,R[P+22]=o.b,R[P+23]=o.a,R[P+24]=A,R[P+25]=C,R[P+26]=a.r,R[P+27]=a.g,R[P+28]=a.b,R[P+29]=a.a,R[P+30]=_,R[P+31]=I,R[P+32]=o.r,R[P+33]=o.g,R[P+34]=o.b,R[P+35]=o.a):(R[P+6]=M,R[P+7]=w,R[P+8]=b,R[P+9]=k,R[P+10]=a.r,R[P+11]=a.g,R[P+12]=a.b,R[P+13]=a.a,R[P+14]=T,R[P+15]=S,R[P+16]=A,R[P+17]=C,R[P+18]=a.r,R[P+19]=a.g,R[P+20]=a.b,R[P+21]=a.a,R[P+22]=_,R[P+23]=I),P=c.length;var F=s.Utils.setArraySize(c,P+3);F[P]=p,F[P+1]=p+1,F[P+2]=p+2,p+=3;continue t}var B=l.length;if(0!==B){for(var O=k-C,L=A-b,D=y-A,Y=C-x,X=1/(O*D+L*(x-C)),U=B>>1,V=this.clipOutput,j=s.Utils.setArraySize(u,P+U*v),N=0;N<B;N+=2){var z=V[N],W=V[N+1];j[P]=z,j[P+1]=W,j[P+2]=a.r,j[P+3]=a.g,j[P+4]=a.b,j[P+5]=a.a;var G=z-A,H=W-C,q=(O*G+L*H)*X,J=(Y*G+D*H)*X,K=1-q-J;j[P+6]=M*q+T*J+_*K,j[P+7]=w*q+S*J+I*K,h&&(j[P+8]=o.r,j[P+9]=o.g,j[P+10]=o.b,j[P+11]=o.a),P+=v}P=c.length;var Q=s.Utils.setArraySize(c,P+3*(U-2));U--;for(var Z=1;Z<U;Z++)Q[P]=p,Q[P+1]=p+Z,Q[P+2]=p+Z+1,P+=3;p+=U+1}}}},{key:"clip",value:function(t,e,n,r,i,a,s,o){var h,l=o,u=!1;s.length%4>=2?(h=o,o=this.scratch):h=this.scratch,h.length=0,h.push(t),h.push(e),h.push(n),h.push(r),h.push(i),h.push(a),h.push(t),h.push(e),o.length=0;for(var c=s,f=s.length-4,d=0;;d+=2){for(var v=c[d],p=c[d+1],g=c[d+2],m=c[d+3],y=v-g,x=p-m,M=h,w=h.length-2,b=o.length,k=0;k<w;k+=2){var T=M[k],S=M[k+1],A=M[k+2],C=M[k+3],_=y*(C-m)-x*(A-g)>0;if(y*(S-m)-x*(T-g)>0){if(_){o.push(A),o.push(C);continue}var I=C-S,E=A-T,P=I*(g-v)-E*(m-p);if(Math.abs(P)>1e-6){var R=(E*(p-S)-I*(v-T))/P;o.push(v+(g-v)*R),o.push(p+(m-p)*R)}else o.push(v),o.push(p)}else if(_){var F=C-S,B=A-T,O=F*(g-v)-B*(m-p);if(Math.abs(O)>1e-6){var L=(B*(p-S)-F*(v-T))/O;o.push(v+(g-v)*L),o.push(p+(m-p)*L)}else o.push(v),o.push(p);o.push(A),o.push(C)}u=!0}if(b===o.length)return l.length=0,!0;if(o.push(o[0]),o.push(o[1]),d===f)break;var D=o;(o=h).length=0,h=D}if(l!==o){l.length=0;for(var Y=0,X=o.length-2;Y<X;Y++)l[Y]=o[Y]}else l.length=l.length-2;return u}}],[{key:"makeClockwise",value:function(t){for(var e=t,n=t.length,r=e[n-2]*e[1]-e[0]*e[n-1],i=0,a=0,s=0,o=0,h=n-3;o<h;o+=2)i=e[o],a=e[o+1],s=e[o+2],r+=i*e[o+3]-s*a;if(!(r<0))for(var l=0,u=n-2,c=n>>1;l<c;l+=2){var f=e[l],d=e[l+1],v=u-l;e[l]=e[v],e[l+1]=e[v+1],e[v]=f,e[v+1]=d}}}]),t}();e.SkeletonClipping=o},2032:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.SkeletonData=void 0;var a=function(){function t(){r(this,t),this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}return i(t,[{key:"findBone",value:function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name===t)return i}return null}},{key:"findSlot",value:function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name===t)return i}return null}},{key:"findSkin",value:function(t){if(!t)throw new Error("skinName cannot be null.");for(var e=this.skins,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name===t)return i}return null}},{key:"findEvent",value:function(t){if(!t)throw new Error("eventDataName cannot be null.");for(var e=this.events,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name===t)return i}return null}},{key:"findAnimation",value:function(t){if(!t)throw new Error("animationName cannot be null.");for(var e=this.animations,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name===t)return i}return null}},{key:"findIkConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name===t)return i}return null}},{key:"findTransformConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name===t)return i}return null}},{key:"findPathConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name===t)return i}return null}}]),t}();e.SkeletonData=a},6859:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.SkeletonJson=void 0;var a=n(9889),s=n(196),o=n(4013),h=n(300),l=n(8155),u=n(9841),c=n(2032),f=n(3099),d=n(3605),v=n(7841),p=n(4153),g=n(6436),m=n(9889),y=function(){function t(e){r(this,t),this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}return i(t,[{key:"readSkeletonData",value:function(t){var e=this.scale,n=new c.SkeletonData,r="string"===typeof t?JSON.parse(t):t,i=r.skeleton;if(i&&(n.hash=i.hash,n.version=i.spine,n.x=i.x,n.y=i.y,n.width=i.width,n.height=i.height,n.fps=i.fps,n.imagesPath=i.images),r.bones)for(var a=0;a<r.bones.length;a++){var h=r.bones[a],g=null,m=k(h,"parent",null);m&&(g=n.findBone(m));var y=new s.BoneData(n.bones.length,h.name,g);y.length=k(h,"length",0)*e,y.x=k(h,"x",0)*e,y.y=k(h,"y",0)*e,y.rotation=k(h,"rotation",0),y.scaleX=k(h,"scaleX",1),y.scaleY=k(h,"scaleY",1),y.shearX=k(h,"shearX",0),y.shearY=k(h,"shearY",0),y.transformMode=p.Utils.enumValue(s.TransformMode,k(h,"transform","Normal")),y.skinRequired=k(h,"skin",!1);var x=k(h,"color",null);x&&y.color.setFromString(x),n.bones.push(y)}if(r.slots)for(var M=0;M<r.slots.length;M++){var w=r.slots[M],b=n.findBone(w.bone);if(!b)throw new Error("Couldn't find bone ".concat(w.bone," for slot ").concat(w.name));var T=new d.SlotData(n.slots.length,w.name,b),S=k(w,"color",null);S&&T.color.setFromString(S);var A=k(w,"dark",null);A&&(T.darkColor=p.Color.fromString(A)),T.attachmentName=k(w,"attachment",null),T.blendMode=p.Utils.enumValue(d.BlendMode,k(w,"blend","normal")),n.slots.push(T)}if(r.ik)for(var C=0;C<r.ik.length;C++){var _=r.ik[C],I=new l.IkConstraintData(_.name);I.order=k(_,"order",0),I.skinRequired=k(_,"skin",!1);for(var E=0;E<_.bones.length;E++){var P=n.findBone(_.bones[E]);if(!P)throw new Error("Couldn't find bone ".concat(_.bones[E]," for IK constraint ").concat(_.name,"."));I.bones.push(P)}var R=n.findBone(_.target);if(!R)throw new Error("Couldn't find target bone ".concat(_.target," for IK constraint ").concat(_.name,"."));I.target=R,I.mix=k(_,"mix",1),I.softness=k(_,"softness",0)*e,I.bendDirection=k(_,"bendPositive",!0)?1:-1,I.compress=k(_,"compress",!1),I.stretch=k(_,"stretch",!1),I.uniform=k(_,"uniform",!1),n.ikConstraints.push(I)}if(r.transform)for(var F=0;F<r.transform.length;F++){var B=r.transform[F],O=new v.TransformConstraintData(B.name);O.order=k(B,"order",0),O.skinRequired=k(B,"skin",!1);for(var L=0;L<B.bones.length;L++){var D=B.bones[L],Y=n.findBone(D);if(!Y)throw new Error("Couldn't find bone ".concat(D," for transform constraint ").concat(B.name,"."));O.bones.push(Y)}var X=B.target,U=n.findBone(X);if(!U)throw new Error("Couldn't find target bone ".concat(X," for transform constraint ").concat(B.name,"."));O.target=U,O.local=k(B,"local",!1),O.relative=k(B,"relative",!1),O.offsetRotation=k(B,"rotation",0),O.offsetX=k(B,"x",0)*e,O.offsetY=k(B,"y",0)*e,O.offsetScaleX=k(B,"scaleX",0),O.offsetScaleY=k(B,"scaleY",0),O.offsetShearY=k(B,"shearY",0),O.mixRotate=k(B,"mixRotate",1),O.mixX=k(B,"mixX",1),O.mixY=k(B,"mixY",O.mixX),O.mixScaleX=k(B,"mixScaleX",1),O.mixScaleY=k(B,"mixScaleY",O.mixScaleX),O.mixShearY=k(B,"mixShearY",1),n.transformConstraints.push(O)}if(r.path)for(var V=0;V<r.path.length;V++){var j=r.path[V],N=new u.PathConstraintData(j.name);N.order=k(j,"order",0),N.skinRequired=k(j,"skin",!1);for(var z=0;z<j.bones.length;z++){var W=j.bones[z],G=n.findBone(W);if(!G)throw new Error("Couldn't find bone ".concat(W," for path constraint ").concat(j.name,"."));N.bones.push(G)}var H=j.target,q=n.findSlot(H);if(!q)throw new Error("Couldn't find target slot ".concat(H," for path constraint ").concat(j.name,"."));N.target=q,N.positionMode=p.Utils.enumValue(u.PositionMode,k(j,"positionMode","Percent")),N.spacingMode=p.Utils.enumValue(u.SpacingMode,k(j,"spacingMode","Length")),N.rotateMode=p.Utils.enumValue(u.RotateMode,k(j,"rotateMode","Tangent")),N.offsetRotation=k(j,"rotation",0),N.position=k(j,"position",0),N.positionMode===u.PositionMode.Fixed&&(N.position*=e),N.spacing=k(j,"spacing",0),N.spacingMode!==u.SpacingMode.Length&&N.spacingMode!==u.SpacingMode.Fixed||(N.spacing*=e),N.mixRotate=k(j,"mixRotate",1),N.mixX=k(j,"mixX",1),N.mixY=k(j,"mixY",N.mixX),n.pathConstraints.push(N)}if(r.skins)for(var J=0;J<r.skins.length;J++){var K=r.skins[J],Q=new f.Skin(K.name);if(K.bones)for(var Z=0;Z<K.bones.length;Z++){var $=K.bones[Z],tt=n.findBone($);if(!tt)throw new Error("Couldn't find bone ".concat($," for skin ").concat(K.name,"."));Q.bones.push(tt)}if(K.ik)for(var et=0;et<K.ik.length;et++){var nt=K.ik[et],rt=n.findIkConstraint(nt);if(!rt)throw new Error("Couldn't find IK constraint ".concat(nt," for skin ").concat(K.name,"."));Q.constraints.push(rt)}if(K.transform)for(var it=0;it<K.transform.length;it++){var at=K.transform[it],st=n.findTransformConstraint(at);if(!st)throw new Error("Couldn't find transform constraint ".concat(at," for skin ").concat(K.name,"."));Q.constraints.push(st)}if(K.path)for(var ot=0;ot<K.path.length;ot++){var ht=K.path[ot],lt=n.findPathConstraint(ht);if(!lt)throw new Error("Couldn't find path constraint ".concat(ht," for skin ").concat(K.name,"."));Q.constraints.push(lt)}for(var ut in K.attachments){var ct=n.findSlot(ut);if(!ct)throw new Error("Couldn't find slot ".concat(ut," for skin ").concat(K.name,"."));var ft=K.attachments[ut];for(var dt in ft){var vt=this.readAttachment(ft[dt],Q,ct.index,dt,n);vt&&Q.setAttachment(ct.index,dt,vt)}}n.skins.push(Q),"default"===Q.name&&(n.defaultSkin=Q)}for(var pt=0,gt=this.linkedMeshes.length;pt<gt;pt++){var mt=this.linkedMeshes[pt],yt=mt.skin?n.findSkin(mt.skin):n.defaultSkin;if(!yt)throw new Error("Skin not found: ".concat(mt.skin));var xt=yt.getAttachment(mt.slotIndex,mt.parent);if(!xt)throw new Error("Parent mesh not found: ".concat(mt.parent));mt.mesh.timelineAttachment=mt.inheritTimeline?xt:mt.mesh,mt.mesh.setParentMesh(xt),null!==mt.mesh.region&&mt.mesh.updateRegion()}if(this.linkedMeshes.length=0,r.events)for(var Mt in r.events){var wt=r.events[Mt],bt=new o.EventData(Mt);bt.intValue=k(wt,"int",0),bt.floatValue=k(wt,"float",0),bt.stringValue=k(wt,"string",""),bt.audioPath=k(wt,"audio",null),bt.audioPath&&(bt.volume=k(wt,"volume",1),bt.balance=k(wt,"balance",0)),n.events.push(bt)}if(r.animations)for(var kt in r.animations){var Tt=r.animations[kt];this.readAnimation(Tt,kt,n)}return n}},{key:"readAttachment",value:function(t,e,n,r,i){var a=this.scale;switch(r=k(t,"name",r),k(t,"type","region")){case"region":var s=k(t,"path",r),o=this.readSequence(k(t,"sequence",null)),h=this.attachmentLoader.newRegionAttachment(e,r,s,o);if(!h)return null;h.path=s,h.x=k(t,"x",0)*a,h.y=k(t,"y",0)*a,h.scaleX=k(t,"scaleX",1),h.scaleY=k(t,"scaleY",1),h.rotation=k(t,"rotation",0),h.width=t.width*a,h.height=t.height*a,h.sequence=o;var l=k(t,"color",null);return l&&h.color.setFromString(l),null!==h.region&&h.updateRegion(),h;case"boundingbox":var u=this.attachmentLoader.newBoundingBoxAttachment(e,r);if(!u)return null;this.readVertices(t,u,t.vertexCount<<1);var c=k(t,"color",null);return c&&u.color.setFromString(c),u;case"mesh":case"linkedmesh":var f=k(t,"path",r),d=this.readSequence(k(t,"sequence",null)),v=this.attachmentLoader.newMeshAttachment(e,r,f,d);if(!v)return null;v.path=f;var g=k(t,"color",null);g&&v.color.setFromString(g),v.width=k(t,"width",0)*a,v.height=k(t,"height",0)*a,v.sequence=d;var m=k(t,"parent",null);if(m)return this.linkedMeshes.push(new x(v,k(t,"skin",null),n,m,k(t,"timelines",!0))),v;var y=t.uvs;return this.readVertices(t,v,y.length),v.triangles=t.triangles,v.regionUVs=y,null!==v.region&&v.updateRegion(),v.edges=k(t,"edges",null),v.hullLength=2*k(t,"hull",0),v;case"path":var M=this.attachmentLoader.newPathAttachment(e,r);if(!M)return null;M.closed=k(t,"closed",!1),M.constantSpeed=k(t,"constantSpeed",!0);var w=t.vertexCount;this.readVertices(t,M,w<<1);for(var b=p.Utils.newArray(w/3,0),T=0;T<t.lengths.length;T++)b[T]=t.lengths[T]*a;M.lengths=b;var S=k(t,"color",null);return S&&M.color.setFromString(S),M;case"point":var A=this.attachmentLoader.newPointAttachment(e,r);if(!A)return null;A.x=k(t,"x",0)*a,A.y=k(t,"y",0)*a,A.rotation=k(t,"rotation",0);var C=k(t,"color",null);return C&&A.color.setFromString(C),A;case"clipping":var _=this.attachmentLoader.newClippingAttachment(e,r);if(!_)return null;var I=k(t,"end",null);I&&(_.endSlot=i.findSlot(I));var E=t.vertexCount;this.readVertices(t,_,E<<1);var P=k(t,"color",null);return P&&_.color.setFromString(P),_}return null}},{key:"readSequence",value:function(t){if(null===t)return null;var e=new g.Sequence(k(t,"count",0));return e.start=k(t,"start",1),e.digits=k(t,"digits",0),e.setupIndex=k(t,"setup",0),e}},{key:"readVertices",value:function(t,e,n){var r=this.scale;e.worldVerticesLength=n;var i=t.vertices;if(n!==i.length){for(var a=new Array,s=new Array,o=0,h=i.length;o<h;){var l=i[o++];s.push(l);for(var u=o+4*l;o<u;o+=4)s.push(i[o]),a.push(i[o+1]*r),a.push(i[o+2]*r),a.push(i[o+3])}e.bones=s,e.vertices=p.Utils.toFloatArray(a)}else{var c=p.Utils.toFloatArray(i);if(1!==r)for(var f=0,d=i.length;f<d;f++)c[f]*=r;e.vertices=c}}},{key:"readAnimation",value:function(t,e,n){var r=this.scale,i=new Array;if(t.slots)for(var s in t.slots){var o=t.slots[s],l=n.findSlot(s);if(!l)throw new Error("Slot not found: "+s);var c=l.index;for(var f in o){var d=o[f];if(d){var v=d.length;if("attachment"===f){for(var y=new a.AttachmentTimeline(v,c),x=0;x<v;x++){var T=d[x];y.setFrame(x,k(T,"time",0),k(T,"name",null))}i.push(y)}else if("rgba"===f){for(var S=new a.RGBATimeline(v,v<<2,c),A=d[0],C=k(A,"time",0),_=p.Color.fromString(A.color),I=0,E=0;;I++){S.setFrame(I,C,_.r,_.g,_.b,_.a);var P=d[I+1];if(!P){S.shrink(E);break}var R=k(P,"time",0),F=p.Color.fromString(P.color),B=A.curve;B&&(E=b(B,S,E,I,0,C,R,_.r,F.r,1),E=b(B,S,E,I,1,C,R,_.g,F.g,1),E=b(B,S,E,I,2,C,R,_.b,F.b,1),E=b(B,S,E,I,3,C,R,_.a,F.a,1)),C=R,_=F,A=P}i.push(S)}else if("rgb"===f){for(var O=new a.RGBTimeline(v,3*v,c),L=d[0],D=k(L,"time",0),Y=p.Color.fromString(L.color),X=0,U=0;;X++){O.setFrame(X,D,Y.r,Y.g,Y.b);var V=d[X+1];if(!V){O.shrink(U);break}var j=k(V,"time",0),N=p.Color.fromString(V.color),z=L.curve;z&&(U=b(z,O,U,X,0,D,j,Y.r,N.r,1),U=b(z,O,U,X,1,D,j,Y.g,N.g,1),U=b(z,O,U,X,2,D,j,Y.b,N.b,1)),D=j,Y=N,L=V}i.push(O)}else if("alpha"===f)i.push(M(d,new a.AlphaTimeline(v,v,c),0,1));else if("rgba2"===f){for(var W=new a.RGBA2Timeline(v,7*v,c),G=d[0],H=k(G,"time",0),q=p.Color.fromString(G.light),J=p.Color.fromString(G.dark),K=0,Q=0;;K++){W.setFrame(K,H,q.r,q.g,q.b,q.a,J.r,J.g,J.b);var Z=d[K+1];if(!Z){W.shrink(Q);break}var $=k(Z,"time",0),tt=p.Color.fromString(Z.light),et=p.Color.fromString(Z.dark),nt=G.curve;nt&&(Q=b(nt,W,Q,K,0,H,$,q.r,tt.r,1),Q=b(nt,W,Q,K,1,H,$,q.g,tt.g,1),Q=b(nt,W,Q,K,2,H,$,q.b,tt.b,1),Q=b(nt,W,Q,K,3,H,$,q.a,tt.a,1),Q=b(nt,W,Q,K,4,H,$,J.r,et.r,1),Q=b(nt,W,Q,K,5,H,$,J.g,et.g,1),Q=b(nt,W,Q,K,6,H,$,J.b,et.b,1)),H=$,q=tt,J=et,G=Z}i.push(W)}else if("rgb2"===f){for(var rt=new a.RGB2Timeline(v,6*v,c),it=d[0],at=k(it,"time",0),st=p.Color.fromString(it.light),ot=p.Color.fromString(it.dark),ht=0,lt=0;;ht++){rt.setFrame(ht,at,st.r,st.g,st.b,ot.r,ot.g,ot.b);var ut=d[ht+1];if(!ut){rt.shrink(lt);break}var ct=k(ut,"time",0),ft=p.Color.fromString(ut.light),dt=p.Color.fromString(ut.dark),vt=it.curve;vt&&(lt=b(vt,rt,lt,ht,0,at,ct,st.r,ft.r,1),lt=b(vt,rt,lt,ht,1,at,ct,st.g,ft.g,1),lt=b(vt,rt,lt,ht,2,at,ct,st.b,ft.b,1),lt=b(vt,rt,lt,ht,3,at,ct,ot.r,dt.r,1),lt=b(vt,rt,lt,ht,4,at,ct,ot.g,dt.g,1),lt=b(vt,rt,lt,ht,5,at,ct,ot.b,dt.b,1)),at=ct,st=ft,ot=dt,it=ut}i.push(rt)}}}}if(t.bones)for(var pt in t.bones){var gt=t.bones[pt],mt=n.findBone(pt);if(!mt)throw new Error("Bone not found: "+pt);var yt=mt.index;for(var xt in gt){var Mt=gt[xt],wt=Mt.length;if(0!==wt)if("rotate"===xt)i.push(M(Mt,new a.RotateTimeline(wt,wt,yt),0,1));else if("translate"===xt){var bt=new a.TranslateTimeline(wt,wt<<1,yt);i.push(w(Mt,bt,"x","y",0,r))}else if("translatex"===xt){var kt=new a.TranslateXTimeline(wt,wt,yt);i.push(M(Mt,kt,0,r))}else if("translatey"===xt){var Tt=new a.TranslateYTimeline(wt,wt,yt);i.push(M(Mt,Tt,0,r))}else if("scale"===xt){var St=new a.ScaleTimeline(wt,wt<<1,yt);i.push(w(Mt,St,"x","y",1,1))}else if("scalex"===xt){var At=new a.ScaleXTimeline(wt,wt,yt);i.push(M(Mt,At,1,1))}else if("scaley"===xt){var Ct=new a.ScaleYTimeline(wt,wt,yt);i.push(M(Mt,Ct,1,1))}else if("shear"===xt){var _t=new a.ShearTimeline(wt,wt<<1,yt);i.push(w(Mt,_t,"x","y",0,1))}else if("shearx"===xt){var It=new a.ShearXTimeline(wt,wt,yt);i.push(M(Mt,It,0,1))}else if("sheary"===xt){var Et=new a.ShearYTimeline(wt,wt,yt);i.push(M(Mt,Et,0,1))}}}if(t.ik)for(var Pt in t.ik){var Rt=t.ik[Pt],Ft=Rt[0];if(Ft){var Bt=n.findIkConstraint(Pt);if(!Bt)throw new Error("IK Constraint not found: "+Pt);for(var Ot=n.ikConstraints.indexOf(Bt),Lt=new a.IkConstraintTimeline(Rt.length,Rt.length<<1,Ot),Dt=k(Ft,"time",0),Yt=k(Ft,"mix",1),Xt=k(Ft,"softness",0)*r,Ut=0,Vt=0;;Ut++){Lt.setFrame(Ut,Dt,Yt,Xt,k(Ft,"bendPositive",!0)?1:-1,k(Ft,"compress",!1),k(Ft,"stretch",!1));var jt=Rt[Ut+1];if(!jt){Lt.shrink(Vt);break}var Nt=k(jt,"time",0),zt=k(jt,"mix",1),Wt=k(jt,"softness",0)*r,Gt=Ft.curve;Gt&&(Vt=b(Gt,Lt,Vt,Ut,0,Dt,Nt,Yt,zt,1),Vt=b(Gt,Lt,Vt,Ut,1,Dt,Nt,Xt,Wt,r)),Dt=Nt,Yt=zt,Xt=Wt,Ft=jt}i.push(Lt)}}if(t.transform)for(var Ht in t.transform){var qt=t.transform[Ht],Jt=qt[0];if(Jt){var Kt=n.findTransformConstraint(Ht);if(!Kt)throw new Error("Transform constraint not found: "+Ht);for(var Qt=n.transformConstraints.indexOf(Kt),Zt=new a.TransformConstraintTimeline(qt.length,6*qt.length,Qt),$t=k(Jt,"time",0),te=k(Jt,"mixRotate",1),ee=k(Jt,"mixX",1),ne=k(Jt,"mixY",ee),re=k(Jt,"mixScaleX",1),ie=k(Jt,"mixScaleY",re),ae=k(Jt,"mixShearY",1),se=0,oe=0;;se++){Zt.setFrame(se,$t,te,ee,ne,re,ie,ae);var he=qt[se+1];if(!he){Zt.shrink(oe);break}var le=k(he,"time",0),ue=k(he,"mixRotate",1),ce=k(he,"mixX",1),fe=k(he,"mixY",ce),de=k(he,"mixScaleX",1),ve=k(he,"mixScaleY",de),pe=k(he,"mixShearY",1),ge=Jt.curve;ge&&(oe=b(ge,Zt,oe,se,0,$t,le,te,ue,1),oe=b(ge,Zt,oe,se,1,$t,le,ee,ce,1),oe=b(ge,Zt,oe,se,2,$t,le,ne,fe,1),oe=b(ge,Zt,oe,se,3,$t,le,re,de,1),oe=b(ge,Zt,oe,se,4,$t,le,ie,ve,1),oe=b(ge,Zt,oe,se,5,$t,le,ae,pe,1)),$t=le,te=ue,ee=ce,ne=fe,re=de,ie=ve,re=de,Jt=he}i.push(Zt)}}if(t.path)for(var me in t.path){var ye=t.path[me],xe=n.findPathConstraint(me);if(!xe)throw new Error("Path constraint not found: "+me);var Me=n.pathConstraints.indexOf(xe);for(var we in ye){var be=ye[we],ke=be[0];if(ke){var Te=be.length;if("position"===we){var Se=new a.PathConstraintPositionTimeline(Te,Te,Me);i.push(M(be,Se,0,xe.positionMode===u.PositionMode.Fixed?r:1))}else if("spacing"===we){var Ae=new a.PathConstraintSpacingTimeline(Te,Te,Me);i.push(M(be,Ae,0,xe.spacingMode===u.SpacingMode.Length||xe.spacingMode===u.SpacingMode.Fixed?r:1))}else if("mix"===we){for(var Ce=new a.PathConstraintMixTimeline(Te,3*Te,Me),_e=k(ke,"time",0),Ie=k(ke,"mixRotate",1),Ee=k(ke,"mixX",1),Pe=k(ke,"mixY",Ee),Re=0,Fe=0;;Re++){Ce.setFrame(Re,_e,Ie,Ee,Pe);var Be=be[Re+1];if(!Be){Ce.shrink(Fe);break}var Oe=k(Be,"time",0),Le=k(Be,"mixRotate",1),De=k(Be,"mixX",1),Ye=k(Be,"mixY",De),Xe=ke.curve;Xe&&(Fe=b(Xe,Ce,Fe,Re,0,_e,Oe,Ie,Le,1),Fe=b(Xe,Ce,Fe,Re,1,_e,Oe,Ee,De,1),Fe=b(Xe,Ce,Fe,Re,2,_e,Oe,Pe,Ye,1)),_e=Oe,Ie=Le,Ee=De,Pe=Ye,ke=Be}i.push(Ce)}}}}if(t.attachments)for(var Ue in t.attachments){var Ve=t.attachments[Ue],je=n.findSkin(Ue);if(!je)throw new Error("Skin not found: "+Ue);for(var Ne in Ve){var ze=Ve[Ne],We=n.findSlot(Ne);if(!We)throw new Error("Slot not found: "+Ne);var Ge=We.index;for(var He in ze){var qe=ze[He],Je=je.getAttachment(Ge,He);for(var Ke in qe){var Qe=qe[Ke],Ze=Qe[0];if(Ze)if("deform"===Ke){for(var $e=Je.bones,tn=Je.vertices,en=$e?tn.length/3*2:tn.length,nn=new a.DeformTimeline(Qe.length,Qe.length,Ge,Je),rn=k(Ze,"time",0),an=0,sn=0;;an++){var on=void 0,hn=k(Ze,"vertices",null);if(hn){on=p.Utils.newFloatArray(en);var ln=k(Ze,"offset",0);if(p.Utils.arrayCopy(hn,0,on,ln,hn.length),1!==r)for(var un=ln,cn=un+hn.length;un<cn;un++)on[un]*=r;if(!$e)for(var fn=0;fn<en;fn++)on[fn]+=tn[fn]}else on=$e?p.Utils.newFloatArray(en):tn;nn.setFrame(an,rn,on);var dn=Qe[an+1];if(!dn){nn.shrink(sn);break}var vn=k(dn,"time",0),pn=Ze.curve;pn&&(sn=b(pn,nn,sn,an,0,rn,vn,0,1,1)),rn=vn,Ze=dn}i.push(nn)}else if("sequence"===Ke){for(var gn=new m.SequenceTimeline(Qe.length,Ge,Je),mn=0,yn=0;yn<Qe.length;yn++){var xn=k(Ze,"delay",mn),Mn=k(Ze,"time",0),wn=g.SequenceMode[k(Ze,"mode","hold")],bn=k(Ze,"index",0);gn.setFrame(yn,Mn,wn,bn,xn),mn=xn,Ze=Qe[yn+1]}i.push(gn)}}}}}if(t.drawOrder){for(var kn=new a.DrawOrderTimeline(t.drawOrder.length),Tn=n.slots.length,Sn=0,An=0;An<t.drawOrder.length;An++,Sn++){var Cn=t.drawOrder[An],_n=null,In=k(Cn,"offsets",null);if(In){_n=p.Utils.newArray(Tn,-1);for(var En=p.Utils.newArray(Tn-In.length,0),Pn=0,Rn=0,Fn=0;Fn<In.length;Fn++){var Bn=In[Fn],On=n.findSlot(Bn.slot);if(!On)throw new Error("Slot not found: "+On);for(var Ln=On.index;Pn!==Ln;)En[Rn++]=Pn++;_n[Pn+Bn.offset]=Pn++}for(;Pn<Tn;)En[Rn++]=Pn++;for(var Dn=Tn-1;Dn>=0;Dn--)-1===_n[Dn]&&(_n[Dn]=En[--Rn])}kn.setFrame(Sn,k(Cn,"time",0),_n)}i.push(kn)}if(t.events){for(var Yn=new a.EventTimeline(t.events.length),Xn=0,Un=0;Un<t.events.length;Un++,Xn++){var Vn=t.events[Un],jn=n.findEvent(Vn.name);if(!jn)throw new Error("Event not found: "+Vn.name);var Nn=new h.Event(p.Utils.toSinglePrecision(k(Vn,"time",0)),jn);Nn.intValue=k(Vn,"int",jn.intValue),Nn.floatValue=k(Vn,"float",jn.floatValue),Nn.stringValue=k(Vn,"string",jn.stringValue),Nn.data.audioPath&&(Nn.volume=k(Vn,"volume",1),Nn.balance=k(Vn,"balance",0)),Yn.setFrame(Xn,Nn)}i.push(Yn)}for(var zn=0,Wn=0,Gn=i.length;Wn<Gn;Wn++)zn=Math.max(zn,i[Wn].getDuration());n.animations.push(new a.Animation(e,i,zn))}}]),t}();e.SkeletonJson=y;var x=i((function t(e,n,i,a,s){r(this,t),this.mesh=e,this.skin=n,this.slotIndex=i,this.parent=a,this.inheritTimeline=s}));function M(t,e,n,r){for(var i=t[0],a=k(i,"time",0),s=k(i,"value",n)*r,o=0,h=0;;h++){e.setFrame(h,a,s);var l=t[h+1];if(!l)return e.shrink(o),e;var u=k(l,"time",0),c=k(l,"value",n)*r;i.curve&&(o=b(i.curve,e,o,h,0,a,u,s,c,r)),a=u,s=c,i=l}}function w(t,e,n,r,i,a){for(var s=t[0],o=k(s,"time",0),h=k(s,n,i)*a,l=k(s,r,i)*a,u=0,c=0;;c++){e.setFrame(c,o,h,l);var f=t[c+1];if(!f)return e.shrink(u),e;var d=k(f,"time",0),v=k(f,n,i)*a,p=k(f,r,i)*a,g=s.curve;g&&(u=b(g,e,u,c,0,o,d,h,v,a),u=b(g,e,u,c,1,o,d,l,p,a)),o=d,h=v,l=p,s=f}}function b(t,e,n,r,i,a,s,o,h,l){if("stepped"===t)return e.setStepped(r),n;var u=i<<2,c=t[u],f=t[u+1]*l,d=t[u+2],v=t[u+3]*l;return e.setBezier(n,r,i,a,o,c,f,d,v,s,h),n+1}function k(t,e,n){return void 0!==t[e]?t[e]:n}},3099:function(t,e,n){"use strict";var r=n(9728).default,i=n(6690).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Skin=e.SkinEntry=void 0;var a=n(8582),s=r((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;i(this,t),this.slotIndex=e,this.name=n,this.attachment=r}));e.SkinEntry=s;var o=function(){function t(e){if(i(this,t),this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!e)throw new Error("name cannot be null.");this.name=e}return r(t,[{key:"setAttachment",value:function(t,e,n){if(!n)throw new Error("attachment cannot be null.");var r=this.attachments;t>=r.length&&(r.length=t+1),r[t]||(r[t]={}),r[t][e]=n}},{key:"addSkin",value:function(t){for(var e=0;e<t.bones.length;e++){for(var n=t.bones[e],r=!1,i=0;i<this.bones.length;i++)if(this.bones[i]===n){r=!0;break}r||this.bones.push(n)}for(var a=0;a<t.constraints.length;a++){for(var s=t.constraints[a],o=!1,h=0;h<this.constraints.length;h++)if(this.constraints[h]===s){o=!0;break}o||this.constraints.push(s)}for(var l=t.getAttachments(),u=0;u<l.length;u++){var c=l[u];this.setAttachment(c.slotIndex,c.name,c.attachment)}}},{key:"copySkin",value:function(t){for(var e=0;e<t.bones.length;e++){for(var n=t.bones[e],r=!1,i=0;i<this.bones.length;i++)if(this.bones[i]===n){r=!0;break}r||this.bones.push(n)}for(var s=0;s<t.constraints.length;s++){for(var o=t.constraints[s],h=!1,l=0;l<this.constraints.length;l++)if(this.constraints[l]===o){h=!0;break}h||this.constraints.push(o)}for(var u=t.getAttachments(),c=0;c<u.length;c++){var f=u[c];f.attachment&&(f.attachment instanceof a.MeshAttachment?(f.attachment=f.attachment.newLinkedMesh(),this.setAttachment(f.slotIndex,f.name,f.attachment)):(f.attachment=f.attachment.copy(),this.setAttachment(f.slotIndex,f.name,f.attachment)))}}},{key:"getAttachment",value:function(t,e){var n=this.attachments[t];return n?n[e]:null}},{key:"removeAttachment",value:function(t,e){var n=this.attachments[t];n&&delete n[e]}},{key:"getAttachments",value:function(){for(var t=new Array,e=0;e<this.attachments.length;e++){var n=this.attachments[e];if(n)for(var r in n){var i=n[r];i&&t.push(new s(e,r,i))}}return t}},{key:"getAttachmentsForSlot",value:function(t,e){var n=this.attachments[t];if(n)for(var r in n){var i=n[r];i&&e.push(new s(t,r,i))}}},{key:"clear",value:function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}},{key:"attachAll",value:function(t,e){for(var n=0,r=0;r<t.slots.length;r++){var i=t.slots[r],a=i.getAttachment();if(a&&n<e.attachments.length){var s=e.attachments[n];for(var o in s){if(a===s[o]){var h=this.getAttachment(n,o);h&&i.setAttachment(h);break}}}n++}}}]),t}();e.Skin=o},3356:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Slot=void 0;var a=n(353),s=n(4153),o=function(){function t(e,n){if(r(this,t),this.darkColor=null,this.attachment=null,this.attachmentState=0,this.sequenceIndex=-1,this.deform=new Array,!e)throw new Error("data cannot be null.");if(!n)throw new Error("bone cannot be null.");this.data=e,this.bone=n,this.color=new s.Color,this.darkColor=e.darkColor?new s.Color:null,this.setToSetupPose()}return i(t,[{key:"getSkeleton",value:function(){return this.bone.skeleton}},{key:"getAttachment",value:function(){return this.attachment}},{key:"setAttachment",value:function(t){this.attachment!==t&&(t instanceof a.VertexAttachment&&this.attachment instanceof a.VertexAttachment&&t.timelineAttachment===this.attachment.timelineAttachment||(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)}},{key:"setToSetupPose",value:function(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}}]),t}();e.Slot=o},3605:function(t,e,n){"use strict";var r=n(9728).default,i=n(6690).default;Object.defineProperty(e,"__esModule",{value:!0}),e.SlotData=e.BlendMode=void 0;var a,s=n(4153);!function(t){t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(a=e.BlendMode||(e.BlendMode={}));var o=r((function t(e,n,r){if(i(this,t),this.index=0,this.color=new s.Color(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=a.Normal,e<0)throw new Error("index must be >= 0.");if(!n)throw new Error("name cannot be null.");if(!r)throw new Error("boneData cannot be null.");this.index=e,this.name=n,this.boneData=r}));e.SlotData=o},3416:function(t,e,n){"use strict";var r=n(1655).default,i=n(6389).default,a=n(4704).default,s=n(6690).default,o=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureAtlasRegion=e.TextureAtlasPage=e.TextureAtlas=void 0;var h=n(2955),l=n(9760),u=n(4153),c=function(){function t(e){s(this,t),this.pages=new Array,this.regions=new Array;for(var n=new f(e),r=new Array(4),i={size:function(t){t.width=parseInt(r[1]),t.height=parseInt(r[2])},format:function(){},filter:function(t){t.minFilter=u.Utils.enumValue(h.TextureFilter,r[1]),t.magFilter=u.Utils.enumValue(h.TextureFilter,r[2])},repeat:function(t){-1!==r[1].indexOf("x")&&(t.uWrap=h.TextureWrap.Repeat),-1!==r[1].indexOf("y")&&(t.vWrap=h.TextureWrap.Repeat)},pma:function(t){t.pma="true"===r[1]}},a={xy:function(t){t.x=parseInt(r[1]),t.y=parseInt(r[2])},size:function(t){t.width=parseInt(r[1]),t.height=parseInt(r[2])},bounds:function(t){t.x=parseInt(r[1]),t.y=parseInt(r[2]),t.width=parseInt(r[3]),t.height=parseInt(r[4])},offset:function(t){t.offsetX=parseInt(r[1]),t.offsetY=parseInt(r[2])},orig:function(t){t.originalWidth=parseInt(r[1]),t.originalHeight=parseInt(r[2])},offsets:function(t){t.offsetX=parseInt(r[1]),t.offsetY=parseInt(r[2]),t.originalWidth=parseInt(r[3]),t.originalHeight=parseInt(r[4])},rotate:function(t){var e=r[1];"true"===e?t.degrees=90:"false"!==e&&(t.degrees=parseInt(e))},index:function(t){t.index=parseInt(r[1])}},o=n.readLine();o&&0===o.trim().length;)o=n.readLine();for(;o&&0!==o.trim().length&&0!==n.readEntry(r,o);)o=n.readLine();for(var l=null,c=null,p=null;null!==o;)if(0===o.trim().length)l=null,o=n.readLine();else if(l){for(var g=new v(l,o);;){var m=n.readEntry(r,o=n.readLine());if(0===m)break;var y=a[r[0]];if(y)y(g);else{c||(c=[]),p||(p=[]),c.push(r[0]);for(var x=[],M=0;M<m;M++)x.push(parseInt(r[M+1]));p.push(x)}}0===g.originalWidth&&0===g.originalHeight&&(g.originalWidth=g.width,g.originalHeight=g.height),c&&c.length>0&&p&&p.length>0&&(g.names=c,g.values=p,c=null,p=null),g.u=g.x/l.width,g.v=g.y/l.height,90===g.degrees?(g.u2=(g.x+g.height)/l.width,g.v2=(g.y+g.width)/l.height):(g.u2=(g.x+g.width)/l.width,g.v2=(g.y+g.height)/l.height),this.regions.push(g)}else{for(l=new d(o.trim());0!==n.readEntry(r,o=n.readLine());){var w=i[r[0]];w&&w(l)}this.pages.push(l)}}return o(t,[{key:"findRegion",value:function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name===t)return this.regions[e];return null}},{key:"setTextures",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=a(this.pages);try{for(r.s();!(e=r.n()).done;){var i=e.value;i.setTexture(t.get(n+i.name))}}catch(s){r.e(s)}finally{r.f()}}},{key:"dispose",value:function(){for(var t,e=0;e<this.pages.length;e++)null===(t=this.pages[e].texture)||void 0===t||t.dispose()}}]),t}();e.TextureAtlas=c;var f=function(){function t(e){s(this,t),this.index=0,this.lines=e.split(/\r\n|\r|\n/)}return o(t,[{key:"readLine",value:function(){return this.index>=this.lines.length?null:this.lines[this.index++]}},{key:"readEntry",value:function(t,e){if(!e)return 0;if(0===(e=e.trim()).length)return 0;var n=e.indexOf(":");if(-1===n)return 0;t[0]=e.substr(0,n).trim();for(var r=1,i=n+1;;r++){var a=e.indexOf(",",i);if(-1===a)return t[r]=e.substr(i).trim(),r;if(t[r]=e.substr(i,a-i).trim(),i=a+1,4===r)return 4}}}]),t}(),d=function(){function t(e){s(this,t),this.minFilter=h.TextureFilter.Nearest,this.magFilter=h.TextureFilter.Nearest,this.uWrap=h.TextureWrap.ClampToEdge,this.vWrap=h.TextureWrap.ClampToEdge,this.texture=null,this.width=0,this.height=0,this.pma=!1,this.name=e}return o(t,[{key:"setTexture",value:function(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap)}}]),t}();e.TextureAtlasPage=d;var v=function(t){r(n,t);var e=i(n);function n(t,r){var i;return s(this,n),(i=e.call(this)).x=0,i.y=0,i.offsetX=0,i.offsetY=0,i.originalWidth=0,i.originalHeight=0,i.index=0,i.degrees=0,i.names=null,i.values=null,i.page=t,i.name=r,i}return o(n)}(l.TextureRegion);e.TextureAtlasRegion=v},9760:function(t,e,n){"use strict";var r=n(9728).default,i=n(6690).default;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureRegion=void 0;var a=r((function t(){i(this,t),this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.degrees=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0}));e.TextureRegion=a},4672:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.TransformConstraint=void 0;var a=n(4153),s=function(){function t(e,n){if(r(this,t),this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new a.Vector2,this.active=!1,!e)throw new Error("data cannot be null.");if(!n)throw new Error("skeleton cannot be null.");this.data=e,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY,this.mixScaleX=e.mixScaleX,this.mixScaleY=e.mixScaleY,this.mixShearY=e.mixShearY,this.bones=new Array;for(var i=0;i<e.bones.length;i++){var s=n.findBone(e.bones[i].name);if(!s)throw new Error("Couldn't find bone ".concat(e.bones[i].name,"."));this.bones.push(s)}var o=n.findBone(e.target.name);if(!o)throw new Error("Couldn't find target bone ".concat(e.target.name,"."));this.target=o}return i(t,[{key:"isActive",value:function(){return this.active}},{key:"update",value:function(){0===this.mixRotate&&0===this.mixX&&0===this.mixY&&0===this.mixScaleX&&0===this.mixScaleX&&0===this.mixShearY||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}},{key:"applyAbsoluteWorld",value:function(){for(var t=this.mixRotate,e=this.mixX,n=this.mixY,r=this.mixScaleX,i=this.mixScaleY,s=this.mixShearY,o=0!==e||0!==n,h=this.target,l=h.a,u=h.b,c=h.c,f=h.d,d=l*f-u*c>0?a.MathUtils.degRad:-a.MathUtils.degRad,v=this.data.offsetRotation*d,p=this.data.offsetShearY*d,g=this.bones,m=0,y=g.length;m<y;m++){var x=g[m];if(0!==t){var M=x.a,w=x.b,b=x.c,k=x.d,T=Math.atan2(c,l)-Math.atan2(b,M)+v;T>a.MathUtils.PI?T-=a.MathUtils.PI2:T<-a.MathUtils.PI&&(T+=a.MathUtils.PI2),T*=t;var S=Math.cos(T),A=Math.sin(T);x.a=S*M-A*b,x.b=S*w-A*k,x.c=A*M+S*b,x.d=A*w+S*k}if(o){var C=this.temp;h.localToWorld(C.set(this.data.offsetX,this.data.offsetY)),x.worldX+=(C.x-x.worldX)*e,x.worldY+=(C.y-x.worldY)*n}if(0!==r){var _=Math.sqrt(x.a*x.a+x.c*x.c);0!==_&&(_=(_+(Math.sqrt(l*l+c*c)-_+this.data.offsetScaleX)*r)/_),x.a*=_,x.c*=_}if(0!==i){var I=Math.sqrt(x.b*x.b+x.d*x.d);0!==I&&(I=(I+(Math.sqrt(u*u+f*f)-I+this.data.offsetScaleY)*i)/I),x.b*=I,x.d*=I}if(s>0){var E=x.b,P=x.d,R=Math.atan2(P,E),F=Math.atan2(f,u)-Math.atan2(c,l)-(R-Math.atan2(x.c,x.a));F>a.MathUtils.PI?F-=a.MathUtils.PI2:F<-a.MathUtils.PI&&(F+=a.MathUtils.PI2),F=R+(F+p)*s;var B=Math.sqrt(E*E+P*P);x.b=Math.cos(F)*B,x.d=Math.sin(F)*B}x.updateAppliedTransform()}}},{key:"applyRelativeWorld",value:function(){for(var t=this.mixRotate,e=this.mixX,n=this.mixY,r=this.mixScaleX,i=this.mixScaleY,s=this.mixShearY,o=0!==e||0!==n,h=this.target,l=h.a,u=h.b,c=h.c,f=h.d,d=l*f-u*c>0?a.MathUtils.degRad:-a.MathUtils.degRad,v=this.data.offsetRotation*d,p=this.data.offsetShearY*d,g=this.bones,m=0,y=g.length;m<y;m++){var x=g[m];if(0!==t){var M=x.a,w=x.b,b=x.c,k=x.d,T=Math.atan2(c,l)+v;T>a.MathUtils.PI?T-=a.MathUtils.PI2:T<-a.MathUtils.PI&&(T+=a.MathUtils.PI2),T*=t;var S=Math.cos(T),A=Math.sin(T);x.a=S*M-A*b,x.b=S*w-A*k,x.c=A*M+S*b,x.d=A*w+S*k}if(o){var C=this.temp;h.localToWorld(C.set(this.data.offsetX,this.data.offsetY)),x.worldX+=C.x*e,x.worldY+=C.y*n}if(0!==r){var _=(Math.sqrt(l*l+c*c)-1+this.data.offsetScaleX)*r+1;x.a*=_,x.c*=_}if(0!==i){var I=(Math.sqrt(u*u+f*f)-1+this.data.offsetScaleY)*i+1;x.b*=I,x.d*=I}if(s>0){var E=Math.atan2(f,u)-Math.atan2(c,l);E>a.MathUtils.PI?E-=a.MathUtils.PI2:E<-a.MathUtils.PI&&(E+=a.MathUtils.PI2);var P=x.b,R=x.d;E=Math.atan2(R,P)+(E-a.MathUtils.PI/2+p)*s;var F=Math.sqrt(P*P+R*R);x.b=Math.cos(E)*F,x.d=Math.sin(E)*F}x.updateAppliedTransform()}}},{key:"applyAbsoluteLocal",value:function(){for(var t=this.mixRotate,e=this.mixX,n=this.mixY,r=this.mixScaleX,i=this.mixScaleY,a=this.mixShearY,s=this.target,o=this.bones,h=0,l=o.length;h<l;h++){var u=o[h],c=u.arotation;if(0!==t){var f=s.arotation-c+this.data.offsetRotation;c+=(f-=360*(16384-(16384.499999999996-f/360|0)))*t}var d=u.ax,v=u.ay;d+=(s.ax-d+this.data.offsetX)*e,v+=(s.ay-v+this.data.offsetY)*n;var p=u.ascaleX,g=u.ascaleY;0!==r&&0!==p&&(p=(p+(s.ascaleX-p+this.data.offsetScaleX)*r)/p),0!==i&&0!==g&&(g=(g+(s.ascaleY-g+this.data.offsetScaleY)*i)/g);var m=u.ashearY;if(0!==a){var y=s.ashearY-m+this.data.offsetShearY;m+=(y-=360*(16384-(16384.499999999996-y/360|0)))*a}u.updateWorldTransformWith(d,v,c,p,g,u.ashearX,m)}}},{key:"applyRelativeLocal",value:function(){for(var t=this.mixRotate,e=this.mixX,n=this.mixY,r=this.mixScaleX,i=this.mixScaleY,a=this.mixShearY,s=this.target,o=this.bones,h=0,l=o.length;h<l;h++){var u=o[h],c=u.arotation+(s.arotation+this.data.offsetRotation)*t,f=u.ax+(s.ax+this.data.offsetX)*e,d=u.ay+(s.ay+this.data.offsetY)*n,v=u.ascaleX*((s.ascaleX-1+this.data.offsetScaleX)*r+1),p=u.ascaleY*((s.ascaleY-1+this.data.offsetScaleY)*i+1),g=u.ashearY+(s.ashearY+this.data.offsetShearY)*a;u.updateWorldTransformWith(f,d,c,v,p,u.ashearX,g)}}}]),t}();e.TransformConstraint=s},7841:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default,a=n(1655).default,s=n(6389).default;Object.defineProperty(e,"__esModule",{value:!0}),e.TransformConstraintData=void 0;var o=function(t){a(n,t);var e=s(n);function n(t){var i;return r(this,n),(i=e.call(this,t,0,!1)).bones=new Array,i._target=null,i.mixRotate=0,i.mixX=0,i.mixY=0,i.mixScaleX=0,i.mixScaleY=0,i.mixShearY=0,i.offsetRotation=0,i.offsetX=0,i.offsetY=0,i.offsetScaleX=0,i.offsetScaleY=0,i.offsetShearY=0,i.relative=!1,i.local=!1,i}return i(n,[{key:"target",get:function(){if(this._target)return this._target;throw new Error("BoneData not set.")},set:function(t){this._target=t}}]),n}(n(5221).ConstraintData);e.TransformConstraintData=o},9438:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Triangulator=void 0;var a=n(4153),s=function(){function t(){r(this,t),this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new a.Pool((function(){return new Array})),this.polygonIndicesPool=new a.Pool((function(){return new Array}))}return i(t,[{key:"triangulate",value:function(e){var n=e,r=e.length>>1,i=this.indicesArray;i.length=0;for(var a=0;a<r;a++)i[a]=a;var s=this.isConcaveArray;s.length=0;for(var o=0,h=r;o<h;++o)s[o]=t.isConcave(o,r,n,i);var l=this.triangles;for(l.length=0;r>3;){for(var u=r-1,c=0,f=1;;){t:if(!s[c]){for(var d=i[u]<<1,v=i[c]<<1,p=i[f]<<1,g=n[d],m=n[d+1],y=n[v],x=n[v+1],M=n[p],w=n[p+1],b=(f+1)%r;b!==u;b=(b+1)%r)if(s[b]){var k=i[b]<<1,T=n[k],S=n[k+1];if(t.positiveArea(M,w,g,m,T,S)&&t.positiveArea(g,m,y,x,T,S)&&t.positiveArea(y,x,M,w,T,S))break t}break}if(0===f){do{if(!s[c])break;c--}while(c>0);break}u=c,c=f,f=(f+1)%r}l.push(i[(r+c-1)%r]),l.push(i[c]),l.push(i[(c+1)%r]),i.splice(c,1),s.splice(c,1);var A=(--r+c-1)%r,C=c===r?0:c;s[A]=t.isConcave(A,r,n,i),s[C]=t.isConcave(C,r,n,i)}return 3===r&&(l.push(i[2]),l.push(i[0]),l.push(i[1])),l}},{key:"decompose",value:function(e,n){var r=e,i=this.convexPolygons;this.polygonPool.freeAll(i),i.length=0;var a=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(a),a.length=0;var s=this.polygonIndicesPool.obtain();s.length=0;var o=this.polygonPool.obtain();o.length=0;for(var h=-1,l=0,u=0,c=n.length;u<c;u+=3){var f=n[u]<<1,d=n[u+1]<<1,v=n[u+2]<<1,p=r[f],g=r[f+1],m=r[d],y=r[d+1],x=r[v],M=r[v+1],w=!1;if(h===f){var b=o.length-4,k=t.winding(o[b],o[b+1],o[b+2],o[b+3],x,M),T=t.winding(x,M,o[0],o[1],o[2],o[3]);k===l&&T===l&&(o.push(x),o.push(M),s.push(v),w=!0)}w||(o.length>0?(i.push(o),a.push(s)):(this.polygonPool.free(o),this.polygonIndicesPool.free(s)),(o=this.polygonPool.obtain()).length=0,o.push(p),o.push(g),o.push(m),o.push(y),o.push(x),o.push(M),(s=this.polygonIndicesPool.obtain()).length=0,s.push(f),s.push(d),s.push(v),l=t.winding(p,g,m,y,x,M),h=f)}o.length>0&&(i.push(o),a.push(s));for(var S=0,A=i.length;S<A;S++)if(0!==(s=a[S]).length)for(var C=s[0],_=s[s.length-1],I=(o=i[S]).length-4,E=o[I],P=o[I+1],R=o[I+2],F=o[I+3],B=o[0],O=o[1],L=o[2],D=o[3],Y=t.winding(E,P,R,F,B,O),X=0;X<A;X++)if(X!==S){var U=a[X];if(3===U.length){var V=U[0],j=U[1],N=U[2],z=i[X],W=z[z.length-2],G=z[z.length-1];if(V===C&&j===_){var H=t.winding(E,P,R,F,W,G),q=t.winding(W,G,B,O,L,D);H===Y&&q===Y&&(z.length=0,U.length=0,o.push(W),o.push(G),s.push(N),E=R,P=F,R=W,F=G,X=0)}}}for(var J=i.length-1;J>=0;J--)0===(o=i[J]).length&&(i.splice(J,1),this.polygonPool.free(o),s=a[J],a.splice(J,1),this.polygonIndicesPool.free(s));return i}}],[{key:"isConcave",value:function(t,e,n,r){var i=r[(e+t-1)%e]<<1,a=r[t]<<1,s=r[(t+1)%e]<<1;return!this.positiveArea(n[i],n[i+1],n[a],n[a+1],n[s],n[s+1])}},{key:"positiveArea",value:function(t,e,n,r,i,a){return t*(a-r)+n*(e-a)+i*(r-e)>=0}},{key:"winding",value:function(t,e,n,r,i,a){var s=n-t,o=r-e;return i*o-a*s+s*e-t*o>=0?1:-1}}]),t}();e.Triangulator=s},5681:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},4153:function(t,e,n){"use strict";var r=n(1655).default,i=n(6389).default,a=n(6690).default,s=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.WindowedMean=e.TimeKeeper=e.Vector2=e.Pool=e.DebugUtils=e.Utils=e.PowOut=e.Pow=e.Interpolation=e.MathUtils=e.Color=e.StringSet=e.IntSet=void 0;var o=function(){function t(){a(this,t),this.array=new Array}return s(t,[{key:"add",value:function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e}},{key:"contains",value:function(t){return void 0!==this.array[0|t]}},{key:"remove",value:function(t){this.array[0|t]=void 0}},{key:"clear",value:function(){this.array.length=0}}]),t}();e.IntSet=o;var h=function(){function t(){a(this,t),this.entries={},this.size=0}return s(t,[{key:"add",value:function(t){var e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)}},{key:"addAll",value:function(t){for(var e=this.size,n=0,r=t.length;n<r;n++)this.add(t[n]);return e!==this.size}},{key:"contains",value:function(t){return this.entries[t]}},{key:"clear",value:function(){this.entries={},this.size=0}}]),t}();e.StringSet=h;var l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;a(this,t),this.r=e,this.g=n,this.b=r,this.a=i}return s(t,[{key:"set",value:function(t,e,n,r){return this.r=t,this.g=e,this.b=n,this.a=r,this.clamp()}},{key:"setFromColor",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}},{key:"setFromString",value:function(t){return t="#"===t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!==t.length?1:parseInt(t.substr(6,2),16)/255,this}},{key:"add",value:function(t,e,n,r){return this.r+=t,this.g+=e,this.b+=n,this.a+=r,this.clamp()}},{key:"clamp",value:function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}}],[{key:"rgba8888ToColor",value:function(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255}},{key:"rgb888ToColor",value:function(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255}},{key:"fromString",value:function(e){return(new t).setFromString(e)}}]),t}();e.Color=l,l.WHITE=new l(1,1,1,1),l.RED=new l(1,0,0,1),l.GREEN=new l(0,1,0,1),l.BLUE=new l(0,0,1,1),l.MAGENTA=new l(1,0,1,1);var u=function(){function t(){a(this,t)}return s(t,null,[{key:"clamp",value:function(t,e,n){return t<e?e:t>n?n:t}},{key:"cosDeg",value:function(e){return Math.cos(e*t.degRad)}},{key:"sinDeg",value:function(e){return Math.sin(e*t.degRad)}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}},{key:"toInt",value:function(t){return t>0?Math.floor(t):Math.ceil(t)}},{key:"cbrt",value:function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}},{key:"randomTriangular",value:function(e,n){return t.randomTriangularWith(e,n,.5*(e+n))}},{key:"randomTriangularWith",value:function(t,e,n){var r=Math.random(),i=e-t;return r<=(n-t)/i?t+Math.sqrt(r*i*(n-t)):e-Math.sqrt((1-r)*i*(e-n))}},{key:"isPowerOfTwo",value:function(t){return t&&0===(t&t-1)}}]),t}();e.MathUtils=u,u.PI=3.1415927,u.PI2=2*u.PI,u.radiansToDegrees=180/u.PI,u.radDeg=u.radiansToDegrees,u.degreesToRadians=u.PI/180,u.degRad=u.degreesToRadians;var c=function(){function t(){a(this,t)}return s(t,[{key:"apply",value:function(t,e,n){return t+(e-t)*this.applyInternal(n)}}]),t}();e.Interpolation=c;var f=function(t){r(n,t);var e=i(n);function n(t){var r;return a(this,n),(r=e.call(this)).power=2,r.power=t,r}return s(n,[{key:"applyInternal",value:function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2===0?-2:2)+1}}]),n}(c);e.Pow=f;var d=function(t){r(n,t);var e=i(n);function n(){return a(this,n),e.apply(this,arguments)}return s(n,[{key:"applyInternal",value:function(t){return Math.pow(t-1,this.power)*(this.power%2===0?-1:1)+1}}]),n}(f);e.PowOut=d;var v=function(){function t(){a(this,t)}return s(t,null,[{key:"arrayCopy",value:function(t,e,n,r,i){for(var a=e,s=r;a<e+i;a++,s++)n[s]=t[a]}},{key:"arrayFill",value:function(t,e,n,r){for(var i=e;i<n;i++)t[i]=r}},{key:"setArraySize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.length;if(r===e)return t;if(t.length=e,r<e)for(var i=r;i<e;i++)t[i]=n;return t}},{key:"ensureArrayCapacity",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.length>=n?e:t.setArraySize(e,n,r)}},{key:"newArray",value:function(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n}},{key:"newFloatArray",value:function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var n=new Array(e),r=0;r<n.length;r++)n[r]=0;return n}},{key:"newShortArray",value:function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var n=new Array(e),r=0;r<n.length;r++)n[r]=0;return n}},{key:"toFloatArray",value:function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e}},{key:"toSinglePrecision",value:function(e){return t.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e}},{key:"webkit602BugfixHelper",value:function(t,e){}},{key:"contains",value:function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1}},{key:"enumValue",value:function(t,e){return t[e[0].toUpperCase()+e.slice(1)]}}]),t}();e.Utils=v,v.SUPPORTS_TYPED_ARRAYS="undefined"!==typeof Float32Array;var p=function(){function t(){a(this,t)}return s(t,null,[{key:"logBones",value:function(t){for(var e=0;e<t.bones.length;e++){var n=t.bones[e];console.log(n.data.name+", "+n.a+", "+n.b+", "+n.c+", "+n.d+", "+n.worldX+", "+n.worldY)}}}]),t}();e.DebugUtils=p;var g=function(){function t(e){a(this,t),this.items=new Array,this.instantiator=e}return s(t,[{key:"obtain",value:function(){return this.items.length>0?this.items.pop():this.instantiator()}},{key:"free",value:function(t){t.reset&&t.reset(),this.items.push(t)}},{key:"freeAll",value:function(t){for(var e=0;e<t.length;e++)this.free(t[e])}},{key:"clear",value:function(){this.items.length=0}}]),t}();e.Pool=g;var m=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a(this,t),this.x=e,this.y=n}return s(t,[{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"length",value:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}},{key:"normalize",value:function(){var t=this.length();return 0!==t&&(this.x/=t,this.y/=t),this}}]),t}();e.Vector2=m;var y=function(){function t(){a(this,t),this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return s(t,[{key:"update",value:function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}}]),t}();e.TimeKeeper=y;var x=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;a(this,t),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(e)}return s(t,[{key:"hasEnoughData",value:function(){return this.addedValues>=this.values.length}},{key:"addValue",value:function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0}},{key:"getMean",value:function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0}}]),t}();e.WindowedMean=x},353:function(t,e,n){"use strict";var r=n(6115).default,i=n(1655).default,a=n(6389).default,s=n(9728).default,o=n(6690).default;Object.defineProperty(e,"__esModule",{value:!0}),e.VertexAttachment=e.Attachment=void 0;var h=n(4153),l=s((function t(e){if(o(this,t),!e)throw new Error("name cannot be null.");this.name=e}));e.Attachment=l;var u=function(t){i(n,t);var e=a(n);function n(){var t;return o(this,n),(t=e.apply(this,arguments)).id=n.nextID++,t.bones=null,t.vertices=[],t.worldVerticesLength=0,t.timelineAttachment=r(t),t}return s(n,[{key:"computeWorldVertices",value:function(t,e,n,r,i,a){n=i+(n>>1)*a;var s=t.bone.skeleton,o=t.deform,h=this.vertices,l=this.bones;if(l){for(var u=0,c=0,f=0;f<e;f+=2){var d=l[u];u+=d+1,c+=d}var v=s.bones;if(0===o.length)for(var p=i,g=3*c;p<n;p+=a){var m=0,y=0,x=l[u++];for(x+=u;u<x;u++,g+=3){var M=v[l[u]],w=h[g],b=h[g+1],k=h[g+2];m+=(w*M.a+b*M.b+M.worldX)*k,y+=(w*M.c+b*M.d+M.worldY)*k}r[p]=m,r[p+1]=y}else for(var T=o,S=i,A=3*c,C=c<<1;S<n;S+=a){var _=0,I=0,E=l[u++];for(E+=u;u<E;u++,A+=3,C+=2){var P=v[l[u]],R=h[A]+T[C],F=h[A+1]+T[C+1],B=h[A+2];_+=(R*P.a+F*P.b+P.worldX)*B,I+=(R*P.c+F*P.d+P.worldY)*B}r[S]=_,r[S+1]=I}}else{o.length>0&&(h=o);for(var O=t.bone,L=O.worldX,D=O.worldY,Y=O.a,X=O.b,U=O.c,V=O.d,j=e,N=i;N<n;j+=2,N+=a){var z=h[j],W=h[j+1];r[N]=z*Y+W*X+L,r[N+1]=z*U+W*V+D}}}},{key:"copyTo",value:function(t){this.bones?(t.bones=new Array(this.bones.length),h.Utils.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices&&(t.vertices=h.Utils.newFloatArray(this.vertices.length),h.Utils.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)),t.worldVerticesLength=this.worldVerticesLength,t.timelineAttachment=this.timelineAttachment}}]),n}(l);e.VertexAttachment=u,u.nextID=0},5500:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},9374:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default,a=n(1655).default,s=n(6389).default;Object.defineProperty(e,"__esModule",{value:!0}),e.BoundingBoxAttachment=void 0;var o=n(4153),h=function(t){a(n,t);var e=s(n);function n(){var t;return r(this,n),(t=e.apply(this,arguments)).color=new o.Color(1,1,1,1),t}return i(n,[{key:"copy",value:function(){var t=new n(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}}]),n}(n(353).VertexAttachment);e.BoundingBoxAttachment=h},2024:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default,a=n(1655).default,s=n(6389).default;Object.defineProperty(e,"__esModule",{value:!0}),e.ClippingAttachment=void 0;var o=n(4153),h=function(t){a(n,t);var e=s(n);function n(){var t;return r(this,n),(t=e.apply(this,arguments)).endSlot=null,t.color=new o.Color(.2275,.2275,.8078,1),t}return i(n,[{key:"copy",value:function(){var t=new n(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}}]),n}(n(353).VertexAttachment);e.ClippingAttachment=h},8582:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default,a=n(1588).default,s=n(3808).default,o=n(1655).default,h=n(6389).default;Object.defineProperty(e,"__esModule",{value:!0}),e.MeshAttachment=void 0;var l=n(3416),u=n(4153),c=function(t){o(n,t);var e=h(n);function n(t,i){var a;return r(this,n),(a=e.call(this,t)).region=null,a.regionUVs=[],a.uvs=[],a.triangles=[],a.color=new u.Color(1,1,1,1),a.width=0,a.height=0,a.hullLength=0,a.edges=[],a.parentMesh=null,a.sequence=null,a.tempColor=new u.Color(0,0,0,0),a.path=i,a}return i(n,[{key:"updateRegion",value:function(){if(!this.region)throw new Error("Region not set.");var t=this.regionUVs;this.uvs&&this.uvs.length===t.length||(this.uvs=u.Utils.newFloatArray(t.length));var e=this.uvs,n=this.uvs.length,r=this.region.u,i=this.region.v,a=0,s=0;if(this.region instanceof l.TextureAtlasRegion){var o=this.region,h=o.page.texture.getImage(),c=h.width,f=h.height;switch(o.degrees){case 90:r-=(o.originalHeight-o.offsetY-o.height)/c,i-=(o.originalWidth-o.offsetX-o.width)/f,a=o.originalHeight/c,s=o.originalWidth/f;for(var d=0;d<n;d+=2)e[d]=r+t[d+1]*a,e[d+1]=i+(1-t[d])*s;return;case 180:r-=(o.originalWidth-o.offsetX-o.width)/c,i-=o.offsetY/f,a=o.originalWidth/c,s=o.originalHeight/f;for(var v=0;v<n;v+=2)e[v]=r+(1-t[v])*a,e[v+1]=i+(1-t[v+1])*s;return;case 270:r-=o.offsetY/c,i-=o.offsetX/f,a=o.originalHeight/c,s=o.originalWidth/f;for(var p=0;p<n;p+=2)e[p]=r+(1-t[p+1])*a,e[p+1]=i+t[p]*s;return}r-=o.offsetX/c,i-=(o.originalHeight-o.offsetY-o.height)/f,a=o.originalWidth/c,s=o.originalHeight/f}else this.region?(a=this.region.u2-r,s=this.region.v2-i):(r=i=0,a=s=1);for(var g=0;g<n;g+=2)e[g]=r+t[g]*a,e[g+1]=i+t[g+1]*s}},{key:"getParentMesh",value:function(){return this.parentMesh}},{key:"setParentMesh",value:function(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}},{key:"copy",value:function(){if(this.parentMesh)return this.newLinkedMesh();var t=new n(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),u.Utils.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),u.Utils.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),u.Utils.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=null!==this.sequence?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),u.Utils.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}},{key:"computeWorldVertices",value:function(t,e,r,i,o,h){null!==this.sequence&&this.sequence.apply(t,this),a(s(n.prototype),"computeWorldVertices",this).call(this,t,e,r,i,o,h)}},{key:"newLinkedMesh",value:function(){var t=new n(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),null!==t.region&&t.updateRegion(),t}}]),n}(n(353).VertexAttachment);e.MeshAttachment=c},397:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default,a=n(1655).default,s=n(6389).default;Object.defineProperty(e,"__esModule",{value:!0}),e.PathAttachment=void 0;var o=n(4153),h=function(t){a(n,t);var e=s(n);function n(){var t;return r(this,n),(t=e.apply(this,arguments)).lengths=[],t.closed=!1,t.constantSpeed=!1,t.color=new o.Color(1,1,1,1),t}return i(n,[{key:"copy",value:function(){var t=new n(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),o.Utils.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=this.closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}}]),n}(n(353).VertexAttachment);e.PathAttachment=h},630:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default,a=n(1655).default,s=n(6389).default;Object.defineProperty(e,"__esModule",{value:!0}),e.PointAttachment=void 0;var o=n(4153),h=function(t){a(n,t);var e=s(n);function n(){var t;return r(this,n),(t=e.apply(this,arguments)).x=0,t.y=0,t.rotation=0,t.color=new o.Color(.38,.94,0,1),t}return i(n,[{key:"computeWorldPosition",value:function(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e}},{key:"computeWorldRotation",value:function(t){var e=o.MathUtils.cosDeg(this.rotation),n=o.MathUtils.sinDeg(this.rotation),r=e*t.a+n*t.b,i=e*t.c+n*t.d;return Math.atan2(i,r)*o.MathUtils.radDeg}},{key:"copy",value:function(){var t=new n(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}}]),n}(n(353).VertexAttachment);e.PointAttachment=h},7045:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default,a=n(1655).default,s=n(6389).default;Object.defineProperty(e,"__esModule",{value:!0}),e.RegionAttachment=void 0;var o=n(4153),h=function(t){a(n,t);var e=s(n);function n(t,i){var a;return r(this,n),(a=e.call(this,t)).x=0,a.y=0,a.scaleX=1,a.scaleY=1,a.rotation=0,a.width=0,a.height=0,a.color=new o.Color(1,1,1,1),a.rendererObject=null,a.region=null,a.sequence=null,a.offset=o.Utils.newFloatArray(8),a.uvs=o.Utils.newFloatArray(8),a.tempColor=new o.Color(1,1,1,1),a.path=i,a}return i(n,[{key:"updateRegion",value:function(){if(!this.region)throw new Error("Region not set.");var t=this.region,e=this.width/this.region.originalWidth*this.scaleX,n=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*e,i=-this.height/2*this.scaleY+this.region.offsetY*n,a=r+this.region.width*e,s=i+this.region.height*n,o=this.rotation*Math.PI/180,h=Math.cos(o),l=Math.sin(o),u=this.x,c=this.y,f=r*h+u,d=r*l,v=i*h+c,p=i*l,g=a*h+u,m=a*l,y=s*h+c,x=s*l,M=this.offset;M[0]=f-p,M[1]=v+d,M[2]=f-x,M[3]=y+d,M[4]=g-x,M[5]=y+m,M[6]=g-p,M[7]=v+m;var w=this.uvs;90===t.degrees?(w[2]=t.u,w[3]=t.v2,w[4]=t.u,w[5]=t.v,w[6]=t.u2,w[7]=t.v,w[0]=t.u2,w[1]=t.v2):(w[0]=t.u,w[1]=t.v2,w[2]=t.u,w[3]=t.v,w[4]=t.u2,w[5]=t.v,w[6]=t.u2,w[7]=t.v2)}},{key:"computeWorldVertices",value:function(t,e,n,r){null!==this.sequence&&this.sequence.apply(t,this);var i=t.bone,a=this.offset,s=i.worldX,o=i.worldY,h=i.a,l=i.b,u=i.c,c=i.d,f=0,d=0;f=a[0],d=a[1],e[n]=f*h+d*l+s,e[n+1]=f*u+d*c+o,n+=r,f=a[2],d=a[3],e[n]=f*h+d*l+s,e[n+1]=f*u+d*c+o,n+=r,f=a[4],d=a[5],e[n]=f*h+d*l+s,e[n+1]=f*u+d*c+o,n+=r,f=a[6],d=a[7],e[n]=f*h+d*l+s,e[n+1]=f*u+d*c+o}},{key:"copy",value:function(){var t=new n(this.name,this.path);return t.region=this.region,t.rendererObject=this.rendererObject,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,o.Utils.arrayCopy(this.uvs,0,t.uvs,0,8),o.Utils.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t.sequence=null!==this.sequence?this.sequence.copy():null,t}}]),n}(n(353).Attachment);e.RegionAttachment=h,h.X1=0,h.Y1=1,h.C1R=2,h.C1G=3,h.C1B=4,h.C1A=5,h.U1=6,h.V1=7,h.X2=8,h.Y2=9,h.C2R=10,h.C2G=11,h.C2B=12,h.C2A=13,h.U2=14,h.V2=15,h.X3=16,h.Y3=17,h.C3R=18,h.C3G=19,h.C3B=20,h.C3A=21,h.U3=22,h.V3=23,h.X4=24,h.Y4=25,h.C4R=26,h.C4G=27,h.C4B=28,h.C4A=29,h.U4=30,h.V4=31},6436:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.SequenceModeValues=e.SequenceMode=e.Sequence=void 0;var a,s=n(4153),o=function(){function t(e){r(this,t),this.id=t.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=new Array(e)}return i(t,[{key:"copy",value:function(){var e=new t(this.regions.length);return s.Utils.arrayCopy(this.regions,0,e.regions,0,this.regions.length),e.start=this.start,e.digits=this.digits,e.setupIndex=this.setupIndex,e}},{key:"apply",value:function(t,e){var n=t.sequenceIndex;-1===n&&(n=this.setupIndex),n>=this.regions.length&&(n=this.regions.length-1);var r=this.regions[n];e.region!==r&&(e.region=r,e.updateRegion())}},{key:"getPath",value:function(t,e){for(var n=t,r=(this.start+e).toString(),i=this.digits-r.length;i>0;i--)n+="0";return n+=r}}],[{key:"nextID",value:function(){return t._nextID++}}]),t}();e.Sequence=o,o._nextID=0,function(t){t[t.hold=0]="hold",t[t.once=1]="once",t[t.loop=2]="loop",t[t.pingpong=3]="pingpong",t[t.onceReverse=4]="onceReverse",t[t.loopReverse=5]="loopReverse",t[t.pingpongReverse=6]="pingpongReverse"}(a=e.SequenceMode||(e.SequenceMode={})),e.SequenceModeValues=[a.hold,a.once,a.loop,a.pingpong,a.onceReverse,a.loopReverse,a.pingpongReverse]},6914:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(9889),e),i(n(1700),e),i(n(1657),e),i(n(3006),e),i(n(1362),e),i(n(196),e),i(n(5221),e),i(n(2957),e),i(n(300),e),i(n(4013),e),i(n(7111),e),i(n(8155),e),i(n(3093),e),i(n(9841),e),i(n(9965),e),i(n(2411),e),i(n(1164),e),i(n(3461),e),i(n(2032),e),i(n(6859),e),i(n(3099),e),i(n(3356),e),i(n(3605),e),i(n(9760),e),i(n(3416),e),i(n(4672),e),i(n(7841),e),i(n(9438),e),i(n(5681),e),i(n(4153),e),i(n(5356),e),i(n(353),e),i(n(5500),e),i(n(9374),e),i(n(2024),e),i(n(8582),e),i(n(397),e),i(n(630),e),i(n(7045),e)},5356:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Math.fround=Math.fround||function(t){if(!(t=Number(t)))return t;var e=t<0?-1:1;e<0&&(t=-t);var n=Math.floor(Math.log(t)/Math.LN2),r=Math.pow(2,Math.max(-126,Math.min(n,127))),i=n<-127?0:1,a=Math.round(8388608*(i-t/r));return n>0&&a<=-8388608?e*(1/0):e*r*(i-a/8388608)}},8656:function(t,e,n){"use strict";var r,i=n(4704).default,a=n(6690).default,s=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Animation=e.PlayMode=void 0,function(t){t[t.NORMAL=0]="NORMAL",t[t.LOOP=1]="LOOP",t[t.LOOP_PINGPONG=2]="LOOP_PINGPONG",t[t.REVERSED=3]="REVERSED",t[t.LOOP_REVERSED=4]="LOOP_REVERSED"}(r=e.PlayMode||(e.PlayMode={}));var o=function(){function t(e,n){a(this,t),this.totalDuration=0,this.keyFrames=e,Array.isArray(n)||(n=[n]);for(var r=n[n.length-1]||0;n.length<e.length;)n.push(r);var s,o=i(n);try{for(o.s();!(s=o.n()).done;){var h=s.value;this.totalDuration+=h}}catch(l){o.e(l)}finally{o.f()}this.frameDurations=n}return s(t,[{key:"getFrameNumber",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.frameDurations,r=e?n.length-1:0;!((t-=n[r])<0);)e?r--:r++;return r}},{key:"getKeyFrame",value:function(t,e){var n=this.keyFrames,i=this.frameDurations,a=this.totalDuration,s=Math.floor(t/a),o=t%a,h=0;switch(e){case r.NORMAL:h=0===s?this.getFrameNumber(o):i.length-1;break;case r.LOOP:h=this.getFrameNumber(o);break;case r.LOOP_PINGPONG:h=this.getFrameNumber(o,s%2===1);break;case r.REVERSED:h=0===s?this.getFrameNumber(o,!0):0;break;case r.LOOP_REVERSED:h=this.getFrameNumber(o,!0)}return n[h]}}]),t}();e.Animation=o},2121:function(t,e,n){"use strict";var r=n(861).default,i=n(7061).default,a=n(4704).default,s=n(6690).default,o=n(9728).default,h=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function s(t){try{h(r.next(t))}catch(e){a(e)}}function o(t){try{h(r.throw(t))}catch(e){a(e)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}h((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.AssetManager=void 0;var l=n(7581),u=n(7139),c=n(9396),f=function(){function t(e){s(this,t),this.promises=[],this.atlases=new Map,this.textures=new Map,this.jsonData=new Map,this.binaryData=new Map,this.done=0,this.listeners=[],this.fonts=new Map,this.gl=e}return o(t,[{key:"addListener",value:function(t){this.listeners.push(t)}},{key:"reportDone",value:function(){this.done++;var t,e=a(this.listeners);try{for(e.s();!(t=e.n()).done;){(0,t.value)(this.done/this.getTotal()*100,this.done>=this.getTotal())}}catch(n){e.e(n)}finally{e.f()}}},{key:"loadAtlas",value:function(t,e){var n=this,r=c.TextureAtlas.load(this.gl,t,{}).then((function(t){return n.atlases.set(e,t),n.reportDone(),t}));return this.promises.push(r),r}},{key:"getAtlas",value:function(t){return this.atlases.get(t)}},{key:"loadJsonData",value:function(t,e){var n=this,r=fetch(t).then((function(t){return t.json()})).then((function(t){return n.jsonData.set(e,t),n.reportDone(),t}));return this.promises.push(r),r}},{key:"getJsonData",value:function(t){return this.jsonData.get(t)}},{key:"loadBinaryData",value:function(t,e){var n=this,r=fetch(t).then((function(t){return t.arrayBuffer()})).then((function(t){return n.binaryData.set(e,t),n.reportDone(),t}));return this.promises.push(r),r}},{key:"getBinaryData",value:function(t){return this.binaryData.get(t)}},{key:"loadFont",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=l.BitmapFont.load(this.gl,t,r).then((function(t){return n.fonts.set(e,t),n.reportDone(),t}));return this.promises.push(i),i}},{key:"getFont",value:function(t){return this.fonts.get(t)}},{key:"loadTexture",value:function(t,e){var n=this,r=u.Texture.load(this.gl,t).then((function(t){return n.textures.set(e,t),n.reportDone(),t}));return this.promises.push(r),r}},{key:"getTexture",value:function(t){return this.textures.get(t)}},{key:"finishLoading",value:function(){return h(this,void 0,void 0,i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(this.promises);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"getDone",value:function(){return this.done}},{key:"getTotal",value:function(){return this.promises.length}},{key:"disposeAll",value:function(){var t=this;r(this.atlases.keys()).forEach((function(e){var n;((null===(n=t.atlases.get(e))||void 0===n?void 0:n.getRegions())||[]).forEach((function(t){var e;null===(e=t.texture)||void 0===e||e.destroy()})),t.atlases.delete(e)})),r(this.textures.keys()).forEach((function(e){var n;null===(n=t.textures.get(e))||void 0===n||n.destroy(),t.textures.delete(e)})),r(this.fonts.keys()).forEach((function(e){var n;((null===(n=t.fonts.get(e))||void 0===n?void 0:n.getRegions())||[]).forEach((function(t){var e;null===(e=t.texture)||void 0===e||e.destroy()})),t.fonts.delete(e)}))}}]),t}();e.AssetManager=f,e.default=f},7581:function(t,e,n){"use strict";var r=n(7061).default,i=n(9728).default,a=n(6690).default,s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function s(t){try{h(r.next(t))}catch(e){a(e)}}function o(t){try{h(r.throw(t))}catch(e){a(e)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}h((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.BitmapFont=void 0;var o=n(3959),h=n(2791),l=n(8606),u=i((function t(e,n,r){var i=this;a(this,t),this.load=function(t){for(var e=Object.values(t.glyphs),n=0;n<e.length;n++){var r=e[n];if(r)for(var a=0;a<r.length;a++){var s=r[a];s&&t.setGlyphRegion(s,i.regions[s.page])}}null!=t.missingGlyph&&t.setGlyphRegion(t.missingGlyph,i.regions[t.missingGlyph.page])},this.draw=function(t,e,n,r,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:l.Align.left,o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:e.length,c=arguments.length>9?arguments[9]:void 0;i.cache.clear(),i.cache.addText(e,n,r,h,u,a,s,o,c),i.cache.draw(t)},this.getColor=function(){return i.cache.getColor()},this.getScaleX=function(){return i.data.scaleX},this.getScaleY=function(){return i.data.scaleY},this.getRegions=function(){return i.regions},this.getRegion=function(t){return i.regions[t]},this.getLineHeight=function(){return i.data.lineHeight},this.getSpaceXadvance=function(){return i.data.spaceXadvance},this.getXHeight=function(){return i.data.xHeight},this.getCapHeight=function(){return i.data.capHeight},this.getAscent=function(){return i.data.ascent},this.getDescent=function(){return i.data.descent},this.isFlipped=function(){return i.flipped},this.dispose=function(){if(i.ownsTexture)for(var t=0;t<i.regions.length;t++)i.regions[t].texture.dispose()},this.setFixedWidthGlyphs=function(t){for(var e=i.data,n=0,r=0,a=t.length;r<a;r++){var s=e.getGlyph(t.charAt(r));null!=s&&s.xadvance>n&&(n=s.xadvance)}for(var o=0,h=t.length;o<h;o++){var l=e.getGlyph(t.charAt(o));l&&(l.xoffset+=(n-l.xadvance)/2,l.xadvance=n,l.kerning=[],l.kerning=null,l.fixedWidth=!0)}},this.setUseIntegerPositions=function(t){i.integer=t,i.cache.setUseIntegerPositions(t)},this.usesIntegerPositions=function(){return i.integer},this.getCache=function(){return i.cache},this.getData=function(){return i.data},this.getOwnsTexture=function(){return i.ownsTexture},this.setOwnsTexture=function(t){i.ownsTexture=t},this.newFontCache=function(){return new o.BitmapFontCache(i,i.integer)},this.regions=n,this.flipped=e.flipped,this.data=e,this.integer=r,0!==this.regions.length?(this.ownsTexture=!1,this.cache=this.newFontCache(),this.load(e)):console.log("No texture region were found")}));e.BitmapFont=u,u.load=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return s(void 0,void 0,void 0,r().mark((function a(){var s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=new h.BitmapFontData(e,n),r.next=3,s.loadFont(t);case 3:return r.abrupt("return",new u(s,s.regions,i));case 4:case"end":return r.stop()}}),a)})))}},3959:function(t,e,n){"use strict";var r=n(861).default,i=n(6690).default,a=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.BitmapFontCache=void 0;var s=n(7712),o=n(9699),h=n(8606),l=function(){function t(e,n){var a=this;i(this,t),this.tempColor=new h.Color(1,1,1,1),this.drawingTexts=[],this.layouts=[],this.pooledLayouts=[],this.color=new h.Color(1,1,1,1),this.setPosition=function(t,e){a.translate(t-a.x,e-a.y)},this.translate=function(t,e){if(0!==t||0!==e){a.integer&&(t=Math.round(t),e=Math.round(e)),a.x+=t,a.y+=e;for(var n=a.pageVertices,r=0,i=n.length;r<i;r++)for(var s=n[r],o=0,h=a.idx[r];o<h;o+=5)s[o]+=t,s[o+1]+=e}},this.setColors=function(t,e,n,r){for(var i=255<<24|255*n<<16|255*e<<8|255*t,s=o.NumberUtil.intToFloatColor(i),h=0,l=a.pageVertices.length;h<l;h++)for(var u=a.pageVertices[h],c=2,f=a.idx[h];c<f;c+=5)u[c]=s},this.getColor=function(){return a.color},this.setColor=function(t,e,n,r){a.color.set(t,e,n,r)},this.clear=function(){a.x=0,a.y=0,h.Pools.freeAll("GlyphLayout",a.pooledLayouts),a.pooledLayouts.length=0,a.layouts.length=0;for(var t=0,e=a.idx.length;t<e;t++)null!=a.pageGlyphIndices&&(a.pageGlyphIndices[t].length=0),a.idx[t]=0},this.requireGlyphs=function(t){if(1===a.pageVertices.length)a.requirePageGlyphs(0,t.glyphCount);else{for(var e=a.tempGlyphCount,n=0;n<e.length;n++)e[n]=0;for(var r=0,i=t.runs.length;r<i;r++)for(var s=t.runs[r].glyphs,o=s,h=0,l=s.length;h<l;h++)e[o[h].page]++;for(var u=0,c=e.length;u<c;u++)a.requirePageGlyphs(u,e[u])}},this.requirePageGlyphs=function(t,e){var n=a.idx[t]+20*e,r=a.pageVertices[t];if(r){if(r.length<n){var i=new Array(n);h.Utils.arrayCopy(r,0,i,0,a.idx[t]),a.pageVertices[t]=i}}else a.pageVertices[t]=new Array(n)},this.setPageCount=function(t){var e=new Array(t).fill([]);h.Utils.arrayCopy(a.pageVertices,0,e,0,a.pageVertices.length),a.pageVertices=r(e);var n=new Array(t);h.Utils.arrayCopy(a.idx,0,n,0,a.idx.length),a.idx=n;var i=new Array(t),s=0;null!=a.pageGlyphIndices&&(s=a.pageGlyphIndices.length,h.Utils.arrayCopy(a.pageGlyphIndices,0,i,0,a.pageGlyphIndices.length));for(var o=s;o<t;o++)i[o]=[];a.pageGlyphIndices=i,a.tempGlyphCount=new Array(t)},this.addToCache=function(t,e,n){var r=t.runs.length;if(0!==r){a.pageVertices.length<a.font.regions.length&&a.setPageCount(a.font.regions.length),a.layouts.push(t),a.requireGlyphs(t);var i=t.colors,s=0,h=0,l=0,u=0;a.drawingTexts.length=0;for(var c=0;c<r;c++)for(var f=t.runs[c],d=f.glyphs,v=f.xAdvances,p=e+f.x,g=n+f.y,m=0,y=f.glyphs.length;m<y;m++)l++===h&&(u=o.NumberUtil.intToFloatColor(i[++s]),h=++s<i.length?i[s]:-1),p+=v[m],a.drawingTexts.push(d[m].id),a.addGlyph(d[m],p,g,u);a.currentTint=o.NumberUtil.intToFloatColor(-1)}},this.addGlyph=function(t,e,n,r){var i=a.font.data.scaleX,s=a.font.data.scaleY;e+=t.xoffset*i,n+=t.yoffset*s;var o=t.width*i,h=t.height*s,l=t.u,u=t.u2,c=t.v,f=t.v2;a.integer&&(e=Math.round(e),n=Math.round(n),o=Math.round(o),h=Math.round(h));var d=e+o,v=n+h,p=t.page,g=a.idx[p];a.idx[p]+=20,null!=a.pageGlyphIndices&&a.pageGlyphIndices[p].push(a.glyphCount++);var m=a.pageVertices[p];m[g++]=e,m[g++]=n,m[g++]=r,m[g++]=l,m[g++]=c,m[g++]=e,m[g++]=v,m[g++]=r,m[g++]=l,m[g++]=f,m[g++]=d,m[g++]=v,m[g++]=r,m[g++]=u,m[g++]=f,m[g++]=d,m[g++]=n,m[g++]=r,m[g++]=u,m[g]=c},this.setText=function(t,e,n,r,i,s,o,h,l){return a.clear(),a.addText(t,e,n,r,i,s,o,h,l)},this.setTextToCache=function(t,e,n){a.clear(),a.addTextToCache(t,e,n)},this.addText=function(t,e,n,r,i,s,o,l,u){var c=h.Pools.obtain("GlyphLayout");return a.pooledLayouts.push(c),c.setText(a.font,t,r,i,a.color,s,o,l,u),a.addTextToCache(c,e,n),c},this.addTextToCache=function(t,e,n){a.addToCache(t,e,n+a.font.data.ascent)},this.getX=function(){return a.x},this.getY=function(){return a.y},this.getFont=function(){return a.font},this.setUseIntegerPositions=function(t){a.integer=t},this.usesIntegerPositions=function(){return a.integer},this.getVertices=function(t){return a.pageVertices[t]},this.getVertexCount=function(t){return a.idx[t]},this.getLayouts=function(){return a.layouts},this.font=e,this.integer=n;var l=e.regions.length;if(0===l&&console.log("The specified font must contain at least one texture page."),this.pageVertices=new Array(l).fill([]),this.idx=new Array(l),l>1){this.pageGlyphIndices=new Array(l);for(var u=0,c=this.pageGlyphIndices.length;u<c;u++)this.pageGlyphIndices[u]=[]}this.tempGlyphCount=new Array(l),h.Pools.get("GlyphLayout",(function(){return new s.GlyphLayout(e,"",0,0,h.Color.WHITE,0,h.Align.left,!1)}))}return a(t,[{key:"draw",value:function(t){for(var e=this,n=this.font.getRegions(),r=0;r<this.pageVertices.length;r++)if(this.idx[r]>0)for(var i=this.pageVertices[r],a=function(r){var a=20*r,s=n.find((function(t){var n;return t.id===(null===(n=e.drawingTexts)||void 0===n?void 0:n[r])}));s&&s.draw(t,i[0+a],i[1+a],i[10+a]-i[0+a],i[11+a]-i[1+a])},s=0;s<this.idx[r]/20;s++)a(s)}}]),t}();e.BitmapFontCache=l},2791:function(t,e,n){"use strict";var r=n(861).default,i=n(7061).default,a=n(6690).default,s=n(9728).default,o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function s(t){try{h(r.next(t))}catch(e){a(e)}}function o(t){try{h(r.throw(t))}catch(e){a(e)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}h((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.BitmapFontData=void 0;var h=n(2013),l=n(7139),u=n(859);function c(t,e){for(var n=t.split("/"),r=e.split("/"),i=[],a=0,s=n.length;a<s;a++)if(".."===n[a])i.pop();else{if("."===n[a])continue;i.push(n[a])}for(var o=0,h=r.length;o<h;o++)if(".."===r[o])i.pop();else{if("."===r[o])continue;i.push(r[o])}return i.join("/")}var f=65535,d=function(){function t(e,n){var r=this;a(this,t),this.capHeight=1,this.blankLineScale=1,this.scaleX=1,this.scaleY=1,this.glyphs={},this.xHeight=1,this.xChars=["x","e","a","o","n","s","r","c","u","m","v","w","z"],this.capChars=["M","N","B","D","C","E","F","K","A","G","H","I","J","L","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this.loadFont=function(t){return o(r,void 0,void 0,i().mark((function e(){var n,r,a,s,o,d,p,g,m,y,x,M,w,b,k,T,S,A,C,_,I,E,P,R,F,B,O,L,D,Y,X,U,V,j,N,z,W,G,H,q,J,K,Q,Z,$,tt,et,nt,rt,it,at,st,ot,ht,lt,ut,ct,ft,dt,vt,pt,gt,mt,yt,xt,Mt;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.imagePaths){e.next=2;break}return e.abrupt("return");case 2:return n=0,e.next=5,fetch(this.fontFile);case 5:return a=e.sent,e.next=8,a.text();case 8:if(r=e.sent,s=r.split(/\r?\n/).map((function(t){return t.trim()})),e.prev=10,"string"===typeof(o=s[n])){e.next=14;break}throw new Error("File is empty.");case 14:if(o=o.substring(o.indexOf("padding=")+8),4===(d=o.substring(0,o.indexOf(" ")).split(",",4)).length){e.next=18;break}throw new Error("Invalid padding.");case 18:if(this.padTop=parseInt(d[0]),this.padRight=parseInt(d[1]),this.padBottom=parseInt(d[2]),this.padLeft=parseInt(d[3]),p=this.padTop+this.padBottom,n++,"string"===typeof(o=s[n])){e.next=27;break}throw new Error("Missing common header.");case 27:if(!((g=o.split(" ",9)).length<3)){e.next=30;break}throw new Error("Invalid common header.");case 30:if(g[1].startsWith("lineHeight=")){e.next=32;break}throw new Error("Missing: lineHeight");case 32:if(this.lineHeight=parseInt(g[1].substring(11)),g[2].startsWith("base=")){e.next=35;break}throw new Error("Missing: base");case 35:if(m=parseInt(g[2].substring(5)),y=1,g.length>=6&&null!=g[5]&&g[5].startsWith("pages="))try{y=Math.max(1,parseInt(g[5].substring(6)))}catch(i){}this.imagePaths=new Array(y),x=[],M=0;case 41:if(!(M<y)){e.next=65;break}if(n++,"string"===typeof(o=s[n])){e.next=46;break}throw new Error("Missing additional page definitions.");case 46:if(!((w=o.match(new RegExp(".*id=(\\d+)")))&&w.length>1)){e.next=57;break}if(b=w[1],e.prev=49,parseInt(b)===M){e.next=53;break}throw new Error("Page IDs must be indices starting at 0: "+b);case 53:e.next=57;break;case 55:e.prev=55,e.t0=e.catch(49);case 57:if((k=o.match(new RegExp('.*file="?([^"]+)"?')))&&!(k.length<=1)){e.next=60;break}throw new Error("Missing: file");case 60:T=k[1],x[M]=T;case 62:M++,e.next=41;break;case 65:this.descent=0;case 66:if(n++,o=s[n]){e.next=71;break}return e.abrupt("break",105);case 71:if(!o.startsWith("kernings ")){e.next=73;break}return e.abrupt("break",105);case 73:if(!o.startsWith("metrics ")){e.next=75;break}return e.abrupt("break",105);case 75:if(o.startsWith("char ")){e.next=77;break}return e.abrupt("continue",66);case 77:if(S=new h.Glyph,(A=new v(o,"=")).nextToken(),A.nextToken(),!((C=parseInt(A.nextToken()))>0&&C>f)){e.next=84;break}return e.abrupt("continue",66);case 84:if(S.id=C+"",A.nextToken(),S.srcX=parseInt(A.nextToken()),A.nextToken(),S.srcY=parseInt(A.nextToken()),A.nextToken(),S.width=parseInt(A.nextToken()),A.nextToken(),S.height=parseInt(A.nextToken()),A.nextToken(),S.xoffset=parseInt(A.nextToken()),A.nextToken(),this.flipped?S.yoffset=parseInt(A.nextToken()):S.yoffset=-(S.height+parseInt(A.nextToken())),A.nextToken(),S.xadvance=parseInt(A.nextToken()),A.hasMoreTokens()&&A.nextToken(),A.hasMoreTokens())try{S.page=parseInt(A.nextToken())}catch(wt){}S.width>0&&S.height>0&&(this.descent=Math.min(m+S.yoffset,this.descent)),C<=0?this.missingGlyph=S:C<=f&&this.setGlyph(C,S),e.next=66;break;case 105:this.descent+=this.padBottom;case 106:if(n++,"string"===typeof(o=s[n])){e.next=111;break}return e.abrupt("break",127);case 111:if(o.startsWith("kerning ")){e.next=113;break}return e.abrupt("break",127);case 113:if((_=new v(o,"=")).nextToken(),_.nextToken(),I=parseInt(_.nextToken()),_.nextToken(),E=parseInt(_.nextToken()),!(I<0||I>f||E<0||E>f)){e.next=121;break}return e.abrupt("continue",106);case 121:P=this.getGlyph(I+""),_.nextToken(),R=parseInt(_.nextToken()),P&&P.setKerning(E,R),e.next=106;break;case 127:F=!1,B=0,O=0,L=0,D=0,Y=0,X=0,U=0,null!=o&&o.startsWith("metrics ")&&(F=!0,(V=new v(o,"=")).nextToken(),V.nextToken(),B=parseFloat(V.nextToken()),V.nextToken(),O=parseFloat(V.nextToken()),V.nextToken(),L=parseFloat(V.nextToken()),V.nextToken(),D=parseFloat(V.nextToken()),V.nextToken(),Y=parseFloat(V.nextToken()),V.nextToken(),X=parseFloat(V.nextToken()),V.nextToken(),U=parseFloat(V.nextToken())),(j=this.getGlyph("32"))||((j=new h.Glyph).id="32",(N=this.getGlyph("l"))||(N=this.getFirstGlyph()),j.xadvance=N.xadvance,this.setGlyph(32,j)),0===j.width&&(j.width=this.padLeft+j.xadvance+this.padRight,j.xoffset=-this.padLeft),this.spaceXadvance=j.xadvance,W=0;case 141:if(!(W<this.xChars.length)){e.next=148;break}if(!(z=this.getGlyph(this.xChars[W]))){e.next=145;break}return e.abrupt("break",148);case 145:W++,e.next=141;break;case 148:z||(z=this.getFirstGlyph()),this.xHeight=z.height-p,H=0;case 151:if(!(H<this.capChars.length)){e.next=158;break}if(!(G=this.getGlyph(this.capChars[H]))){e.next=155;break}return e.abrupt("break",158);case 155:H++,e.next=151;break;case 158:if(G){e.next=178;break}q=Object.values(this.glyphs),J=0;case 161:if(!(J<q.length)){e.next=176;break}if(K=q[J]){e.next=165;break}return e.abrupt("continue",173);case 165:Q=0;case 166:if(!(Q<K.length)){e.next=173;break}if(K[Q]&&0!==K[Q].height&&0!==K[Q].width){e.next=169;break}return e.abrupt("continue",170);case 169:this.capHeight=Math.max(this.capHeight,K[Q].height);case 170:Q++,e.next=166;break;case 173:J++,e.next=161;break;case 176:e.next=179;break;case 178:this.capHeight=G.height;case 179:for(this.capHeight-=p,this.ascent=m-this.capHeight,this.down=-this.lineHeight,this.flipped&&(this.ascent=-this.ascent,this.down=-this.down),F&&(this.ascent=B,this.descent=O,this.down=L,this.capHeight=D,this.lineHeight=Y,this.spaceXadvance=X,this.xHeight=U),Z=[],$=Object.values(this.glyphs),tt=0;tt<$.length;tt++)for(et=Object.values($[tt]),nt=0;nt<et.length;nt++)rt={id:et[nt].id,left:et[nt].srcX,top:et[nt].srcY,width:et[nt].width,height:et[nt].height,xoffset:et[nt].xoffset,yoffset:et[nt].yoffset,xadvance:et[nt].xadvance,page:x[et[nt].page],pageId:et[nt].page},Z.push(rt);it=[],at=0;case 189:if(!(at<y)){e.next=199;break}return e.next=192,l.Texture.load(t,c(this.fontFile,"../".concat(x[at])));case 192:st=e.sent,ot=1/st.width,ht=1/st.height,it.push({texture:st,invTexWidth:ot,invTexHeight:ht});case 196:at++,e.next=189;break;case 199:for(this.regions=[],lt=0,ut=Z;lt<ut.length;lt++)ct=ut[lt],ft=ct.left,dt=ct.top,vt=ct.width,pt=ct.height,gt=it[ct.pageId],mt=gt.texture,yt=gt.invTexWidth,xt=gt.invTexHeight,(Mt=new u.TextureRegion(mt,ft,dt,vt,pt,ct,yt,xt)).originalWidth=vt,Mt.originalHeight=pt,Mt.offsetX=0,Mt.offsetY=0,this.regions.push(Mt);e.next=206;break;case 203:e.prev=203,e.t1=e.catch(10),console.error(e.t1);case 206:case"end":return e.stop()}}),e,this,[[10,203],[49,55]])})))},this.setGlyphRegion=function(t,e){var n=e.texture,i=1/n.width,a=1/n.height,s=e.u,o=e.v,h=(e.originalWidth,e.originalHeight,t.srcX),l=t.srcX+t.width,u=t.srcY,c=t.srcY+t.height;t.u=s+h*i,t.u2=s+l*i,r.flipped?(t.v=o+u*a,t.v2=o+c*a):(t.v2=o+u*a,t.v=o+c*a)},this.setLineHeight=function(t){r.lineHeight=t*r.scaleY,r.down=r.flipped?r.lineHeight:-r.lineHeight},this.setGlyph=function(t,e){var n=r.glyphs[t/h.PAGE_SIZE];n||(n=new Array(h.PAGE_SIZE),r.glyphs[t/h.PAGE_SIZE]=n),n[t&h.PAGE_SIZE-1]=e},this.getFirstGlyph=function(){for(var t=Object.values(r.glyphs),e=0;e<t.length;e++){var n=t[e];if(n)for(var i=0;i<n.length;i++){var a=n[i];if(a&&0!==a.height&&0!==a.width)return a}}},this.hasGlyph=function(t){return!!r.missingGlyph||null!=r.getGlyph(t)},this.getGlyph=function(t){var e=r.glyphs[t.charCodeAt(0)/h.PAGE_SIZE];if(null!=e)return e[t.charCodeAt(0)&h.PAGE_SIZE-1]},this.getGlyphs=function(t,e,n,i,a){if(0!==i-n){var s=r.markupEnabled,o=r.scaleX,h=t.glyphs,l=t.xAdvances;do{var u=e.charAt(n++);if("\r"!==u){var c=r.getGlyph(u);if(!c){if(!r.missingGlyph)continue;c=r.missingGlyph}h.push(c),l.push(a?(a.xadvance+a.getKerning(u))*o:c.fixedWidth?0:-c.xoffset*o-r.padLeft),a=c,s&&"["===u&&n<i&&"["===e.charAt(n)&&n++}}while(n<i);if(a){var f=a.fixedWidth?a.xadvance*o:(a.width+a.xoffset)*o-r.padRight;l.push(f)}}},this.getWrapIndex=function(t,e){var n=e-1,i=t,a=i[n].id;if(r.isWhitespace(a+""))return n;for(r.isBreakChar(a+"")&&n--;n>0;n--)if(a=i[n].id,r.isWhitespace(a+"")||r.isBreakChar(a+""))return n+1;return 0},this.isBreakChar=function(t){if(!r.breakChars)return!1;for(var e=String.fromCharCode(parseInt(t)),n=0;n<r.breakChars.length;n++)if(e===r.breakChars[n])return!0;return!1},this.isWhitespace=function(t){switch(String.fromCharCode(parseInt(t))){case"\n":case"\r":case"\t":case" ":return!0;default:return!1}},this.getImagePath=function(t){return r.imagePaths[t]},this.getImagePaths=function(){return r.imagePaths},this.setScale=function(t,e){if(0!==t&&0!==e){var n=t/r.scaleX,i=e/r.scaleY;r.lineHeight*=i,r.spaceXadvance*=n,r.xHeight*=i,r.capHeight*=i,r.ascent*=i,r.descent*=i,r.down*=i,r.padLeft*=n,r.padRight*=n,r.padTop*=i,r.padBottom*=i,r.scaleX=t,r.scaleY=e}},this.scale=function(t){r.setScale(r.scaleX+t,r.scaleY+t)},this.fontFile=e,this.flipped=n}return s(t,[{key:"setXYScale",value:function(t){this.setScale(t,t)}}]),t}();e.BitmapFontData=d;var v=function(){function t(e,n){a(this,t),this.strArray=[],this.currentIndex=0;for(var i=e.split(/\s+/),s=0;s<i.length;s++){var o,h=i[s];(o=this.strArray).push.apply(o,r(h.split(n)))}}return s(t,[{key:"hasMoreTokens",value:function(){return this.currentIndex>=this.strArray.length}},{key:"nextToken",value:function(){return this.strArray[this.currentIndex++]}}]),t}()},5477:function(t,e,n){"use strict";var r=n(4704).default,i=n(6690).default,a=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.BoundingBox=void 0;var s=n(7811),o=function(){function t(){i(this,t),this.min=new s.Vector3,this.max=new s.Vector3,this.cnt=new s.Vector3,this.dim=new s.Vector3,this.clr()}return a(t,[{key:"getCenter",value:function(t){return t.setFrom(this.cnt)}},{key:"getCenterX",value:function(){return this.cnt.x}},{key:"getCenterY",value:function(){return this.cnt.y}},{key:"getCenterZ",value:function(){return this.cnt.z}},{key:"getCorner000",value:function(t){return t.set(this.min.x,this.min.y,this.min.z)}},{key:"getCorner001",value:function(t){return t.set(this.min.x,this.min.y,this.max.z)}},{key:"getCorner010",value:function(t){return t.set(this.min.x,this.max.y,this.min.z)}},{key:"getCorner011",value:function(t){return t.set(this.min.x,this.max.y,this.max.z)}},{key:"getCorner100",value:function(t){return t.set(this.max.x,this.min.y,this.min.z)}},{key:"getCorner101",value:function(t){return t.set(this.max.x,this.min.y,this.max.z)}},{key:"getCorner110",value:function(t){return t.set(this.max.x,this.max.y,this.min.z)}},{key:"getCorner111",value:function(t){return t.set(this.max.x,this.max.y,this.max.z)}},{key:"getDimensions",value:function(t){return t.setFrom(this.dim)}},{key:"getWidth",value:function(){return this.dim.x}},{key:"getHeight",value:function(){return this.dim.y}},{key:"getDepth",value:function(){return this.dim.z}},{key:"getMin",value:function(t){return t.setFrom(this.min)}},{key:"getMax",value:function(t){return t.setFrom(this.max)}},{key:"setFromBounds",value:function(t){return this.set(t.min,t.max)}},{key:"set",value:function(t,e){return this.min.set(t.x<e.x?t.x:e.x,t.y<e.y?t.y:e.y,t.z<e.z?t.z:e.z),this.max.set(t.x>e.x?t.x:e.x,t.y>e.y?t.y:e.y,t.z>e.z?t.z:e.z),this.update(),this}},{key:"update",value:function(){this.cnt.setFrom(this.min).add(this.max).scale(.5),this.dim.setFrom(this.max).sub(this.min)}},{key:"setFromPoints",value:function(t){this.inf();var e,n=r(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.extPoint(i)}}catch(a){n.e(a)}finally{n.f()}return this}},{key:"inf",value:function(){return this.min.set(1/0,1/0,1/0),this.max.set(-1/0,-1/0,-1/0),this.cnt.set(0,0,0),this.dim.set(0,0,0),this}},{key:"extPoint",value:function(t){return this.set(this.min.set(Math.min(this.min.x,t.x),Math.min(this.min.y,t.y),Math.min(this.min.z,t.z)),this.max.set(Math.max(this.max.x,t.x),Math.max(this.max.y,t.y),Math.max(this.max.z,t.z)))}},{key:"clr",value:function(){return this.set(this.min.set(0,0,0),this.max.set(0,0,0))}},{key:"isValid",value:function(){return this.min.x<=this.max.x&&this.min.y<=this.max.y&&this.min.z<=this.max.z}},{key:"extBounds",value:function(t){return this.set(this.min.set(Math.min(this.min.x,t.min.x),Math.min(this.min.y,t.min.y),Math.min(this.min.z,t.min.z)),this.max.set(Math.max(this.max.x,t.max.x),Math.max(this.max.y,t.max.y),Math.max(this.max.z,t.max.z)))}},{key:"extSphere",value:function(t,e){return this.set(this.min.set(Math.min(this.min.x,t.x-e),Math.min(this.min.y,t.y-e),Math.min(this.min.z,t.z-e)),this.max.set(Math.max(this.max.x,t.x+e),Math.max(this.max.y,t.y+e),Math.max(this.max.z,t.z+e)))}},{key:"extTransformedBox",value:function(e,n){return this.extPoint(t.tmpVector.set(e.min.x,e.min.y,e.min.z).multiply(n)),this.extPoint(t.tmpVector.set(e.min.x,e.min.y,e.max.z).multiply(n)),this.extPoint(t.tmpVector.set(e.min.x,e.max.y,e.min.z).multiply(n)),this.extPoint(t.tmpVector.set(e.min.x,e.max.y,e.max.z).multiply(n)),this.extPoint(t.tmpVector.set(e.max.x,e.min.y,e.min.z).multiply(n)),this.extPoint(t.tmpVector.set(e.max.x,e.min.y,e.max.z).multiply(n)),this.extPoint(t.tmpVector.set(e.max.x,e.max.y,e.min.z).multiply(n)),this.extPoint(t.tmpVector.set(e.max.x,e.max.y,e.max.z).multiply(n)),this}},{key:"mul",value:function(e){var n=this.min.x,r=this.min.y,i=this.min.z,a=this.max.x,s=this.max.y,o=this.max.z;return this.inf(),this.extPoint(t.tmpVector.set(n,r,i).multiply(e)),this.extPoint(t.tmpVector.set(n,r,o).multiply(e)),this.extPoint(t.tmpVector.set(n,s,i).multiply(e)),this.extPoint(t.tmpVector.set(n,s,o).multiply(e)),this.extPoint(t.tmpVector.set(a,r,i).multiply(e)),this.extPoint(t.tmpVector.set(a,r,o).multiply(e)),this.extPoint(t.tmpVector.set(a,s,i).multiply(e)),this.extPoint(t.tmpVector.set(a,s,o).multiply(e)),this}},{key:"containsBounds",value:function(t){return!this.isValid()||this.min.x<=t.min.x&&this.min.y<=t.min.y&&this.min.z<=t.min.z&&this.max.x>=t.max.x&&this.max.y>=t.max.y&&this.max.z>=t.max.z}},{key:"intersects",value:function(t){if(!this.isValid())return!1;var e=Math.abs(this.cnt.x-t.cnt.x),n=this.dim.x/2+t.dim.x/2,r=Math.abs(this.cnt.y-t.cnt.y),i=this.dim.y/2+t.dim.y/2,a=Math.abs(this.cnt.z-t.cnt.z),s=this.dim.z/2+t.dim.z/2;return e<=n&&r<=i&&a<=s}},{key:"containsPoint",value:function(t){return this.min.x<=t.x&&this.max.x>=t.x&&this.min.y<=t.y&&this.max.y>=t.y&&this.min.z<=t.z&&this.max.z>=t.z}},{key:"ext",value:function(t,e,n){return this.set(this.min.set(Math.min(this.min.x,t),Math.min(this.min.y,e),Math.min(this.min.z,n)),this.max.set(Math.max(this.max.x,t),Math.max(this.max.y,e),Math.max(this.max.z,n)))}}]),t}();e.BoundingBox=o,o.tmpVector=new s.Vector3},7459:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.OrthoCamera=void 0;var a=n(4995),s=n(7811),o=function(){function t(e,n,i,o){r(this,t),this.position=new s.Vector3(0,0,0),this.direction=new s.Vector3(0,0,-1),this.up=new s.Vector3(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new a.Matrix4,this.inverseProjectionView=new a.Matrix4,this.projection=new a.Matrix4,this.view=new a.Matrix4,this.tmp3=new s.Vector3,this.resize(e,n,i,o)}return i(t,[{key:"setYDown",value:function(t){t?(this.up.set(0,-1,0),this.direction.set(0,0,1)):(this.up.set(0,1,0),this.direction.set(0,0,-1)),this.update()}},{key:"resize",value:function(t,e,n,r){this.viewportWidth=t,this.viewportHeight=e,this.screenWidth=n,this.screenHeight=r,this.update()}},{key:"setPosition",value:function(t,e){this.position.set(t,e,this.position.z)}},{key:"update",value:function(){var t=this.projection,e=this.view,n=this.projectionView,r=this.inverseProjectionView,i=this.zoom,a=this.viewportWidth,s=this.viewportHeight;t.ortho(i*(-a/2),i*(a/2),i*(-s/2),i*(s/2),this.near,this.far),e.lookAt(this.position,this.direction,this.up),n.set(t.values),n.multiply(e),r.set(n.values).invert(),this.combined=n.values}},{key:"screenToWorld",value:function(t,e,n){e=e||this.screenWidth,n=n||this.screenHeight;var r=t.x,i=n-t.y-1;return t.x=2*r/e-1,t.y=2*i/n-1,t.z=2*t.z-1,t.project(this.inverseProjectionView),t}},{key:"worldToScreen",value:function(t,e,n){return e=e||this.screenWidth,n=n||this.screenHeight,t.project(this.projectionView),t.x=e*(t.x+1)/2,t.y=n*(t.y+1)/2,t.z=(t.z+1)/2,t}},{key:"unprojectVector2",value:function(t,e){this.tmp3.set(e.x,e.y,0),this.screenToWorld(this.tmp3),t.set(this.tmp3.x,this.tmp3.y)}},{key:"setViewport",value:function(t,e){this.viewportWidth=t,this.viewportHeight=e}}]),t}();e.OrthoCamera=o},6176:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Game=void 0;var a=function(){function t(){r(this,t)}return i(t,[{key:"setScreen",value:function(t){this.currentScreen&&this.currentScreen.dispose&&this.currentScreen.dispose(),this.currentScreen=t,this.currentScreen&&this.currentScreen.init&&this.currentScreen.init(this)}},{key:"update",value:function(t){this.currentScreen&&this.currentScreen.update&&this.currentScreen.update(t,this)}}]),t}();e.Game=a,a.shared=new a},2013:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Glyph=e.PAGES=e.PAGE_SIZE=e.LOG2_PAGE_SIZE=void 0,e.LOG2_PAGE_SIZE=9,e.PAGE_SIZE=1<<e.LOG2_PAGE_SIZE,e.PAGES=65536/e.PAGE_SIZE;var a=function(){function t(){r(this,t),this.page=0}return i(t,[{key:"getKerning",value:function(t){if(this.kerning){var n=this.kerning[t.charCodeAt(0)>>>e.LOG2_PAGE_SIZE];if(null!=n)return n[t.charCodeAt(0)&e.PAGE_SIZE-1]}return 0}},{key:"setKerning",value:function(t,n){this.kerning||(this.kerning=[]);var r=this.kerning[t>>>e.LOG2_PAGE_SIZE];r||(this.kerning[t>>>e.LOG2_PAGE_SIZE]=r=new Uint32Array(new ArrayBuffer(e.PAGE_SIZE))),r[t&e.PAGE_SIZE-1]=n}}]),t}();e.Glyph=a},7712:function(t,e,n){"use strict";var r=n(861).default,i=n(6690).default,a=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.GlyphLayout=void 0;var s=n(9045),o=n(8606),h=function(){function t(e,n,a,h,l,u,c,f,d){var v=this;i(this,t),this.epsilon=1e-4,this.glyphRunPool=o.Pools.get("GlyphRun",(function(){return new s.GlyphRun})),this.colorStack=new Array(4),this.runs=[],this.colors=[],this.setText=function(t,e,n,r,i,a,s,o,h){v.reset();var l=t.data;if(n!==r){o&&(a=Math.max(a,3*l.spaceXadvance));var u=o||null!=h,c=i.toIntBits(),f=c;v.colors.shift();var d=l.markupEnabled;d&&v.colorStack.push(c);for(var p=!1,g=0,m=l.down,y=null,x=null,M=n;;){var w=void 0,b=!1;if(n===r){if(M===r)break;w=r,p=!0}else{if("\n"!==e.charAt(n++))continue;w=n-1,b=!0}t:{var k=v.glyphRunPool.obtain();if(k.x=0,k.y=g,l.getGlyphs(k,e,M,w,x),v.glyphCount+=k.glyphs.length,f!==c&&(v.colors[v.colors.length-2]===v.glyphCount?v.colors[v.colors.length-1]=f:(v.colors.push(v.glyphCount),v.colors.push(f)),c=f),0===k.glyphs.length){if(v.glyphRunPool.free(k),!y)break}else y?(y.appendRun(k),v.glyphRunPool.free(k)):(y=k,v.runs.push(y));if(b||p?(v.setLastGlyphXAdvance(l,y),x=null):x=y.glyphs[y.glyphs.length-1],u&&0!==y.glyphs.length&&(b||p))for(var T=y.xAdvances[0]+y.xAdvances[1],S=2;S<y.xAdvances.length;S++){var A=y.glyphs[S-1];if(T+v.getGlyphWidth(A,l)-v.epsilon<=a)T+=y.xAdvances[S];else{if(null!=h){v.truncate(l,y,a,h);break}var C=l.getWrapIndex(y.glyphs,S);if((0===C&&0===y.x||C>=y.glyphs.length)&&(C=S-1),!(y=v.wrap(l,y,C)))break t;v.runs.push(y),g+=m,y.x=0,y.y=g,T=y.xAdvances[0]+y.xAdvances[1],S=1}}}b&&(y=null,x=null,g+=w===M?m*l.blankLineScale:m),M=n}v.height=l.capHeight+Math.abs(g),v.calculateWidths(l),v.alignRuns(a,s),d&&(v.colorStack.length=0)}else v.height=l.capHeight},this.calculateWidths=function(t){for(var e,n=0,i=r(v.runs),a=0,s=v.runs.length;a<s;a++){for(var o=i[a],h=o.xAdvances,l=o.x+h[0],u=0,c=o.glyphs,f=0;f<o.glyphs.length;){var d=c[f],p=v.getGlyphWidth(d,t);u=Math.max(u,l+p),l+=null!==(e=h[++f])&&void 0!==e?e:0}o.width=Math.max(l,u)-o.x,n=Math.max(n,o.x+(isNaN(o.width)?l:o.width))}v.width=n},this.alignRuns=function(t,e){if(0===(e&o.Align.left))for(var n=0!==(e&o.Align.center),i=r(v.runs),a=0,s=v.runs.length;a<s;a++){var h=i[a];h.x+=n?.5*(t-h.width):t-h.width}},this.truncate=function(t,e,n,r){var i=e.glyphs.length,a=v.glyphRunPool.obtain();t.getGlyphs(a,r,0,r.length,null);var s=0;if(a.xAdvances.length>0){v.setLastGlyphXAdvance(t,a);for(var h=a.xAdvances,l=1;l<a.xAdvances.length;l++)s+=h[l]}n-=s;for(var u=0,c=e.x,f=e.xAdvances;u<e.xAdvances.length;){if((c+=f[u])>n)break;u++}if(u>1){if(u-1>=0&&e.glyphs.length>u-1)for(var d=u-1;d<e.glyphs.length;d++)e.glyphs.splice(d,1);if(u>=0&&e.xAdvances.length>u)for(var p=u;p<e.xAdvances.length;p++)e.xAdvances.splice(p,1);v.setLastGlyphXAdvance(t,e),a.xAdvances.length>0&&o.Utils.arrayCopy(a.xAdvances,1,e.xAdvances,e.xAdvances.length,a.xAdvances.length-1)}else e.glyphs.length=0,e.xAdvances.length=0,o.Utils.arrayCopy(a.xAdvances,0,e.xAdvances,e.xAdvances.length,a.xAdvances.length);var g=i-e.glyphs.length;if(g>0&&(v.glyphCount-=g,t.markupEnabled))for(;v.colors.length>2&&v.colors[v.colors.length-2]>=v.glyphCount;)v.colors.length-=2;o.Utils.arrayCopy(a.glyphs,0,e.glyphs,e.glyphs.length,a.glyphs.length),v.glyphCount+=r.length,v.glyphRunPool.free(a)},this.setLastGlyphXAdvance=function(t,e){var n=e.glyphs[e.glyphs.length-1];n.fixedWidth||(e.xAdvances[e.xAdvances.length-1]=v.getGlyphWidth(n,t))},this.getGlyphWidth=function(t,e){return(t.width+t.xoffset)*e.scaleX-e.padRight},this.getLineOffset=function(t,e){return-t[0].xoffset*e.scaleX-e.padLeft},this.reset=function(){v.glyphRunPool.freeAll(v.runs),v.runs.length=0,v.colors.length=0,v.glyphCount=0,v.width=0,v.height=0},this.setText(e,n,a,h,l,u,c,f,d)}return a(t,[{key:"wrap",value:function(t,e,n){for(var r=e.glyphs.length,i=e.glyphs,a=e.xAdvances,s=n;s>0&&t.isWhitespace(i[s-1].id);s--);for(var h,l=n;l<r&&t.isWhitespace(i[l].id);l++);if(l<r){var u=(h=this.glyphRunPool.obtain()).glyphs;o.Utils.arrayCopy(i,0,u,u.length,s),i.splice(0,l-1+1),e.glyphs=u,h.glyphs=i;var c=h.xAdvances;o.Utils.arrayCopy(a,0,c,c.length,s+1),a.splice(1,l),a[0]=this.getLineOffset(i,t),e.xAdvances=c,h.xAdvances=a;var f=e.glyphs.length,d=h.glyphs.length,v=r-f-d;if(this.glyphCount-=v,t.markupEnabled&&v>0)for(var p=this.glyphCount-d,g=this.colors.length-2;g>=2;g-=2){var m=this.colors[g];if(m<=p)break;this.colors[g]=m-v}}else{i=i.slice(0,s),a=a.slice(0,s+1);var y=l-s;if(y>0&&(this.glyphCount-=y,t.markupEnabled&&this.colors[this.colors.length-2]>this.glyphCount)){for(var x=this.colors[this.colors.length-1];this.colors[this.colors.length-2]>this.glyphCount;)this.colors.length-=2;this.colors[this.colors.length-2]=this.glyphCount,this.colors[this.colors.length-1]=x}}return 0===s?(this.glyphRunPool.free(e),this.runs.pop()):this.setLastGlyphXAdvance(t,e),h}}]),t}();e.GlyphLayout=h},9045:function(t,e,n){"use strict";var r=n(9728).default,i=n(6690).default;Object.defineProperty(e,"__esModule",{value:!0}),e.GlyphRun=void 0;var a=r((function t(){var e=this;i(this,t),this.glyphs=[],this.xAdvances=[],this.appendRun=function(t){e.glyphs.concat(t.glyphs),e.xAdvances.length||e.xAdvances.length--,e.xAdvances.concat(t.xAdvances)},this.reset=function(){e.glyphs.length=0,e.xAdvances.length=0}}));e.GlyphRun=a},6964:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.InputHandler=e.InputEvent=void 0;var a=n(8041),s=n(2283);!function(t){t.TouchStart="touchStart",t.TouchEnd="touchEnd",t.TouchMove="touchMove"}(e.InputEvent||(e.InputEvent={}));var o=function(){function t(e){var n=this;r(this,t),this.screenCoord=new s.Vector2,this.worldCoord=new s.Vector2,this.canvas=e,this.lastX=0,this.lastY=0,this.touched=!1;var i=this.emitter=new a.EventEmitter;this.mouseDownHandler=function(t){n.touched=!0,n.handleMove(t),i.emit("touchStart",n.getX(),n.getY())},this.mouseUpHandler=function(t){n.touched=!1,i.emit("touchEnd",n.getX(),n.getY())},this.mouseMoveHandler=function(t){n.handleMove(t),i.emit("touchMove",n.getX(),n.getY())},this.touchStartHandler=function(t){t.preventDefault();var e=t.touches[0];n.canvas.dispatchEvent(new MouseEvent("mousedown",{clientX:e.clientX,clientY:e.clientY}))},this.touchEndHandler=function(t){t.preventDefault(),n.canvas.dispatchEvent(new MouseEvent("mouseup"))},this.touchMoveHandler=function(t){t.preventDefault();var e=t.touches[0];n.canvas.dispatchEvent(new MouseEvent("mousemove",{clientX:e.clientX,clientY:e.clientY}))},this.canvas.addEventListener("mousedown",this.mouseDownHandler,!1),this.canvas.addEventListener("mouseup",this.mouseUpHandler,!1),this.canvas.addEventListener("mousemove",this.mouseMoveHandler,!1),this.canvas.addEventListener("touchstart",this.touchStartHandler,!1),this.canvas.addEventListener("touchend",this.touchEndHandler,!1),this.canvas.addEventListener("touchmove",this.touchMoveHandler,!1)}return i(t,[{key:"cleanup",value:function(){this.canvas.removeEventListener("mousedown",this.mouseDownHandler),this.canvas.removeEventListener("mouseup",this.mouseUpHandler),this.canvas.removeEventListener("mousemove",this.mouseMoveHandler),this.canvas.removeEventListener("touchstart",this.touchStartHandler),this.canvas.removeEventListener("touchend",this.touchEndHandler),this.canvas.removeEventListener("touchmove",this.touchMoveHandler)}},{key:"addEventListener",value:function(t,e){this.emitter.addListener(t,e)}},{key:"handleMove",value:function(t){var e=this.canvas.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top;this.lastX=n,this.lastY=r}},{key:"getX",value:function(){return this.lastX}},{key:"getY",value:function(){return this.lastY}},{key:"isTouched",value:function(){return this.touched}},{key:"getTouchedWorldCoord",value:function(t){return this.screenCoord.set(this.getX(),this.getY()),t.unprojectVector2(this.worldCoord,this.screenCoord),this.worldCoord}}]),t}();e.InputHandler=o},4995:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix4=e.M33=e.M32=e.M31=e.M30=e.M23=e.M22=e.M21=e.M20=e.M13=e.M12=e.M11=e.M10=e.M03=e.M02=e.M01=e.M00=void 0;var a=n(7811);e.M00=0,e.M01=4,e.M02=8,e.M03=12,e.M10=1,e.M11=5,e.M12=9,e.M13=13,e.M20=2,e.M21=6,e.M22=10,e.M23=14,e.M30=3,e.M31=7,e.M32=11,e.M33=15;var s=function(){function t(){r(this,t),this.temp=new Float32Array(16),this.values=new Float32Array(16);var n=this.values;n[e.M00]=1,n[e.M11]=1,n[e.M22]=1,n[e.M33]=1}return i(t,[{key:"set",value:function(t){return this.values.set(t),this}},{key:"transpose",value:function(){var t=this.temp,n=this.values;return t[e.M00]=n[e.M00],t[e.M01]=n[e.M10],t[e.M02]=n[e.M20],t[e.M03]=n[e.M30],t[e.M10]=n[e.M01],t[e.M11]=n[e.M11],t[e.M12]=n[e.M21],t[e.M13]=n[e.M31],t[e.M20]=n[e.M02],t[e.M21]=n[e.M12],t[e.M22]=n[e.M22],t[e.M23]=n[e.M32],t[e.M30]=n[e.M03],t[e.M31]=n[e.M13],t[e.M32]=n[e.M23],t[e.M33]=n[e.M33],this.set(t)}},{key:"identity",value:function(){var t=this.values;return t[e.M00]=1,t[e.M01]=0,t[e.M02]=0,t[e.M03]=0,t[e.M10]=0,t[e.M11]=1,t[e.M12]=0,t[e.M13]=0,t[e.M20]=0,t[e.M21]=0,t[e.M22]=1,t[e.M23]=0,t[e.M30]=0,t[e.M31]=0,t[e.M32]=0,t[e.M33]=1,this}},{key:"invert",value:function(){var t=this.values,n=this.temp,r=t[e.M30]*t[e.M21]*t[e.M12]*t[e.M03]-t[e.M20]*t[e.M31]*t[e.M12]*t[e.M03]-t[e.M30]*t[e.M11]*t[e.M22]*t[e.M03]+t[e.M10]*t[e.M31]*t[e.M22]*t[e.M03]+t[e.M20]*t[e.M11]*t[e.M32]*t[e.M03]-t[e.M10]*t[e.M21]*t[e.M32]*t[e.M03]-t[e.M30]*t[e.M21]*t[e.M02]*t[e.M13]+t[e.M20]*t[e.M31]*t[e.M02]*t[e.M13]+t[e.M30]*t[e.M01]*t[e.M22]*t[e.M13]-t[e.M00]*t[e.M31]*t[e.M22]*t[e.M13]-t[e.M20]*t[e.M01]*t[e.M32]*t[e.M13]+t[e.M00]*t[e.M21]*t[e.M32]*t[e.M13]+t[e.M30]*t[e.M11]*t[e.M02]*t[e.M23]-t[e.M10]*t[e.M31]*t[e.M02]*t[e.M23]-t[e.M30]*t[e.M01]*t[e.M12]*t[e.M23]+t[e.M00]*t[e.M31]*t[e.M12]*t[e.M23]+t[e.M10]*t[e.M01]*t[e.M32]*t[e.M23]-t[e.M00]*t[e.M11]*t[e.M32]*t[e.M23]-t[e.M20]*t[e.M11]*t[e.M02]*t[e.M33]+t[e.M10]*t[e.M21]*t[e.M02]*t[e.M33]+t[e.M20]*t[e.M01]*t[e.M12]*t[e.M33]-t[e.M00]*t[e.M21]*t[e.M12]*t[e.M33]-t[e.M10]*t[e.M01]*t[e.M22]*t[e.M33]+t[e.M00]*t[e.M11]*t[e.M22]*t[e.M33];if(0===r)throw new Error("non-invertible matrix");var i=1/r;return n[e.M00]=t[e.M12]*t[e.M23]*t[e.M31]-t[e.M13]*t[e.M22]*t[e.M31]+t[e.M13]*t[e.M21]*t[e.M32]-t[e.M11]*t[e.M23]*t[e.M32]-t[e.M12]*t[e.M21]*t[e.M33]+t[e.M11]*t[e.M22]*t[e.M33],n[e.M01]=t[e.M03]*t[e.M22]*t[e.M31]-t[e.M02]*t[e.M23]*t[e.M31]-t[e.M03]*t[e.M21]*t[e.M32]+t[e.M01]*t[e.M23]*t[e.M32]+t[e.M02]*t[e.M21]*t[e.M33]-t[e.M01]*t[e.M22]*t[e.M33],n[e.M02]=t[e.M02]*t[e.M13]*t[e.M31]-t[e.M03]*t[e.M12]*t[e.M31]+t[e.M03]*t[e.M11]*t[e.M32]-t[e.M01]*t[e.M13]*t[e.M32]-t[e.M02]*t[e.M11]*t[e.M33]+t[e.M01]*t[e.M12]*t[e.M33],n[e.M03]=t[e.M03]*t[e.M12]*t[e.M21]-t[e.M02]*t[e.M13]*t[e.M21]-t[e.M03]*t[e.M11]*t[e.M22]+t[e.M01]*t[e.M13]*t[e.M22]+t[e.M02]*t[e.M11]*t[e.M23]-t[e.M01]*t[e.M12]*t[e.M23],n[e.M10]=t[e.M13]*t[e.M22]*t[e.M30]-t[e.M12]*t[e.M23]*t[e.M30]-t[e.M13]*t[e.M20]*t[e.M32]+t[e.M10]*t[e.M23]*t[e.M32]+t[e.M12]*t[e.M20]*t[e.M33]-t[e.M10]*t[e.M22]*t[e.M33],n[e.M11]=t[e.M02]*t[e.M23]*t[e.M30]-t[e.M03]*t[e.M22]*t[e.M30]+t[e.M03]*t[e.M20]*t[e.M32]-t[e.M00]*t[e.M23]*t[e.M32]-t[e.M02]*t[e.M20]*t[e.M33]+t[e.M00]*t[e.M22]*t[e.M33],n[e.M12]=t[e.M03]*t[e.M12]*t[e.M30]-t[e.M02]*t[e.M13]*t[e.M30]-t[e.M03]*t[e.M10]*t[e.M32]+t[e.M00]*t[e.M13]*t[e.M32]+t[e.M02]*t[e.M10]*t[e.M33]-t[e.M00]*t[e.M12]*t[e.M33],n[e.M13]=t[e.M02]*t[e.M13]*t[e.M20]-t[e.M03]*t[e.M12]*t[e.M20]+t[e.M03]*t[e.M10]*t[e.M22]-t[e.M00]*t[e.M13]*t[e.M22]-t[e.M02]*t[e.M10]*t[e.M23]+t[e.M00]*t[e.M12]*t[e.M23],n[e.M20]=t[e.M11]*t[e.M23]*t[e.M30]-t[e.M13]*t[e.M21]*t[e.M30]+t[e.M13]*t[e.M20]*t[e.M31]-t[e.M10]*t[e.M23]*t[e.M31]-t[e.M11]*t[e.M20]*t[e.M33]+t[e.M10]*t[e.M21]*t[e.M33],n[e.M21]=t[e.M03]*t[e.M21]*t[e.M30]-t[e.M01]*t[e.M23]*t[e.M30]-t[e.M03]*t[e.M20]*t[e.M31]+t[e.M00]*t[e.M23]*t[e.M31]+t[e.M01]*t[e.M20]*t[e.M33]-t[e.M00]*t[e.M21]*t[e.M33],n[e.M22]=t[e.M01]*t[e.M13]*t[e.M30]-t[e.M03]*t[e.M11]*t[e.M30]+t[e.M03]*t[e.M10]*t[e.M31]-t[e.M00]*t[e.M13]*t[e.M31]-t[e.M01]*t[e.M10]*t[e.M33]+t[e.M00]*t[e.M11]*t[e.M33],n[e.M23]=t[e.M03]*t[e.M11]*t[e.M20]-t[e.M01]*t[e.M13]*t[e.M20]-t[e.M03]*t[e.M10]*t[e.M21]+t[e.M00]*t[e.M13]*t[e.M21]+t[e.M01]*t[e.M10]*t[e.M23]-t[e.M00]*t[e.M11]*t[e.M23],n[e.M30]=t[e.M12]*t[e.M21]*t[e.M30]-t[e.M11]*t[e.M22]*t[e.M30]-t[e.M12]*t[e.M20]*t[e.M31]+t[e.M10]*t[e.M22]*t[e.M31]+t[e.M11]*t[e.M20]*t[e.M32]-t[e.M10]*t[e.M21]*t[e.M32],n[e.M31]=t[e.M01]*t[e.M22]*t[e.M30]-t[e.M02]*t[e.M21]*t[e.M30]+t[e.M02]*t[e.M20]*t[e.M31]-t[e.M00]*t[e.M22]*t[e.M31]-t[e.M01]*t[e.M20]*t[e.M32]+t[e.M00]*t[e.M21]*t[e.M32],n[e.M32]=t[e.M02]*t[e.M11]*t[e.M30]-t[e.M01]*t[e.M12]*t[e.M30]-t[e.M02]*t[e.M10]*t[e.M31]+t[e.M00]*t[e.M12]*t[e.M31]+t[e.M01]*t[e.M10]*t[e.M32]-t[e.M00]*t[e.M11]*t[e.M32],n[e.M33]=t[e.M01]*t[e.M12]*t[e.M20]-t[e.M02]*t[e.M11]*t[e.M20]+t[e.M02]*t[e.M10]*t[e.M21]-t[e.M00]*t[e.M12]*t[e.M21]-t[e.M01]*t[e.M10]*t[e.M22]+t[e.M00]*t[e.M11]*t[e.M22],t[e.M00]=n[e.M00]*i,t[e.M01]=n[e.M01]*i,t[e.M02]=n[e.M02]*i,t[e.M03]=n[e.M03]*i,t[e.M10]=n[e.M10]*i,t[e.M11]=n[e.M11]*i,t[e.M12]=n[e.M12]*i,t[e.M13]=n[e.M13]*i,t[e.M20]=n[e.M20]*i,t[e.M21]=n[e.M21]*i,t[e.M22]=n[e.M22]*i,t[e.M23]=n[e.M23]*i,t[e.M30]=n[e.M30]*i,t[e.M31]=n[e.M31]*i,t[e.M32]=n[e.M32]*i,t[e.M33]=n[e.M33]*i,this}},{key:"determinant",value:function(){var t=this.values;return t[e.M30]*t[e.M21]*t[e.M12]*t[e.M03]-t[e.M20]*t[e.M31]*t[e.M12]*t[e.M03]-t[e.M30]*t[e.M11]*t[e.M22]*t[e.M03]+t[e.M10]*t[e.M31]*t[e.M22]*t[e.M03]+t[e.M20]*t[e.M11]*t[e.M32]*t[e.M03]-t[e.M10]*t[e.M21]*t[e.M32]*t[e.M03]-t[e.M30]*t[e.M21]*t[e.M02]*t[e.M13]+t[e.M20]*t[e.M31]*t[e.M02]*t[e.M13]+t[e.M30]*t[e.M01]*t[e.M22]*t[e.M13]-t[e.M00]*t[e.M31]*t[e.M22]*t[e.M13]-t[e.M20]*t[e.M01]*t[e.M32]*t[e.M13]+t[e.M00]*t[e.M21]*t[e.M32]*t[e.M13]+t[e.M30]*t[e.M11]*t[e.M02]*t[e.M23]-t[e.M10]*t[e.M31]*t[e.M02]*t[e.M23]-t[e.M30]*t[e.M01]*t[e.M12]*t[e.M23]+t[e.M00]*t[e.M31]*t[e.M12]*t[e.M23]+t[e.M10]*t[e.M01]*t[e.M32]*t[e.M23]-t[e.M00]*t[e.M11]*t[e.M32]*t[e.M23]-t[e.M20]*t[e.M11]*t[e.M02]*t[e.M33]+t[e.M10]*t[e.M21]*t[e.M02]*t[e.M33]+t[e.M20]*t[e.M01]*t[e.M12]*t[e.M33]-t[e.M00]*t[e.M21]*t[e.M12]*t[e.M33]-t[e.M10]*t[e.M01]*t[e.M22]*t[e.M33]+t[e.M00]*t[e.M11]*t[e.M22]*t[e.M33]}},{key:"translate",value:function(t,n,r){var i=this.values;return i[e.M03]+=t,i[e.M13]+=n,i[e.M23]+=r,this}},{key:"copy",value:function(){return(new t).set(this.values)}},{key:"projection",value:function(t,n,r,i){this.identity();var a=1/Math.tan(r*(Math.PI/180)/2),s=(n+t)/(t-n),o=2*n*t/(t-n),h=this.values;return h[e.M00]=a/i,h[e.M10]=0,h[e.M20]=0,h[e.M30]=0,h[e.M01]=0,h[e.M11]=a,h[e.M21]=0,h[e.M31]=0,h[e.M02]=0,h[e.M12]=0,h[e.M22]=s,h[e.M32]=-1,h[e.M03]=0,h[e.M13]=0,h[e.M23]=o,h[e.M33]=0,this}},{key:"ortho2d",value:function(t,e,n,r){return this.ortho(t,t+n,e,e+r,0,1)}},{key:"ortho",value:function(t,n,r,i,a,s){this.identity();var o=2/(n-t),h=2/(i-r),l=-2/(s-a),u=-(n+t)/(n-t),c=-(i+r)/(i-r),f=-(s+a)/(s-a),d=this.values;return d[e.M00]=o,d[e.M10]=0,d[e.M20]=0,d[e.M30]=0,d[e.M01]=0,d[e.M11]=h,d[e.M21]=0,d[e.M31]=0,d[e.M02]=0,d[e.M12]=0,d[e.M22]=l,d[e.M32]=0,d[e.M03]=u,d[e.M13]=c,d[e.M23]=f,d[e.M33]=1,this}},{key:"multiply",value:function(t){var n=this.temp,r=this.values,i=t.values;return n[e.M00]=r[e.M00]*i[e.M00]+r[e.M01]*i[e.M10]+r[e.M02]*i[e.M20]+r[e.M03]*i[e.M30],n[e.M01]=r[e.M00]*i[e.M01]+r[e.M01]*i[e.M11]+r[e.M02]*i[e.M21]+r[e.M03]*i[e.M31],n[e.M02]=r[e.M00]*i[e.M02]+r[e.M01]*i[e.M12]+r[e.M02]*i[e.M22]+r[e.M03]*i[e.M32],n[e.M03]=r[e.M00]*i[e.M03]+r[e.M01]*i[e.M13]+r[e.M02]*i[e.M23]+r[e.M03]*i[e.M33],n[e.M10]=r[e.M10]*i[e.M00]+r[e.M11]*i[e.M10]+r[e.M12]*i[e.M20]+r[e.M13]*i[e.M30],n[e.M11]=r[e.M10]*i[e.M01]+r[e.M11]*i[e.M11]+r[e.M12]*i[e.M21]+r[e.M13]*i[e.M31],n[e.M12]=r[e.M10]*i[e.M02]+r[e.M11]*i[e.M12]+r[e.M12]*i[e.M22]+r[e.M13]*i[e.M32],n[e.M13]=r[e.M10]*i[e.M03]+r[e.M11]*i[e.M13]+r[e.M12]*i[e.M23]+r[e.M13]*i[e.M33],n[e.M20]=r[e.M20]*i[e.M00]+r[e.M21]*i[e.M10]+r[e.M22]*i[e.M20]+r[e.M23]*i[e.M30],n[e.M21]=r[e.M20]*i[e.M01]+r[e.M21]*i[e.M11]+r[e.M22]*i[e.M21]+r[e.M23]*i[e.M31],n[e.M22]=r[e.M20]*i[e.M02]+r[e.M21]*i[e.M12]+r[e.M22]*i[e.M22]+r[e.M23]*i[e.M32],n[e.M23]=r[e.M20]*i[e.M03]+r[e.M21]*i[e.M13]+r[e.M22]*i[e.M23]+r[e.M23]*i[e.M33],n[e.M30]=r[e.M30]*i[e.M00]+r[e.M31]*i[e.M10]+r[e.M32]*i[e.M20]+r[e.M33]*i[e.M30],n[e.M31]=r[e.M30]*i[e.M01]+r[e.M31]*i[e.M11]+r[e.M32]*i[e.M21]+r[e.M33]*i[e.M31],n[e.M32]=r[e.M30]*i[e.M02]+r[e.M31]*i[e.M12]+r[e.M32]*i[e.M22]+r[e.M33]*i[e.M32],n[e.M33]=r[e.M30]*i[e.M03]+r[e.M31]*i[e.M13]+r[e.M32]*i[e.M23]+r[e.M33]*i[e.M33],this.set(this.temp)}},{key:"multiplyLeft",value:function(t){var n=this.temp,r=this.values,i=t.values;return n[e.M00]=i[e.M00]*r[e.M00]+i[e.M01]*r[e.M10]+i[e.M02]*r[e.M20]+i[e.M03]*r[e.M30],n[e.M01]=i[e.M00]*r[e.M01]+i[e.M01]*r[e.M11]+i[e.M02]*r[e.M21]+i[e.M03]*r[e.M31],n[e.M02]=i[e.M00]*r[e.M02]+i[e.M01]*r[e.M12]+i[e.M02]*r[e.M22]+i[e.M03]*r[e.M32],n[e.M03]=i[e.M00]*r[e.M03]+i[e.M01]*r[e.M13]+i[e.M02]*r[e.M23]+i[e.M03]*r[e.M33],n[e.M10]=i[e.M10]*r[e.M00]+i[e.M11]*r[e.M10]+i[e.M12]*r[e.M20]+i[e.M13]*r[e.M30],n[e.M11]=i[e.M10]*r[e.M01]+i[e.M11]*r[e.M11]+i[e.M12]*r[e.M21]+i[e.M13]*r[e.M31],n[e.M12]=i[e.M10]*r[e.M02]+i[e.M11]*r[e.M12]+i[e.M12]*r[e.M22]+i[e.M13]*r[e.M32],n[e.M13]=i[e.M10]*r[e.M03]+i[e.M11]*r[e.M13]+i[e.M12]*r[e.M23]+i[e.M13]*r[e.M33],n[e.M20]=i[e.M20]*r[e.M00]+i[e.M21]*r[e.M10]+i[e.M22]*r[e.M20]+i[e.M23]*r[e.M30],n[e.M21]=i[e.M20]*r[e.M01]+i[e.M21]*r[e.M11]+i[e.M22]*r[e.M21]+i[e.M23]*r[e.M31],n[e.M22]=i[e.M20]*r[e.M02]+i[e.M21]*r[e.M12]+i[e.M22]*r[e.M22]+i[e.M23]*r[e.M32],n[e.M23]=i[e.M20]*r[e.M03]+i[e.M21]*r[e.M13]+i[e.M22]*r[e.M23]+i[e.M23]*r[e.M33],n[e.M30]=i[e.M30]*r[e.M00]+i[e.M31]*r[e.M10]+i[e.M32]*r[e.M20]+i[e.M33]*r[e.M30],n[e.M31]=i[e.M30]*r[e.M01]+i[e.M31]*r[e.M11]+i[e.M32]*r[e.M21]+i[e.M33]*r[e.M31],n[e.M32]=i[e.M30]*r[e.M02]+i[e.M31]*r[e.M12]+i[e.M32]*r[e.M22]+i[e.M33]*r[e.M32],n[e.M33]=i[e.M30]*r[e.M03]+i[e.M31]*r[e.M13]+i[e.M32]*r[e.M23]+i[e.M33]*r[e.M33],this.set(this.temp)}},{key:"lookAt",value:function(n,r,i){t.initTemps();var a=t.xAxis,s=t.yAxis,o=t.zAxis;o.setFrom(r).normalize(),a.setFrom(r).normalize(),a.cross(i).normalize(),s.setFrom(a).cross(o).normalize(),this.identity();var h=this.values;return h[e.M00]=a.x,h[e.M01]=a.y,h[e.M02]=a.z,h[e.M10]=s.x,h[e.M11]=s.y,h[e.M12]=s.z,h[e.M20]=-o.x,h[e.M21]=-o.y,h[e.M22]=-o.z,t.tmpMatrix.identity(),t.tmpMatrix.values[e.M03]=-n.x,t.tmpMatrix.values[e.M13]=-n.y,t.tmpMatrix.values[e.M23]=-n.z,this.multiply(t.tmpMatrix),this}}],[{key:"initTemps",value:function(){null===t.xAxis&&(t.xAxis=new a.Vector3),null===t.yAxis&&(t.yAxis=new a.Vector3),null===t.zAxis&&(t.zAxis=new a.Vector3)}}]),t}();e.Matrix4=s,s.xAxis=null,s.yAxis=null,s.zAxis=null,s.tmpMatrix=new s},1514:function(t,e,n){"use strict";var r=n(1655).default,i=n(6389).default,a=n(6690).default,s=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Color2Attribute=e.ColorAttribute=e.TexCoordAttribute=e.Position3Attribute=e.Position2Attribute=e.VertexAttribute=e.VertexAttributeType=e.Mesh=void 0;var o,h=n(1858),l=function(){function t(e,n,r,i){a(this,t),this.attributes=n,this.verticesLength=0,this.dirtyVertices=!1,this.indicesLength=0,this.dirtyIndices=!1,this.elementsPerVertex=0,this.context=e,this.elementsPerVertex=0;for(var s=0;s<n.length;s++)this.elementsPerVertex+=n[s].numElements;this.vertices=new Float32Array(r*this.elementsPerVertex),this.indices=new Uint16Array(i)}return s(t,[{key:"getAttributes",value:function(){return this.attributes}},{key:"maxVertices",value:function(){return this.vertices.length/this.elementsPerVertex}},{key:"numVertices",value:function(){return this.verticesLength/this.elementsPerVertex}},{key:"setVerticesLength",value:function(t){this.dirtyVertices=!0,this.verticesLength=t}},{key:"getVertices",value:function(){return this.vertices}},{key:"maxIndices",value:function(){return this.indices.length}},{key:"numIndices",value:function(){return this.indicesLength}},{key:"setIndicesLength",value:function(t){this.dirtyIndices=!0,this.indicesLength=t}},{key:"getIndices",value:function(){return this.indices}},{key:"getVertexSizeInFloats",value:function(){for(var t=0,e=0;e<this.attributes.length;e++){t+=this.attributes[e].numElements}return t}},{key:"setVertices",value:function(t){if(this.dirtyVertices=!0,t.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(t,0),this.verticesLength=t.length}},{key:"setIndices",value:function(t){if(this.dirtyIndices=!0,t.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(t,0),this.indicesLength=t.length}},{key:"draw",value:function(t,e){this.drawWithOffset(t,e,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)}},{key:"drawWithOffset",value:function(t,e,n,r){var i=this.context;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),this.indicesLength>0?i.drawElements(e,r,i.UNSIGNED_SHORT,2*n):i.drawArrays(e,n,r),this.unbind(t)}},{key:"bind",value:function(t){var e=this.context;e.bindBuffer(e.ARRAY_BUFFER,this.verticesBuffer);for(var n=0,r=0;r<this.attributes.length;r++){var i=this.attributes[r],a=t.getAttributeLocation(i.name);e.enableVertexAttribArray(a),e.vertexAttribPointer(a,i.numElements,e.FLOAT,!1,4*this.elementsPerVertex,4*n),n+=i.numElements}this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)}},{key:"unbind",value:function(t){for(var e=this.context,n=0;n<this.attributes.length;n++){var r=this.attributes[n],i=t.getAttributeLocation(r.name);e.disableVertexAttribArray(i)}e.bindBuffer(e.ARRAY_BUFFER,null),this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}},{key:"update",value:function(){var t=this.context;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=!1)}},{key:"restore",value:function(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()}},{key:"dispose",value:function(){var t=this.context;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer)}}]),t}();e.Mesh=l,function(t){t[t.Float=0]="Float"}(o=e.VertexAttributeType||(e.VertexAttributeType={}));var u=s((function t(e,n,r){a(this,t),this.name=e,this.type=n,this.numElements=r}));e.VertexAttribute=u;var c=function(t){r(n,t);var e=i(n);function n(){return a(this,n),e.call(this,h.Shader.POSITION,o.Float,2)}return s(n)}(u);e.Position2Attribute=c;var f=function(t){r(n,t);var e=i(n);function n(){return a(this,n),e.call(this,h.Shader.POSITION,o.Float,3)}return s(n)}(u);e.Position3Attribute=f;var d=function(t){r(n,t);var e=i(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return a(this,n),e.call(this,h.Shader.TEXCOORDS+(0===t?"":t),o.Float,2)}return s(n)}(u);e.TexCoordAttribute=d;var v=function(t){r(n,t);var e=i(n);function n(){return a(this,n),e.call(this,h.Shader.COLOR,o.Float,4)}return s(n)}(u);e.ColorAttribute=v;var p=function(t){r(n,t);var e=i(n);function n(){return a(this,n),e.call(this,h.Shader.COLOR2,o.Float,4)}return s(n)}(u);e.Color2Attribute=p},9699:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.NumberUtil=void 0;var a=new Int8Array(4),s=new Int32Array(a.buffer,0,1),o=new Float32Array(a.buffer,0,1),h=function(){function t(){r(this,t)}return i(t,null,[{key:"intBitsToFloat",value:function(t){return s[0]=t,o[0]}},{key:"floatToIntBits",value:function(t){return o[0]=t,s[0]}},{key:"intToFloatColor",value:function(e){return t.intBitsToFloat(4278190079&e)}},{key:"colorToFloat",value:function(e,n,r,i){var a=e<<24|n<<16|r<<8|i;return t.intToFloatColor(a)}},{key:"isPowerOfTwo",value:function(t){return 0===(t&t-1)}},{key:"nextPowerOfTwo",value:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1}}]),t}();e.NumberUtil=h},1251:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonBatch=void 0;var a=n(8606),s=n(1514),o=n(1858),h=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],l=new a.Color(1,1,1,1),u=function(){function t(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10920;if(r(this,t),this.isDrawing=!1,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,this.projectionValues=new Float32Array(16),this.color=l,this.twoColorTint=!0,this.yDown=!1,i>10920)throw new Error("Can't have more than 10920 triangles per batch: "+i);this.context=e;var a=n?[new s.Position2Attribute,new s.ColorAttribute,new s.TexCoordAttribute,new s.Color2Attribute]:[new s.Position2Attribute,new s.ColorAttribute,new s.TexCoordAttribute];this.mesh=new s.Mesh(e,a,i,3*i),this.shader=o.Shader.newTwoColoredTextured(e);var h=this.context;this.srcColorBlend=h.SRC_ALPHA,this.srcAlphaBlend=h.ONE,this.dstBlend=h.ONE_MINUS_SRC_ALPHA,this.twoColorTint=n}return i(t,[{key:"setColor",value:function(t){this.color=t}},{key:"setShader",value:function(t){this.shader.dispose(),this.shader=t}},{key:"setProjection",value:function(t){this.projectionValues=t}},{key:"begin",value:function(){if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0;var t=this.shader;this.lastTexture=null,this.isDrawing=!0,t.bind(),t.setUniform4x4f(o.Shader.MVP_MATRIX,this.projectionValues),t.setUniformi("u_texture",0);var e=this.context;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}},{key:"setBlendMode",value:function(t,e,n){this.srcColorBlend===t&&this.srcAlphaBlend===e&&this.dstBlend===n||(this.srcColorBlend=t,this.srcAlphaBlend=e,this.dstBlend=n,this.isDrawing&&(this.flush(),this.context.blendFuncSeparate(t,n,e,n)))}},{key:"drawVerticesWithOffset",value:function(e,n,r,i){for(var a=[],s=0;s<i;s++)a[s]=n[s+r];this.drawVertices(e,a,t.QUAD_TRIANGLES)}},{key:"drawVertices",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.QUAD_TRIANGLES;e!==this.lastTexture?(this.flush(),this.lastTexture=e):(this.verticesLength+n.length>this.mesh.getVertices().length||this.indicesLength+r.length>this.mesh.getIndices().length)&&this.flush();var i=this.mesh.numVertices();this.mesh.getVertices().set(n,this.verticesLength),this.verticesLength+=n.length,this.mesh.setVerticesLength(this.verticesLength);for(var a=this.mesh.getIndices(),s=this.indicesLength,o=0;o<r.length;s++,o++)a[s]=r[o]+i;this.indicesLength+=r.length,this.mesh.setIndicesLength(this.indicesLength)}},{key:"flush",value:function(){0!==this.verticesLength&&(this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++)}},{key:"end",value:function(){if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader.unbind(),this.lastTexture=null,this.isDrawing=!1,t.totalDrawCalls+=this.drawCalls;var e=this.context;e.disable(e.BLEND)}},{key:"getDrawCalls",value:function(){return this.drawCalls}},{key:"dispose",value:function(){this.mesh.dispose()}},{key:"setYDown",value:function(t){this.yDown=t}},{key:"draw",value:function(e,n,r,i,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1,f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:1,v=arguments.length>12&&void 0!==arguments[12]?arguments[12]:1,p=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,g=arguments.length>14&&void 0!==arguments[14]&&arguments[14],m=this.color;if(this.yDown){var y=d;d=p,p=y}n=n||0,r=r||0;var x=-s,M=(i=0===i?i:i||e.width)-s,w=i-s,b=-s,k=-o,T=-o,S=(a=0===a?a:a||e.height)-o,A=a-o;if(1!==u&&(x*=u,M*=u,w*=u,b*=u),1!==c&&(k*=c,T*=c,S*=c,A*=c),0!==l){var C=Math.cos(l),_=Math.sin(l),I=C*x-_*k,E=_*x+C*k,P=C*M-_*T,R=_*M+C*T,F=C*w-_*S,B=_*w+C*S,O=C*b-_*A,L=_*b+C*A;x=I,M=P,w=F,b=O,k=E,T=R,S=B,A=L}x+=n+s,M+=n+s,w+=n+s,b+=n+s,k+=r+o,T+=r+o,S+=r+o,A+=r+o;var D=f,Y=d,X=v,U=p,V=X,j=Y,N=D,z=U;g&&(this.yDown?(D=f,Y=p,X=v,U=d,V=f,j=d,N=v,z=p):(D=v,Y=d,X=f,U=p,V=v,j=p,N=f,z=d));var W=0;h[W++]=x,h[W++]=k,h[W++]=m.r,h[W++]=m.g,h[W++]=m.b,h[W++]=m.a,h[W++]=D,h[W++]=Y,this.twoColorTint&&(h[W++]=0,h[W++]=0,h[W++]=0,h[W++]=0),h[W++]=M,h[W++]=T,h[W++]=m.r,h[W++]=m.g,h[W++]=m.b,h[W++]=m.a,h[W++]=V,h[W++]=j,this.twoColorTint&&(h[W++]=0,h[W++]=0,h[W++]=0,h[W++]=0),h[W++]=w,h[W++]=S,h[W++]=m.r,h[W++]=m.g,h[W++]=m.b,h[W++]=m.a,h[W++]=X,h[W++]=U,this.twoColorTint&&(h[W++]=0,h[W++]=0,h[W++]=0,h[W++]=0),h[W++]=b,h[W++]=A,h[W++]=m.r,h[W++]=m.g,h[W++]=m.b,h[W++]=m.a,h[W++]=N,h[W++]=z,this.twoColorTint&&(h[W++]=0,h[W++]=0,h[W++]=0,h[W]=0),this.drawVertices(e,h,t.QUAD_TRIANGLES)}}],[{key:"resetTotalDrawCalls",value:function(){t.totalDrawCalls=0}}]),t}();e.PolygonBatch=u,u.QUAD_TRIANGLES=[0,1,2,2,3,0],u.totalDrawCalls=0},1858:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Shader=void 0;var a=function(){function t(e,n,i){r(this,t),this.vertexShader=n,this.fragmentShader=i,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=n,this.fsSource=i,this.context=e,this.compile()}return i(t,[{key:"getProgram",value:function(){return this.program}},{key:"getVertexShader",value:function(){return this.vertexShader}},{key:"getFragmentShader",value:function(){return this.fragmentShader}},{key:"getVertexShaderSource",value:function(){return this.vsSource}},{key:"getFragmentSource",value:function(){return this.fsSource}},{key:"compile",value:function(){var t=this.context;try{this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),this.program=this.compileProgram(this.vs,this.fs)}catch(e){throw this.dispose(),e}}},{key:"compileShader",value:function(t,e){var n=this.context,r=n.createShader(t);if(n.shaderSource(r,e),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){var i="Couldn't compile shader: "+n.getShaderInfoLog(r);if(n.deleteShader(r),!n.isContextLost())throw new Error(i)}return r}},{key:"compileProgram",value:function(t,e){var n=this.context,r=n.createProgram();if(n.attachShader(r,t),n.attachShader(r,e),n.linkProgram(r),!n.getProgramParameter(r,n.LINK_STATUS)){var i="Couldn't compile shader program: "+n.getProgramInfoLog(r);if(n.deleteProgram(r),!n.isContextLost())throw new Error(i)}return r}},{key:"restore",value:function(){this.compile()}},{key:"bind",value:function(){this.context.useProgram(this.program)}},{key:"unbind",value:function(){this.context.useProgram(null)}},{key:"setUniformi",value:function(t,e){this.context.uniform1i(this.getUniformLocation(t),e)}},{key:"setUniformf",value:function(t,e){this.context.uniform1f(this.getUniformLocation(t),e)}},{key:"setUniform2f",value:function(t,e,n){this.context.uniform2f(this.getUniformLocation(t),e,n)}},{key:"setUniform3f",value:function(t,e,n,r){this.context.uniform3f(this.getUniformLocation(t),e,n,r)}},{key:"setUniform4f",value:function(t,e,n,r,i){this.context.uniform4f(this.getUniformLocation(t),e,n,r,i)}},{key:"setUniform2x2f",value:function(t,e){var n=this.context;this.tmp2x2.set(e),n.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)}},{key:"setUniform3x3f",value:function(t,e){var n=this.context;this.tmp3x3.set(e),n.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)}},{key:"setUniform4x4f",value:function(t,e){var n=this.context;this.tmp4x4.set(e),n.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)}},{key:"getUniformLocation",value:function(t){var e=this.context,n=e.getUniformLocation(this.program,t);if(!n&&!e.isContextLost())throw new Error("Couldn't find location for uniform ".concat(t));return n}},{key:"getAttributeLocation",value:function(t){var e=this.context,n=e.getAttribLocation(this.program,t);if(-1===n&&!e.isContextLost())throw new Error("Couldn't find location for attribute ".concat(t));return n}},{key:"dispose",value:function(){var t=this.context;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)}}],[{key:"newColoredTextured",value:function(e){return new t(e,"\n         attribute vec4 ".concat(t.POSITION,";\n         attribute vec4 ").concat(t.COLOR,";\n         attribute vec2 ").concat(t.TEXCOORDS,";\n         uniform mat4 ").concat(t.MVP_MATRIX,";\n         varying vec4 v_color;\n         varying vec2 v_texCoords;\n \n         void main () {\n           v_color = ").concat(t.COLOR,";\n           v_texCoords = ").concat(t.TEXCOORDS,";\n           gl_Position = ").concat(t.MVP_MATRIX," * ").concat(t.POSITION,";\n         }\n       "),"\n         #ifdef GL_ES\n           #define LOWP lowp\n           precision mediump float;\n         #else\n           #define LOWP\n         #endif\n         varying LOWP vec4 v_color;\n         varying vec2 v_texCoords;\n         uniform sampler2D u_texture;\n \n         void main () {\n           gl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n         }\n       ")}},{key:"newTwoColoredTextured",value:function(e){return new t(e,"\n         attribute vec4 ".concat(t.POSITION,";\n         attribute vec4 ").concat(t.COLOR,";\n         attribute vec4 ").concat(t.COLOR2,";\n         attribute vec2 ").concat(t.TEXCOORDS,";\n         uniform mat4 ").concat(t.MVP_MATRIX,";\n         varying vec4 v_light;\n         varying vec4 v_dark;\n         varying vec2 v_texCoords;\n \n         void main () {\n           v_light = ").concat(t.COLOR,";\n           v_dark = ").concat(t.COLOR2,";\n           v_texCoords = ").concat(t.TEXCOORDS,";\n           gl_Position = ").concat(t.MVP_MATRIX," * ").concat(t.POSITION,";\n         }\n       "),"\n         #ifdef GL_ES\n           #define LOWP lowp\n           precision mediump float;\n         #else\n           #define LOWP\n         #endif\n         varying LOWP vec4 v_light;\n         varying LOWP vec4 v_dark;\n         varying vec2 v_texCoords;\n         uniform sampler2D u_texture;\n \n         void main () {\n           vec4 texColor = texture2D(u_texture, v_texCoords);\n           gl_FragColor.a = texColor.a * v_light.a;\n           gl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n         }\n       ")}},{key:"newColored",value:function(e){return new t(e,"\n         attribute vec4 ".concat(t.POSITION,";\n         attribute vec4 ").concat(t.COLOR,";\n         uniform mat4 ").concat(t.MVP_MATRIX,";\n         varying vec4 v_color;\n \n         void main () {\n           v_color = ").concat(t.COLOR,";\n           gl_Position = ").concat(t.MVP_MATRIX," * ").concat(t.POSITION,";\n         }\n       "),"\n         #ifdef GL_ES\n           #define LOWP lowp\n           precision mediump float;\n         #else\n           #define LOWP\n         #endif\n         varying LOWP vec4 v_color;\n \n         void main () {\n           gl_FragColor = v_color;\n         }\n       ")}}]),t}();e.Shader=a,a.MVP_MATRIX="u_projTrans",a.POSITION="a_position",a.COLOR="a_color",a.COLOR2="a_color2",a.TEXCOORDS="a_texCoords",a.SAMPLER="u_texture"},2987:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeRenderer=e.ShapeType=void 0;var a,s=n(1514),o=n(1858),h=n(8606),l=n(2283);!function(t){t[t.Point=0]="Point",t[t.Line=1]="Line",t[t.Filled=4]="Filled"}(a=e.ShapeType||(e.ShapeType={}));var u=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10920;if(r(this,t),this.isDrawing=!1,this.shapeType=a.Filled,this.color=new h.Color(1,1,1,1),this.vertexIndex=0,this.tmp=new l.Vector2,this.projectionValues=new Float32Array(16),n>10920)throw new Error("Can't have more than 10920 triangles per batch: "+n);this.context=e,this.mesh=new s.Mesh(e,[new s.Position2Attribute,new s.ColorAttribute],n,0);var i=this.context;this.srcColorBlend=i.SRC_ALPHA,this.srcAlphaBlend=i.ONE,this.dstBlend=i.ONE_MINUS_SRC_ALPHA,this.shader=o.Shader.newColored(i)}return i(t,[{key:"setProjection",value:function(t){this.projectionValues=t}},{key:"begin",value:function(){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.vertexIndex=0,this.isDrawing=!0,this.shader.bind(),this.shader.setUniform4x4f(o.Shader.MVP_MATRIX,this.projectionValues);var t=this.context;t.enable(t.BLEND),t.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}},{key:"setBlendMode",value:function(t,e,n){(this.srcColorBlend=t,this.srcAlphaBlend=e,this.dstBlend=n,this.isDrawing)&&(this.flush(),this.context.blendFuncSeparate(t,n,e,n))}},{key:"setColor",value:function(t){this.color.setFromColor(t)}},{key:"setColorWith",value:function(t,e,n,r){this.color.set(t,e,n,r)}},{key:"point",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.check(a.Point,1),null===n&&(n=this.color),this.vertex(t,e,n)}},{key:"line",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.check(a.Line,2),null===i&&(i=this.color),this.vertex(t,e,i),this.vertex(n,r,i)}},{key:"triangle",value:function(t,e,n,r,i,s,o){var h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null;this.check(t?a.Filled:a.Line,3),null===h&&(h=this.color),null===l&&(l=this.color),null===u&&(u=this.color),t?(this.vertex(e,n,h),this.vertex(r,i,l),this.vertex(s,o,u)):(this.vertex(e,n,h),this.vertex(r,i,l),this.vertex(r,i,h),this.vertex(s,o,l),this.vertex(s,o,h),this.vertex(e,n,l))}},{key:"quad",value:function(t,e,n,r,i,s,o,h,l){var u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,d=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null;this.check(t?a.Filled:a.Line,3),null===u&&(u=this.color),null===c&&(c=this.color),null===f&&(f=this.color),null===d&&(d=this.color),t?(this.vertex(e,n,u),this.vertex(r,i,c),this.vertex(s,o,f),this.vertex(s,o,f),this.vertex(h,l,d),this.vertex(e,n,u)):(this.vertex(e,n,u),this.vertex(r,i,c),this.vertex(r,i,c),this.vertex(s,o,f),this.vertex(s,o,f),this.vertex(h,l,d),this.vertex(h,l,d),this.vertex(e,n,u))}},{key:"rect",value:function(t,e,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this.quad(t,e,n,e+r,n,e+r,n+i,e,n+i,a,a,a,a)}},{key:"rectLine",value:function(t,e,n,r,i,s){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.check(t?a.Filled:a.Line,8),null===o&&(o=this.color);var h=this.tmp.set(i-n,e-r);h.nor(),s*=.5;var l=h.x*s,u=h.y*s;t?(this.vertex(e+l,n+u,o),this.vertex(e-l,n-u,o),this.vertex(r+l,i+u,o),this.vertex(r-l,i-u,o),this.vertex(r+l,i+u,o),this.vertex(e-l,n-u,o)):(this.vertex(e+l,n+u,o),this.vertex(e-l,n-u,o),this.vertex(r+l,i+u,o),this.vertex(r-l,i-u,o),this.vertex(r+l,i+u,o),this.vertex(e+l,n+u,o),this.vertex(r-l,i-u,o),this.vertex(e-l,n-u,o))}},{key:"x",value:function(t,e,n){this.line(t-n,e-n,t+n,e+n),this.line(t-n,e+n,t+n,e-n)}},{key:"polygon",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(n<3)throw new Error("Polygon must contain at least 3 vertices");this.check(a.Line,2*n),null===r&&(r=this.color),n<<=1;for(var i=t[e<<=1],s=t[e+1],o=e+n,h=e,l=e+n-2;h<l;h+=2){var u=t[h],c=t[h+1],f=0,d=0;h+2>=o?(f=i,d=s):(f=t[h+2],d=t[h+3]),this.vertex(u,c,r),this.vertex(f,d,r)}}},{key:"circle",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(0===s&&(s=Math.max(1,6*h.MathUtils.cbrt(r)|0)),s<=0)throw new Error("segments must be > 0.");null===i&&(i=this.color);var o=2*h.MathUtils.PI/s,l=Math.cos(o),u=Math.sin(o),c=r,f=0;if(t){this.check(a.Filled,3*s+3),s--;for(var d=0;d<s;d++){this.vertex(e,n,i),this.vertex(e+c,n+f,i);var v=c;c=l*c-u*f,f=u*v+l*f,this.vertex(e+c,n+f,i)}this.vertex(e,n,i),this.vertex(e+c,n+f,i)}else{this.check(a.Line,2*s+2);for(var p=0;p<s;p++){this.vertex(e+c,n+f,i);var g=c;c=l*c-u*f,f=u*g+l*f,this.vertex(e+c,n+f,i)}this.vertex(e+c,n+f,i)}c=r,f=0,this.vertex(e+c,n+f,i)}},{key:"curve",value:function(t,e,n,r,i,s,o,h,l){var u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null;this.check(a.Line,2*l+2),null===u&&(u=this.color);for(var c=1/l,f=c*c,d=c*c*c,v=3*c,p=3*f,g=6*f,m=6*d,y=t-2*n+i,x=e-2*r+s,M=3*(n-i)-t+o,w=3*(r-s)-e+h,b=t,k=e,T=(n-t)*v+y*p+M*d,S=(r-e)*v+x*p+w*d,A=y*g+M*m,C=x*g+w*m,_=M*m,I=w*m;l-- >0;)this.vertex(b,k,u),b+=T,k+=S,T+=A,S+=C,A+=_,C+=I,this.vertex(b,k,u);this.vertex(b,k,u),this.vertex(o,h,u)}},{key:"vertex",value:function(t,e,n){var r=this.vertexIndex,i=this.mesh.getVertices();i[r++]=t,i[r++]=e,i[r++]=n.r,i[r++]=n.g,i[r++]=n.b,i[r++]=n.a,this.vertexIndex=r}},{key:"end",value:function(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush();var t=this.context;t.disable(t.BLEND),this.isDrawing=!1}},{key:"flush",value:function(){0!==this.vertexIndex&&(this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0)}},{key:"check",value:function(t,e){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType===t){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<e))return;this.flush()}else this.flush(),this.shapeType=t}},{key:"dispose",value:function(){this.mesh.dispose()}}]),t}();e.ShapeRenderer=u},5297:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Sprite=void 0;var a=n(8606),s=n(2283),o=function(){function t(e){r(this,t),this.region=e,this.dirty=!1,this.position=new s.Vector2(0,0),this.size=new s.Vector2(0,0),this.origin=new s.Vector2(0,0),this.scale=new s.Vector2(1,1),this.color=new a.Color(1,1,1,1),this.rotation=0,this.vertices=new Float32Array(48),this.bounds={x:0,y:0,width:0,height:0},this.setSize(e.width,e.height),this.setOrigin(e.width/2,e.height/2)}return i(t,[{key:"set",value:function(t){this.region=t.region,this.position.setVector(t.position),this.size.setVector(t.size),this.origin.setVector(t.origin),this.rotation=t.rotation,this.scale.setVector(t.scale),this.color.setFromColor(t.color),this.dirty=!0}},{key:"setBounds",value:function(t,e,n,r){this.setPosition(t,e),this.setSize(t,e),this.dirty=!0}},{key:"setSize",value:function(t,e){this.size.set(t,e),this.dirty=!0}},{key:"setPosition",value:function(t,e){this.position.set(t,e),this.dirty=!0}},{key:"setOriginBasedPosition",value:function(t,e){this.setPosition(t-this.origin.x,e-this.origin.y)}},{key:"setX",value:function(t){this.position.x=t,this.dirty=!0}},{key:"setY",value:function(t){this.position.y=t,this.dirty=!0}},{key:"setCenterX",value:function(t){this.setX(t-this.size.x/2)}},{key:"setCenterY",value:function(t){this.setY(t-this.size.y/2)}},{key:"setCenter",value:function(t,e){this.setPosition(t-this.size.x/2,e-this.size.y/2)}},{key:"translateX",value:function(t){this.translate(t,0)}},{key:"translateY",value:function(t){this.translate(0,t)}},{key:"translate",value:function(t,e){this.position.add(t,e),this.dirty=!0}},{key:"setColor",value:function(t){this.color.setFromColor(t),this.dirty=!0}},{key:"setAlpha",value:function(t){this.color.a=t,this.dirty=!0}},{key:"setOrigin",value:function(t,e){this.origin.set(t,e),this.dirty=!0}},{key:"setOriginCenter",value:function(){this.origin.set(this.size.x/2,this.size.y/2),this.dirty=!0}},{key:"setRotation",value:function(t){this.rotation=t,this.dirty=!0}},{key:"getRotation",value:function(){return this.rotation}},{key:"rotate",value:function(t){0!==t&&(this.rotation+=t,this.dirty=!0)}},{key:"setScale",value:function(t,e){this.scale.set(t,e),this.dirty=!0}},{key:"applyScale",value:function(t){this.scale.scale(t),this.dirty=!0}},{key:"getVertices",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.vertices,n=this.region;if(!this.dirty)return e;var r=this.position.x,i=this.position.y,a=this.size.x,s=this.size.y,o=this.origin.x,h=this.origin.y,l=this.rotation,u=this.scale.x,c=this.scale.y,f=n.u,d=n.v,v=n.u2,p=n.v2,g=this.color,m=n.rotated,y=a/n.originalWidth,x=s/n.originalHeight,M=n.width*y,w=n.height*x,b=r+n.offsetX*y;if(r=b,i=t?i+s-n.offsetY*x-w:i+n.offsetY*x,t){var k=d;d=p,p=k}var T=-o,S=(a=M)-o,A=a-o,C=-o,_=-h,I=-h,E=(s=w)-h,P=s-h;if(1!==u&&(T*=u,S*=u,A*=u,C*=u),1!==c&&(_*=c,I*=c,E*=c,P*=c),0!==l){var R=Math.cos(l),F=Math.sin(l),B=R*T-F*_,O=F*T+R*_,L=R*S-F*I,D=F*S+R*I,Y=R*A-F*E,X=F*A+R*E,U=R*C-F*P,V=F*C+R*P;T=B,S=L,A=Y,C=U,_=O,I=D,E=X,P=V}T+=r+o,S+=r+o,A+=r+o,C+=r+o,_+=i+h,I+=i+h,E+=i+h,P+=i+h;var j=f,N=d,z=v,W=p,G=z,H=N,q=j,J=W;m&&(t?(j=f,N=p,z=v,W=d,G=f,H=d,q=v,J=p):(j=v,N=d,z=f,W=p,G=v,H=p,q=f,J=d));var K=0;return e[K++]=T,e[K++]=_,e[K++]=g.r,e[K++]=g.g,e[K++]=g.b,e[K++]=g.a,e[K++]=j,e[K++]=N,e[K++]=0,e[K++]=0,e[K++]=0,e[K++]=0,e[K++]=S,e[K++]=I,e[K++]=g.r,e[K++]=g.g,e[K++]=g.b,e[K++]=g.a,e[K++]=G,e[K++]=H,e[K++]=0,e[K++]=0,e[K++]=0,e[K++]=0,e[K++]=A,e[K++]=E,e[K++]=g.r,e[K++]=g.g,e[K++]=g.b,e[K++]=g.a,e[K++]=z,e[K++]=W,e[K++]=0,e[K++]=0,e[K++]=0,e[K++]=0,e[K++]=C,e[K++]=P,e[K++]=g.r,e[K++]=g.g,e[K++]=g.b,e[K++]=g.a,e[K++]=q,e[K++]=J,e[K++]=0,e[K++]=0,e[K++]=0,e[K]=0,e}},{key:"getBoundingRectangle",value:function(){var t=this.vertices,e=t[0],n=t[1],r=t[0],i=t[1];return e=(e=(e=e>t[12]?t[12]:e)>t[24]?t[24]:e)>t[36]?t[36]:e,r=(r=(r=r<t[12]?t[12]:r)<t[24]?t[24]:r)<t[36]?t[36]:r,n=(n=(n=n>t[13]?t[13]:n)>t[25]?t[25]:n)>t[37]?t[37]:n,i=(i=(i=i<t[13]?t[13]:i)<t[25]?t[25]:i)<t[37]?t[37]:i,this.bounds.x=e,this.bounds.y=n,this.bounds.width=r-e,this.bounds.height=i-n,this.bounds}},{key:"draw",value:function(t){t.drawVertices(this.region.texture,this.getVertices(t.yDown))}},{key:"drawWithAlpha",value:function(t,e){var n=this.getColor().a;this.setAlpha(n*e),this.draw(t),this.setAlpha(n)}},{key:"getX",value:function(){return this.position.x}},{key:"getY",value:function(){return this.position.y}},{key:"getWidth",value:function(){return this.size.x}},{key:"getHeight",value:function(){return this.size.y}},{key:"getOriginX",value:function(){return this.origin.x}},{key:"getOriginY",value:function(){return this.origin.y}},{key:"getScaleX",value:function(){return this.scale.x}},{key:"getScaleY",value:function(){return this.scale.y}},{key:"getColor",value:function(){return this.color}}]),t}();e.Sprite=o},7139:function(t,e,n){"use strict";var r,i=n(6690).default,a=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Texture=e.TextureWrap=e.TextureFilter=void 0,function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(r=e.TextureFilter||(e.TextureFilter={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(e.TextureWrap||(e.TextureWrap={}));var s=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i(this,t),this.texture=null,this.boundUnit=0,this.useMipMaps=!1,this.width=0,this.height=0,this._image=n,this.context=e,this.useMipMaps=r,this.restore(),this.width=n.width,this.height=n.height}return a(t,[{key:"getImage",value:function(){return this._image}},{key:"getWebGLTexture",value:function(){return this.texture}},{key:"setFilters",value:function(e,n){var r=this.context;this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t.validateMagFilter(n))}},{key:"setWraps",value:function(t,e){var n=this.context;this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e)}},{key:"update",value:function(e){var n=this.context;this.texture||(this.texture=this.context.createTexture()),this.bind(),t.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,this._image),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,e?n.LINEAR_MIPMAP_LINEAR:n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),e&&n.generateMipmap(n.TEXTURE_2D)}},{key:"restore",value:function(){this.texture=null,this.update(this.useMipMaps)}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.context;this.boundUnit=t,e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)}},{key:"unbind",value:function(){var t=this.context;t.activeTexture(t.TEXTURE0+this.boundUnit),t.bindTexture(t.TEXTURE_2D,null)}},{key:"dispose",value:function(){this.context.deleteTexture(this.texture)}}],[{key:"load",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(i){var a=new Image;a.onload=function(){i(new t(e,a,r))},a.src=n}))}},{key:"validateMagFilter",value:function(t){switch(t){case r.MipMap:case r.MipMapLinearLinear:case r.MipMapLinearNearest:case r.MipMapNearestLinear:case r.MipMapNearestNearest:return r.Linear;default:return t}}}]),t}();e.Texture=s,s.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=!1},9396:function(t,e,n){"use strict";var r=n(7061).default,i=n(7424).default,a=n(4704).default,s=n(6690).default,o=n(9728).default,h=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function s(t){try{h(r.next(t))}catch(e){a(e)}}function o(t){try{h(r.throw(t))}catch(e){a(e)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}h((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.TextureAtlas=void 0;var l=n(7139),u=n(859);function c(t,e){for(var n=t.split("/"),r=e.split("/"),i=[],a=0,s=n.length;a<s;a++)if(".."===n[a])i.pop();else{if("."===n[a])continue;i.push(n[a])}for(var o=0,h=r.length;o<h;o++)if(".."===r[o])i.pop();else{if("."===r[o])continue;i.push(r[o])}return i.join("/")}var f=function(){function t(e,n){s(this,t),this.pages=e,this.regions=n}return o(t,[{key:"dispose",value:function(){var t,e=a(this.pages);try{for(e.s();!(t=e.n()).done;){t.value.dispose()}}catch(n){e.e(n)}finally{e.f()}}},{key:"getPages",value:function(){return this.pages}},{key:"getRegions",value:function(){return this.regions}},{key:"findRegion",value:function(t,e){for(var n=0;n<this.regions.length;n++){var r=this.regions[n];if(r.name===t&&(void 0===e||r.index===e))return r}return null}},{key:"findRegions",value:function(t){return this.regions.filter((function(e){return e.name===t})).sort((function(t,e){return t.index-e.index}))}}],[{key:"load",value:function(e,n,a){return h(this,void 0,void 0,r().mark((function s(){var o,h,f,d,v,p,g,m,y,x,M,w,b,k,T,S,A,C,_,I,E,P,R,F,B,O,L,D,Y,X,U,V,j,N,z,W,G,H,q,J,K;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(n).then((function(t){return t.text()}));case 2:o=r.sent,h=[],f=[],d=[],p=o.split(/\r?\n/),g=0;case 8:if(void 0!==(y=p[g])){r.next=12;break}return r.abrupt("break",16);case 12:0===y.trim().length?v=null:null===v?(x=c(n,"../".concat(y)),g++,y=p[g],m=y.split(":")[1].split(",").map((function(t){return t.trim()})),M=parseInt(m[0],10),w=parseInt(m[1],10),g++,y=p[g],m=y.split(":")[1].split(",").map((function(t){return t.trim()})),b=m[0],g++,y=p[g],m=y.split(":")[1].split(",").map((function(t){return t.trim()})),k=i(m,2),T=k[0],S=k[1],g++,y=p[g],m=y.split(":")[1].split(",").map((function(t){return t.trim()})),A=m[0],C=l.TextureWrap.ClampToEdge,_=l.TextureWrap.ClampToEdge,"x"===A?C=l.TextureWrap.Repeat:"y"===A?_=l.TextureWrap.Repeat:"xy"===A&&(C=l.TextureWrap.Repeat,_=l.TextureWrap.Repeat),v={file:x,width:M,height:w,format:b,mipMaps:"Nearest"!==T&&"Linear"!==T,min:T,max:S,direction:A,repeatX:C,repeatY:_},h.push(v)):(I=y,g++,y=p[g],m=y.split(":")[1].split(",").map((function(t){return t.trim()})),E="true"===m[0],g++,y=p[g],m=y.split(":")[1].split(",").map((function(t){return t.trim()})),P=parseInt(m[0],10),R=parseInt(m[1],10),g++,y=p[g],m=y.split(":")[1].split(",").map((function(t){return t.trim()})),F=parseInt(m[0],10),B=parseInt(m[1],10),O={name:I,rotate:E,left:P,top:R,width:F,height:B,page:v},g++,y=p[g],4===(m=y.split(":")[1].split(",").map((function(t){return t.trim()}))).length&&(O.splits=m.map((function(t){return parseInt(t,10)})),g++,y=p[g],4===(m=y.split(":")[1].split(",").map((function(t){return t.trim()}))).length&&(O.pads=m.map((function(t){return parseInt(t,10)})),g++,y=p[g],m=y.split(":")[1].split(",").map((function(t){return t.trim()})))),O.originalWidth=parseInt(m[0],10),O.originalHeight=parseInt(m[1],10),g++,y=p[g],m=y.split(":")[1].split(",").map((function(t){return t.trim()})),O.offsetX=parseInt(m[0],10),O.offsetY=parseInt(m[1],10),g++,y=p[g],m=y.split(":")[1].split(",").map((function(t){return t.trim()})),O.index=parseInt(m[0],10),d.push(O)),g++,r.next=8;break;case 16:L=0,D=h;case 17:if(!(L<D.length)){r.next=27;break}return Y=D[L],r.next=21,l.Texture.load(e,Y.file,a);case 21:Y.texture=r.sent,Y.invTexWidth=1/Y.texture.width,Y.invTexHeight=1/Y.texture.height;case 24:L++,r.next=17;break;case 27:for(X=[],U=0,V=d;U<V.length;U++)j=V[U],N=j.left,z=j.top,W=j.rotate?j.height:j.width,G=j.rotate?j.width:j.height,H=j.page,q=H.texture,J=H.invTexWidth,K=H.invTexHeight,X.push(new u.TextureRegion(q,N,z,W,G,j,J,K,j.rotate));return r.abrupt("return",new t(f,X));case 30:case"end":return r.stop()}}),s)})))}}]),t}();e.TextureAtlas=f},859:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureRegion=void 0;var a=function(){function t(e,n,i,a,s,o,h,l){var u=arguments.length>8&&void 0!==arguments[8]&&arguments[8];r(this,t),this.name=null,this.index=0,this.texture=null,this.regionX=0,this.regionY=0,this.width=0,this.height=0,this.invTexWidth=0,this.invTexHeight=0,this.originalWidth=0,this.originalHeight=0,this.offsetX=0,this.offsetY=0,this.u=0,this.v=0,this.u2=0,this.v2=0,this.rotated=!1,h&&l||(h=1/e.width,l=1/e.height);var c=n*h,f=(i+s)*l,d=(n+a)*h,v=i*l;for(var p in this.texture=e,this.regionX=n,this.regionY=i,this.width=a,this.height=s,this.originalWidth=a,this.originalHeight=s,this.offsetX=0,this.offsetY=0,this.u=c,this.v=f,this.u2=d,this.v2=v,this.rotated=u,o)this[p]=o[p]}return i(t,[{key:"draw",value:function(t,e,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1,u=this.originalWidth,c=this.originalHeight,f=this.offsetX,d=this.offsetY,v=this.width,p=this.height,g=r/u,m=i/c,y=v*g,x=p*m,M=e+f*g,w=0;a-=M-e,s-=(w=t.yDown?n+i-d*m-x:n+d*m)-n,t.draw(this.texture,M,w,y,x,a,s,o,h,l,this.u,this.v,this.u2,this.v2,this.rotated)}}],[{key:"splitTexture",value:function(e,n,r){for(var i=e.width/n,a=e.height/r,s=[],o=0;o<r;o++)for(var h=0;h<n;h++)s.push(new t(e,h*i,o*a,i,a,{}));return s}}]),t}();e.TextureRegion=a},8606:function(t,e,n){"use strict";var r,i=n(1655).default,a=n(6389).default,s=n(6690).default,o=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.copyArray=e.createStage=e.pointInRect=e.resizeCanvas=e.createGameLoop=e.WindowedMean=e.TimeKeeper=e.Pools=e.Pool=e.Utils=e.PowOut=e.Pow=e.Interpolation=e.MathUtils=e.Color=e.StringSet=e.IntSet=e.Align=void 0;var h=function(){function t(){s(this,t)}return o(t,null,[{key:"isLeft",value:function(t){return 0!==(t&this.left)}},{key:"isRight",value:function(t){return 0!==(t&this.right)}},{key:"isTop",value:function(t){return 0!==(t&this.top)}},{key:"isBottom",value:function(t){return 0!==(t&this.bottom)}},{key:"isCenterVertical",value:function(t){return 0===(t&this.top)&&0===(t&this.bottom)}},{key:"isCenterHorizontal",value:function(t){return 0===(t&this.left)&&0===(t&this.right)}}]),t}();e.Align=h,r=h,h.center=1,h.top=2,h.bottom=4,h.left=8,h.right=16,h.topLeft=r.top|r.left,h.topRight=r.top|r.right,h.bottomLeft=r.bottom|r.left,h.bottomRight=r.bottom|r.right;var l=function(){function t(){s(this,t),this.array=new Array}return o(t,[{key:"add",value:function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e}},{key:"contains",value:function(t){return void 0!==this.array[0|t]}},{key:"remove",value:function(t){this.array[0|t]=void 0}},{key:"clear",value:function(){this.array.length=0}}]),t}();e.IntSet=l;var u=function(){function t(){s(this,t),this.entries={},this.size=0}return o(t,[{key:"add",value:function(t){var e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)}},{key:"addAll",value:function(t){for(var e=this.size,n=0,r=t.length;n<r;n++)this.add(t[n]);return e!==this.size}},{key:"contains",value:function(t){return this.entries[t]}},{key:"clear",value:function(){this.entries={},this.size=0}}]),t}();e.StringSet=u;var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;s(this,t),this.r=e,this.g=n,this.b=r,this.a=i}return o(t,[{key:"unsafeSet",value:function(t,e,n,r){this.r=t,this.g=e,this.b=n,this.a=r}},{key:"set",value:function(t,e,n,r){return this.r=t,this.g=e,this.b=n,this.a=r,this.clamp()}},{key:"setFromColor",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}},{key:"setFromString",value:function(t){return t="#"===t.charAt(0)?t.substring(1):t,this.r=parseInt(t.substring(0,2),16)/255,this.g=parseInt(t.substring(2,4),16)/255,this.b=parseInt(t.substring(4,6),16)/255,this.a=8!==t.length?1:parseInt(t.substring(6,8),16)/255,this}},{key:"add",value:function(t,e,n,r){return this.r+=t,this.g+=e,this.b+=n,this.a+=r,this.clamp()}},{key:"clamp",value:function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}},{key:"toIntBits",value:function(){return 255*this.a<<24|255*this.b<<16|255*this.g<<8|255*this.r}}],[{key:"rgba8888ToColor",value:function(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255}},{key:"rgb888ToColor",value:function(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255}},{key:"fromString",value:function(e){return(new t).setFromString(e)}}]),t}();e.Color=c,c.WHITE=new c(1,1,1,1),c.RED=new c(1,0,0,1),c.GREEN=new c(0,1,0,1),c.BLUE=new c(0,0,1,1),c.MAGENTA=new c(1,0,1,1);var f=function(){function t(){s(this,t)}return o(t,null,[{key:"clamp",value:function(t,e,n){return t<e?e:t>n?n:t}},{key:"cosDeg",value:function(e){return Math.cos(e*t.degRad)}},{key:"sinDeg",value:function(e){return Math.sin(e*t.degRad)}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}},{key:"toInt",value:function(t){return t>0?Math.floor(t):Math.ceil(t)}},{key:"cbrt",value:function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}},{key:"randomTriangular",value:function(e,n){return t.randomTriangularWith(e,n,.5*(e+n))}},{key:"randomTriangularWith",value:function(t,e,n){var r=Math.random(),i=e-t;return r<=(n-t)/i?t+Math.sqrt(r*i*(n-t)):e-Math.sqrt((1-r)*i*(e-n))}},{key:"isPowerOfTwo",value:function(t){return t&&0===(t&t-1)}}]),t}();e.MathUtils=f,f.PI=3.1415927,f.PI2=2*f.PI,f.radiansToDegrees=180/f.PI,f.radDeg=f.radiansToDegrees,f.degreesToRadians=f.PI/180,f.degRad=f.degreesToRadians;var d=function(){function t(){s(this,t)}return o(t,[{key:"apply",value:function(t,e,n){return t+(e-t)*this.applyInternal(n)}}]),t}();e.Interpolation=d;var v=function(t){i(n,t);var e=a(n);function n(t){var r;return s(this,n),(r=e.call(this)).power=2,r.power=t,r}return o(n,[{key:"applyInternal",value:function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2===0?-2:2)+1}}]),n}(d);e.Pow=v;var p=function(t){i(n,t);var e=a(n);function n(){return s(this,n),e.apply(this,arguments)}return o(n,[{key:"applyInternal",value:function(t){return Math.pow(t-1,this.power)*(this.power%2===0?-1:1)+1}}]),n}(v);e.PowOut=p;var g=function(){function t(){s(this,t)}return o(t,null,[{key:"arrayCopy",value:function(t,e,n,r,i){for(var a=e,s=r;a<e+i;a++,s++)n[s]=t[a]}},{key:"arrayFill",value:function(t,e,n,r){for(var i=e;i<n;i++)t[i]=r}},{key:"setArraySize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.length;if(r===e)return t;if(t.length=e,r<e)for(var i=r;i<e;i++)t[i]=n;return t}},{key:"ensureArrayCapacity",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.length>=n?e:t.setArraySize(e,n,r)}},{key:"newArray",value:function(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n}},{key:"newFloatArray",value:function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var n=new Array(e),r=0;r<n.length;r++)n[r]=0;return n}},{key:"newShortArray",value:function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var n=new Array(e),r=0;r<n.length;r++)n[r]=0;return n}},{key:"toFloatArray",value:function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e}},{key:"toSinglePrecision",value:function(e){return t.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e}},{key:"contains",value:function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1}},{key:"enumValue",value:function(t,e){return t[e[0].toUpperCase()+e.slice(1)]}}]),t}();e.Utils=g,g.SUPPORTS_TYPED_ARRAYS="undefined"!==typeof Float32Array;var m=function(){function t(e){s(this,t),this.items=new Array,this.instantiator=e||function(){return{}}}return o(t,[{key:"obtain",value:function(){return this.items.length>0?this.items.pop():this.instantiator()}},{key:"free",value:function(t){(null===t||void 0===t?void 0:t.reset)&&t.reset(),this.items.push(t)}},{key:"freeAll",value:function(t){for(var e=0;e<t.length;e++)this.free(t[e])}},{key:"clear",value:function(){this.items.length=0}}]),t}();e.Pool=m;var y=function(){function t(){s(this,t)}return o(t,null,[{key:"free",value:function(t,e){this.pools[t]&&this.pools[t].free(e)}},{key:"freeAll",value:function(t,e){this.pools[t]&&this.pools[t].freeAll(e)}},{key:"get",value:function(t,e){return this.pools[t]||(this.pools[t]=new m(e)),this.pools[t]}},{key:"set",value:function(t,e){this.pools[t]=e}},{key:"obtain",value:function(t,e){return this.get(t,e).obtain()}}]),t}();e.Pools=y,y.pools={};var x=function(){function t(){s(this,t),this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return o(t,[{key:"update",value:function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}}]),t}();e.TimeKeeper=x;var M=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;s(this,t),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(e)}return o(t,[{key:"hasEnoughData",value:function(){return this.addedValues>=this.values.length}},{key:"addValue",value:function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0}},{key:"getMean",value:function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0}}]),t}();e.WindowedMean=M;e.createGameLoop=function(t){var e,n=Date.now(),r=0,i=!0,a=0,s=0;function o(){if(i){var h=Date.now()-n;n=Date.now(),a++,(s+=h)>=1e3&&(r=a,a=0,s-=1e3),e=requestAnimationFrame(o),t(h/1e3)}}return o(),{isRunning:function(){return i},start:function(){i||(i=!0,o())},stop:function(){e&&cancelAnimationFrame(e),i=!1},getFps:function(){return r}}};e.resizeCanvas=function(t,e){var n=e||window.devicePixelRatio||1,r=t.clientWidth*n,i=t.clientHeight*n;return t.width===r&&t.height===i||(t.width=r,t.height=i),[r,i]};e.pointInRect=function(t,e,n,r,i,a){return t>n&&t<n+i&&e>r&&e<r+a};e.createStage=function(t){t=Object.assign(Object.assign({},{hidden:!1,info:!0}),t);var e=document.createElement("div");e.setAttribute("style","position:fixed;top:0;left:0;right:0;bottom:0;"),t.wrapperClassName&&(e.className=t.wrapperClassName),t.hidden&&(e.style.display="none");var n=document.createElement("canvas");n.setAttribute("style","width:100%;height:100%;");var r=document.createElement("div");return r.setAttribute("style","position:absolute;top:1em;left:1em;color:white"),t.info||(r.style.display="none"),e.appendChild(n),e.appendChild(r),document.body.appendChild(e),{getCanvas:function(){return n},getInfo:function(){return r},show:function(){return e.style.display="block"},hide:function(){return e.style.display="none"},cleanup:function(){return document.body.removeChild(e)}}};e.copyArray=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length,a=0;a<i;a++)e[n+a]=t[r+a]}},2283:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Vector2=void 0;var a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,t),this.x=0,this.y=0,this.x=e,this.y=n}return i(t,[{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setVector",value:function(t){return this.set(t.x,t.y)}},{key:"add",value:function(t,e){return this.x+=t,this.y+=e,this}},{key:"addVector",value:function(t){return this.add(t.x,t.y)}},{key:"sub",value:function(t,e){return this.add(-t,-e)}},{key:"subVector",value:function(t){return this.sub(t.x,t.y)}},{key:"scale",value:function(t){return this.x*=t,this.y*=t,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"distanceSqr",value:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n}},{key:"distance",value:function(t){return Math.sqrt(this.distanceSqr(t))}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"len2",value:function(){return this.x*this.x+this.y*this.y}},{key:"len",value:function(){return Math.sqrt(this.len2())}},{key:"nor",value:function(){var t=this.len();return 0!==t&&(this.x/=t,this.y/=t),this}},{key:"rotateRad",value:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.x*e-this.y*n,i=this.x*n+this.y*e;return this.x=r,this.y=i,this}},{key:"rotate",value:function(t){return this.rotateRad(t*Math.PI/180)}},{key:"cpy",value:function(){return new t(this.x,this.y)}}]),t}();e.Vector2=a},7811:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Vector3=void 0;var a=n(4995),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,t),this.x=0,this.y=0,this.z=0,this.x=e,this.y=n,this.z=i}return i(t,[{key:"setFrom",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"set",value:function(t,e,n){return this.x=t,this.y=e,this.z=n,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}},{key:"scale",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"normalize",value:function(){var t=this.length();return 0===t||(t=1/t,this.x*=t,this.y*=t,this.z*=t),this}},{key:"cross",value:function(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}},{key:"multiply",value:function(t){var e=t.values;return this.set(this.x*e[a.M00]+this.y*e[a.M01]+this.z*e[a.M02]+e[a.M03],this.x*e[a.M10]+this.y*e[a.M11]+this.z*e[a.M12]+e[a.M13],this.x*e[a.M20]+this.y*e[a.M21]+this.z*e[a.M22]+e[a.M23])}},{key:"project",value:function(t){var e=t.values,n=1/(this.x*e[a.M30]+this.y*e[a.M31]+this.z*e[a.M32]+e[a.M33]);return this.set((this.x*e[a.M00]+this.y*e[a.M01]+this.z*e[a.M02]+e[a.M03])*n,(this.x*e[a.M10]+this.y*e[a.M11]+this.z*e[a.M12]+e[a.M13])*n,(this.x*e[a.M20]+this.y*e[a.M21]+this.z*e[a.M22]+e[a.M23])*n)}},{key:"unproject",value:function(t,e,n,r,i,a){var s=this.x,o=this.y,h=this.z;return s-=n,o=a-o-1,o-=r,t.set(2*s/i-1,2*o/a-1,2*h-1),t.project(e),t}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"distance",value:function(t){var e=t.x-this.x,n=t.y-this.y,r=t.z-this.z;return Math.sqrt(e*e+n*n+r*r)}}]),t}();e.Vector3=s},5533:function(t,e,n){"use strict";var r=n(4704).default,i=n(7424).default;Object.defineProperty(e,"__esModule",{value:!0}),e.createViewport=void 0;var a=n(7459),s=n(8606);e.createViewport=function(t,e,n,o){var h,l={autoUpdate:!0,pixelRatio:void 0,crop:!0};(o=Object.assign(Object.assign({},l),o)).disablePremultipliedAlpha&&(h={premultipliedAlpha:!1}),h=Object.assign(Object.assign({},h),o.contextOption);var u,c=t.getContext("webgl2",h),f=[],d=o,v=d.autoUpdate,p=d.pixelRatio,g=d.crop,m={pixelRatio:p=p||window.devicePixelRatio||1,x:0,y:0,width:e,height:n,worldWidth:e,worldHeight:n},y=(0,s.resizeCanvas)(t,p),x=i(y,2),M=x[0],w=x[1],b=new a.OrthoCamera(e,n,M,w);v&&(u=function(t){k.update()},window.addEventListener("resize",u));var k={getViewportInfo:function(){return m},getCamera:function(){return b},addCamera:function(t){f.push(t)},getContext:function(){return c},getCanvas:function(){return t},update:function(){var a=(0,s.resizeCanvas)(t,p),o=i(a,2),h=o[0],l=o[1],u=e/n,d=h/l;if(g){var v,y;u<d?(y=l,v=l*u):(v=h,y=h/u);var x=(h-v)/2,M=(l-y)/2;m.x=x,m.y=M,m.width=v,m.height=y,c.viewport(x,M,v,y),b.setPosition(e/2,n/2),b.resize(e,n,v,y);var w,k=r(f);try{for(k.s();!(w=k.n()).done;){var T=w.value;T.setPosition(e/2,n/2),T.resize(e,n,v,y)}}catch(R){k.e(R)}finally{k.f()}}else{var S,A,C,_;m.x=0,m.y=0,m.width=h,m.height=l,c.viewport(0,0,h,l),u<d?(C=-((S=(A=n)*d)-e)/2,_=0):(C=0,_=-((A=(S=e)/d)-n)/2),b.setPosition(C+S/2,_+A/2),b.resize(S,A,h,l);var I,E=r(f);try{for(E.s();!(I=E.n()).done;){var P=I.value;P.setPosition(C+S/2,_+A/2),P.resize(S,A,h,l)}}catch(R){E.e(R)}finally{E.f()}}},cleanUp:function(){u&&window.removeEventListener("resize",u)}};return v&&k.update(),k}},4411:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.ViewportInputHandler=void 0;var a=n(6964),s=n(2283),o=function(){function t(e){r(this,t),this.screenCoord=new s.Vector2,this.worldCoord=new s.Vector2,this.viewport=e,this.canvas=e.getCanvas(),this.inputHandler=new a.InputHandler(this.canvas)}return i(t,[{key:"isTouched",value:function(){return this.inputHandler.isTouched()}},{key:"cleanup",value:function(){this.inputHandler.cleanup()}},{key:"addEventListener",value:function(t,e){var n,r;this.inputHandler.addEventListener(t,(n=e,r=this.viewport,function(t,e){var i=r.getViewportInfo(),a=i.x,s=i.y,o=i.pixelRatio;n(t=t*o-a,e=e*o-s)}))}},{key:"getX",value:function(){var t=this.viewport.getViewportInfo(),e=t.x,n=t.pixelRatio;return this.inputHandler.getX()*n-e}},{key:"getY",value:function(){var t=this.viewport.getViewportInfo(),e=t.y,n=t.pixelRatio;return this.inputHandler.getY()*n-e}},{key:"getTouchedWorldCoord",value:function(t){return t||(t=this.viewport.getCamera()),this.screenCoord.set(this.getX(),this.getY()),t.unprojectVector2(this.worldCoord,this.screenCoord),this.worldCoord}}]),t}();e.ViewportInputHandler=o},2955:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(8656),e),i(n(2121),e),i(n(7581),e),i(n(3959),e),i(n(2791),e),i(n(5477),e),i(n(7459),e),i(n(6176),e),i(n(2013),e),i(n(7712),e),i(n(9045),e),i(n(6964),e),i(n(4995),e),i(n(1514),e),i(n(9699),e),i(n(1251),e),i(n(1858),e),i(n(5297),e),i(n(2987),e),i(n(7139),e),i(n(9396),e),i(n(859),e),i(n(8606),e),i(n(2283),e),i(n(7811),e),i(n(5533),e),i(n(4411),e)},3897:function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},5372:function(t){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},3405:function(t,e,n){var r=n(3897);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports},6115:function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},6690:function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},9728:function(t){function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},4704:function(t,e,n){var r=n(6116);t.exports=function(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,h=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){h=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(h)throw s}}}},t.exports.__esModule=!0,t.exports.default=t.exports},6389:function(t,e,n){var r=n(3808),i=n(9617),a=n(4993);t.exports=function(t){var e=i();return function(){var n,i=r(t);if(e){var s=r(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return a(this,n)}},t.exports.__esModule=!0,t.exports.default=t.exports},1588:function(t,e,n){var r=n(1753);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(t.exports=i=Reflect.get.bind(),t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=i=function(t,e,n){var i=r(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(arguments.length<3?t:n):a.value}},t.exports.__esModule=!0,t.exports.default=t.exports),i.apply(this,arguments)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},3808:function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},1655:function(t,e,n){var r=n(6015);t.exports=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},9617:function(t){t.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},9498:function(t){t.exports=function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},8872:function(t){t.exports=function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a=[],s=!0,o=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);s=!0);}catch(h){o=!0,i=h}finally{try{s||null==n.return||n.return()}finally{if(o)throw i}}return a}},t.exports.__esModule=!0,t.exports.default=t.exports},2218:function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},2281:function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},4993:function(t,e,n){var r=n(8698).default,i=n(6115);t.exports=function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return i(t)},t.exports.__esModule=!0,t.exports.default=t.exports},7061:function(t,e,n){var r=n(8698).default;function i(){"use strict";t.exports=i=function(){return e},t.exports.__esModule=!0,t.exports.default=t.exports;var e={},n=Object.prototype,a=n.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",h=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(I){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new A(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return _()}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var o=k(s,n);if(o){if(o===d)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=f(t,e,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}(t,n,s),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function v(){}function p(){}function g(){}var m={};u(m,o,(function(){return this}));var y=Object.getPrototypeOf,x=y&&y(y(C([])));x&&x!==n&&a.call(x,o)&&(m=x);var M=g.prototype=v.prototype=Object.create(m);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(i,s,o,h){var l=f(t[i],t,s);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==r(c)&&a.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,o,h)}),(function(t){n("throw",t,o,h)})):e.resolve(c).then((function(t){u.value=t,o(u)}),(function(t){return n("throw",t,o,h)}))}h(l.arg)}var i;this._invoke=function(t,r){function a(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(a,a):a()}}function k(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(a.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:_}}function _(){return{value:void 0,done:!0}}return p.prototype=g,u(M,"constructor",g),u(g,"constructor",p),p.displayName=u(g,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,l,"GeneratorFunction")),t.prototype=Object.create(M),t},e.awrap=function(t){return{__await:t}},w(b.prototype),u(b.prototype,h,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var s=new b(c(t,n,r,i),a);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},w(M),u(M,l,"Generator"),u(M,o,(function(){return this})),u(M,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return s.type="throw",s.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var o=a.call(i,"catchLoc"),h=a.call(i,"finallyLoc");if(o&&h){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},6015:function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},7424:function(t,e,n){var r=n(5372),i=n(8872),a=n(6116),s=n(2218);t.exports=function(t,e){return r(t)||i(t,e)||a(t,e)||s()},t.exports.__esModule=!0,t.exports.default=t.exports},1753:function(t,e,n){var r=n(3808);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t},t.exports.__esModule=!0,t.exports.default=t.exports},861:function(t,e,n){var r=n(3405),i=n(9498),a=n(6116),s=n(2281);t.exports=function(t){return r(t)||i(t)||a(t)||s()},t.exports.__esModule=!0,t.exports.default=t.exports},8698:function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},6116:function(t,e,n){var r=n(3897);t.exports=function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,n),a.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){e=function(){return n};var n={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",h=a.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(_){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),s=new S(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var o=b(s,n);if(o){if(o===f)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=c(t,e,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===f)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}(t,n,s),a}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(_){return{type:"throw",arg:_}}}n.wrap=u;var f={};function d(){}function v(){}function p(){}var g={};l(g,s,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(A([])));y&&y!==r&&i.call(y,s)&&(g=y);var x=p.prototype=d.prototype=Object.create(g);function M(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function w(e,n){function r(a,s,o,h){var l=c(e[a],e,s);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==t(f)&&i.call(f,"__await")?n.resolve(f.__await).then((function(t){r("next",t,o,h)}),(function(t){r("throw",t,o,h)})):n.resolve(f).then((function(t){u.value=t,o(u)}),(function(t){return r("throw",t,o,h)}))}h(l.arg)}var a;this._invoke=function(t,e){function i(){return new n((function(n,i){r(t,e,n,i)}))}return a=a?a.then(i,i):i()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function A(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=p,l(x,"constructor",p),l(p,"constructor",v),v.displayName=l(p,h,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,l(t,h,"GeneratorFunction")),t.prototype=Object.create(x),t},n.awrap=function(t){return{__await:t}},M(w.prototype),l(w.prototype,o,(function(){return this})),n.AsyncIterator=w,n.async=function(t,e,r,i,a){void 0===a&&(a=Promise);var s=new w(u(t,e,r,i),a);return n.isGeneratorFunction(e)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},M(x),l(x,h,"Generator"),l(x,s,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},n.values=A,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return s.type="throw",s.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var o=i.call(a,"catchLoc"),h=i.call(a,"finallyLoc");if(o&&h){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=t,s.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:A(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},n}function r(t,e,n,r,i,a,s){try{var o=t[a](s),h=o.value}catch(l){return void n(l)}o.done?e(h):Promise.resolve(h).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var s=t.apply(e,n);function o(t){r(s,i,a,o,h,"next",t)}function h(t){r(s,i,a,o,h,"throw",t)}o(void 0)}))}}var a=n(2955);function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=o((function t(){h(this,t)}));function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){if(t){if("string"===typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function f(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=c(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}l.WORLD_WIDTH=500,l.WORLD_HEIGHT=1e3,l.TOTAL_FROG_TYPE=10,l.TOTAL_LEVEL=50,l.BRANCH_WIDTH=300,l.BRANCH_HEIGHT=l.BRANCH_WIDTH*(621/724),l.BRANCH_OFFSET=100,l.BRANCH_MAX_FROG=4,l.FROG_OFFSET=55,l.FROG_SKELETON_SCALE=.35,l.FROG_JUMP_TIME=.7,l.JUMP_TO_WATER_DELAY=.5,l.DISTANCE_FROG_JUMP_TO_WATER=l.BRANCH_HEIGHT/2+30;var d,v,p,g,m,y,x,M=n(8041),w=n.n(M),b=n(9997),k=n(2474);function T(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a=[],s=!0,o=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);s=!0);}catch(h){o=!0,i=h}finally{try{s||null==n.return||n.return()}finally{if(o)throw i}}return a}}(t,e)||c(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function A(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(t,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},C(t,e)}function _(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}function I(t){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},I(t)}function E(e,n){if(n&&("object"===t(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}function P(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=I(t);if(e){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}function R(t,e,n,r,i){var a={};return Object.keys(r).forEach((function(t){a[t]=r[t]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(t,e,a),a=null),a}var F,B,O,L,D,Y,X,U,V,j,N,z,W,G,H,q,J,K,Q,Z,$="jump",tt=(d=(0,b.tB)("effectStates"),v=(0,b.tB)("eventEmitter"),p=(0,b.tB)("frogSpines"),g=function(t){_(n,t);var e=P(n);function n(){var t;h(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return S(t=e.call.apply(e,[this].concat(i)),"effectStates",m,A(t)),S(t,"eventEmitter",y,A(t)),S(t,"frogSpines",x,A(t)),t}return o(n,[{key:"process",value:function(){var t,e=f(this.effectStates.branchEffects);try{for(e.s();!(t=e.n()).done;){var n=T(t.value,2),r=n[0],i=n[1];void 0!==i.branchTransition&&(i.branchTransition.delay>0?i.branchTransition.delay-=this.world.delta:(i.branchTransition.remainingTime-=this.world.delta,i.branchTransition.remainingTime<=0&&(i.branchTransition=void 0)));var a,s=f(i.frogTransitions);try{for(s.s();!(a=s.n()).done;){var o,h=T(a.value,2),l=h[0],u=h[1],c=f(u);try{for(c.s();!(o=c.n()).done;){var d=o.value,v=this.frogSpines.get(d.spineIndex);if(d.delay>0)d.delay-=this.world.delta,d.delay<=0&&(d.remainingTime+=d.delay,v.animationState.clearTracks());else{if(d.extra.y>0){var p=v.animationState.getCurrent(0);p&&p.animation.name===$||((p=v.animationState.setAnimation(0,$)).timeScale=p.animation.duration/d.duration)}if(d.remainingTime-=this.world.delta,d.remainingTime<=0){var g=u.indexOf(d);u.splice(g,1),v.animationState.setAnimation(0,"idle",!0)}}0===u.length&&i.frogTransitions.delete(l),0!==i.frogTransitions.size||i.branchTransition||this.effectStates.branchEffects.delete(r),0===this.effectStates.branchEffects.size&&this.eventEmitter.emit("checkEndGame")}}catch(m){c.e(m)}finally{c.f()}}}catch(m){s.e(m)}finally{s.f()}}}catch(m){e.e(m)}finally{e.f()}}}]),n}(b.xP),m=R(g.prototype,"effectStates",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=R(g.prototype,"eventEmitter",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=R(g.prototype,"frogSpines",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g),et=(F=(0,b.tB)("polygonBatch"),B=(0,b.tB)("assetManager"),O=(0,b.tB)("levelState"),L=function(t){_(n,t);var e=P(n);function n(){var t;h(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return S(t=e.call.apply(e,[this].concat(i)),"polygonBatch",D,A(t)),S(t,"assetManager",Y,A(t)),S(t,"levelState",X,A(t)),t.bgTexture=void 0,t.scale=void 0,t}return o(n,[{key:"initialized",value:function(){this.bgTexture=this.assetManager.getTexture("bg_".concat(this.levelState.themeIndex+1)),this.scale=l.WORLD_HEIGHT/this.bgTexture.height}},{key:"process",value:function(){this.polygonBatch.begin(),this.polygonBatch.draw(this.bgTexture,-(this.bgTexture.width*this.scale-l.WORLD_WIDTH)/2,0,this.bgTexture.width*this.scale,this.bgTexture.height*this.scale),this.polygonBatch.end()}}]),n}(b.xP),D=R(L.prototype,"polygonBatch",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=R(L.prototype,"assetManager",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=R(L.prototype,"levelState",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L),nt=function(t,e,n,r){return t.setVector(n).subVector(e).scale(r).addVector(e)},rt=(U=(0,b.tB)("polygonBatch"),V=(0,b.tB)("levelData"),j=(0,b.tB)("assetManager"),N=(0,b.tB)("branches"),z=(0,b.tB)("effectStates"),W=(0,b.tB)("levelState"),G=function(t){_(n,t);var e=P(n);function n(){var t;h(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return S(t=e.call.apply(e,[this].concat(i)),"polygonBatch",H,A(t)),S(t,"levelData",q,A(t)),S(t,"assetManager",J,A(t)),S(t,"branches",K,A(t)),S(t,"effectStates",Q,A(t)),S(t,"levelState",Z,A(t)),t.branchRegion=void 0,t.m1=new a.Vector2,t.m2=new a.Vector2,t.transitionPeak=new a.Vector2,t.branchPos=new a.Vector2,t}return o(n,[{key:"initialized",value:function(){var t=this.assetManager.getAtlas("objects");this.branchRegion=t.findRegions("leaf")}},{key:"process",value:function(){this.polygonBatch.begin();for(var t=0;t<this.branches.length;t++){var e=this.branches[t];if(e){var n=this.effectStates.branchEffects.get(t);if(n&&void 0!==n.branchTransition&&n.branchTransition.delay<=0){var r=n.branchTransition,i=1-r.remainingTime/r.duration;this.transitionPeak.set(e.x,r.to.y),nt(this.m1,r.from,this.transitionPeak,i),nt(this.m2,this.transitionPeak,r.to,i),nt(this.branchPos,this.m1,this.m2,i),this.branchRegion[this.levelState.themeIndex].draw(this.polygonBatch,e.x,this.branchPos.y,e.width,e.height,e.width/2,e.height/2,0,e.flip?-1:1)}else this.branchRegion[this.levelState.themeIndex].draw(this.polygonBatch,e.x,e.y,e.width,e.height,e.width/2,e.height/2,0,e.flip?-1:1)}}this.polygonBatch.end()}}]),n}(b.xP),H=R(G.prototype,"polygonBatch",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=R(G.prototype,"levelData",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=R(G.prototype,"assetManager",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=R(G.prototype,"branches",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=R(G.prototype,"effectStates",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=R(G.prototype,"levelState",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G),it=function(t,e){var n=new a.Vector2,r=e.flip?l.WORLD_WIDTH-l.FROG_OFFSET/2:e.x+l.FROG_OFFSET/2;return n.x=r+(e.flip?-1:1)*t*l.FROG_OFFSET,n.y=e.y+l.BRANCH_HEIGHT/2+10,n},at=function(t){_(n,t);var e=P(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10920;return h(this,n),(r=e.call(this,t,i,s)).currentShader=void 0,r.currentShader=new a.Shader(t,n.VS,n.FS),r.setShader(r.currentShader),r}return o(n)}(a.PolygonBatch);at.VS="\n    #ifdef GL_ES\n      #define LOWP lowp\n      precision highp float;\n    #else\n      #define LOWP\n    #endif\n    attribute vec4 ".concat(a.Shader.POSITION,";\n    attribute vec4 ").concat(a.Shader.COLOR,";\n    attribute vec2 ").concat(a.Shader.TEXCOORDS,";\n    uniform mat4 ").concat(a.Shader.MVP_MATRIX,";\n    varying vec4 v_color;\n    varying vec2 v_texCoords;\n\n    void main () {\n      v_color = ").concat(a.Shader.COLOR,";\n      v_texCoords = ").concat(a.Shader.TEXCOORDS,";\n      gl_Position = ").concat(a.Shader.MVP_MATRIX," * ").concat(a.Shader.POSITION,";\n    }\n  "),at.FS="\n  #ifdef GL_ES\n  #define LOWP lowp\n    precision highp float;\n  #else\n    #define LOWP\n  #endif\n  varying vec4 v_color;\n  varying vec2 v_texCoords;\n  uniform sampler2D u_texture;\n  uniform mat4 ".concat(a.Shader.MVP_MATRIX,";\n\n  #define FLOAT_MAX  1.70141184e38\n  #define FLOAT_MIN  1.17549435e-38\n\n  void main () {\n    // BLUR\n    const float Pi = 6.28318530718; // Pi*2\n    const float Directions = 16.0;\n    const float Quality = 4.0;\n    float Size = 2.0;\n    vec4 Radius4 = ").concat(a.Shader.MVP_MATRIX," * vec4(Size, Size, 0.0, 0.0);\n    vec2 Radius = Radius4.xy;\n    vec2 uv = v_texCoords;\n    vec4 Color = texture2D(u_texture, uv);\n    for( float d=0.0; d<Pi; d+=Pi/Directions)\n    {\n      for(float i=1.0/Quality; i<=1.0; i+=1.0/Quality)\n      {\n        Color += texture2D( u_texture, uv+vec2(cos(d),sin(d))*Radius*i);\t\t\n      }\n    }\n    Color /= Quality * Directions - 15.0;\n    gl_FragColor = v_color * texture2D(u_texture, v_texCoords) * Color.a;\n    }\n  ");var st=function(t){_(n,t);var e=P(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10920;return h(this,n),(r=e.call(this,t,i,s)).currentShader=void 0,r.currentShader=new a.Shader(t,n.VS,n.FS),r.setShader(r.currentShader),r}return o(n)}(a.PolygonBatch);st.VS="\n    #ifdef GL_ES\n      #define LOWP lowp\n      precision highp float;\n    #else\n      #define LOWP\n    #endif\n    attribute vec4 ".concat(a.Shader.POSITION,";\n    attribute vec4 ").concat(a.Shader.COLOR,";\n    attribute vec2 ").concat(a.Shader.TEXCOORDS,";\n    uniform mat4 ").concat(a.Shader.MVP_MATRIX,";\n    varying vec4 v_color;\n    varying vec2 v_texCoords;\n\n    void main () {\n      v_color = ").concat(a.Shader.COLOR,";\n      v_texCoords = ").concat(a.Shader.TEXCOORDS,";\n      gl_Position = ").concat(a.Shader.MVP_MATRIX," * ").concat(a.Shader.POSITION,";\n    }\n  "),st.FS="\n  #ifdef GL_ES\n  #define LOWP lowp\n    precision highp float;\n  #else\n    #define LOWP\n  #endif\n  varying vec4 v_color;\n  varying vec2 v_texCoords;\n  uniform sampler2D u_texture;\n  uniform mat4 ".concat(a.Shader.MVP_MATRIX,";\n\n  #define FLOAT_MAX  1.70141184e38\n  #define FLOAT_MIN  1.17549435e-38\n\n  vec4 composite(vec4 over, vec4 under){\n    return over + (1.0 - over.a)*under;\n  }\n\n  void main () {\n    // OUTLINE\n    float width = 1.5 / float(").concat(l.WORLD_WIDTH,");\n    float outlineAlpha = 0.0;\n    outlineAlpha += texture2D(u_texture, v_texCoords + vec2(width, 0.0)).a;\n    outlineAlpha += texture2D(u_texture, v_texCoords + vec2(-width, 0.0)).a;\n    outlineAlpha += texture2D(u_texture, v_texCoords + vec2(0.0, width)).a;\n    outlineAlpha += texture2D(u_texture, v_texCoords + vec2(0.0, -width)).a;\n    \n    outlineAlpha += texture2D(u_texture, v_texCoords + vec2(width, width)).a;\n    outlineAlpha += texture2D(u_texture, v_texCoords + vec2(-width, width)).a;\n    outlineAlpha += texture2D(u_texture, v_texCoords + vec2(width, -width)).a;\n    outlineAlpha += texture2D(u_texture, v_texCoords + vec2(-width, -width)).a;\n\n    vec4 outlineColor = vec4(1.0, 1.0, 1.0, 1.0) * outlineAlpha;\n    vec4 textureColor = texture2D(u_texture, v_texCoords);\n    gl_FragColor = v_color * composite(textureColor, outlineColor);\n    }\n  ");var ot,ht,lt,ut,ct,ft,dt,vt,pt,gt,mt,yt,xt,Mt,wt,bt,kt,Tt,St,At,Ct,_t,It,Et,Pt,Rt,Ft,Bt,Ot,Lt,Dt,Yt,Xt,Ut=function(){function t(){h(this,t)}return o(t,null,[{key:"createEmptyTexture",value:function(){var t=i(e().mark((function t(n,r,i){var s,o;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Math.ceil(r),i=Math.ceil(i),s=new ImageData(new Uint8ClampedArray(r*i*4),r,i),t.t0=a.Texture,t.t1=n,t.next=7,createImageBitmap(s);case 7:return t.t2=t.sent,o=new t.t0(t.t1,t.t2),t.abrupt("return",o);case 10:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),t}(),Vt=(ot=(0,b.tB)("gl"),ht=(0,b.tB)("camera"),lt=(0,b.tB)("viewport"),ut=(0,b.tB)("polygonBatch"),ct=(0,b.tB)("skeletonRenderer"),ft=(0,b.tB)("branches"),dt=(0,b.tB)("effectStates"),vt=(0,b.tB)("frogSpines"),pt=(0,b.tB)("levelState"),gt=function(t){_(n,t);var e=P(n);function n(){var t;h(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return S(t=e.call.apply(e,[this].concat(i)),"gl",mt,A(t)),S(t,"camera",yt,A(t)),S(t,"viewport",xt,A(t)),S(t,"polygonBatch",Mt,A(t)),S(t,"skeletonRenderer",wt,A(t)),S(t,"branches",bt,A(t)),S(t,"effectStates",kt,A(t)),S(t,"frogSpines",Tt,A(t)),S(t,"levelState",St,A(t)),t.outlineBatch=void 0,t.blurBatch=void 0,t.frogPos=new a.Vector2,t.cp=new a.Vector2,t.m1=new a.Vector2,t.m2=new a.Vector2,t.outlineRenderTexture=void 0,t.blurRenderTexture=void 0,t.fbo=void 0,t}return o(n,[{key:"initialized",value:function(){var t=this;this.outlineBatch=new st(this.gl,!1),this.blurBatch=new at(this.gl,!1),this.fbo=this.gl.createFramebuffer(),Ut.createEmptyTexture(this.gl,l.WORLD_WIDTH,l.WORLD_HEIGHT).then((function(e){t.outlineRenderTexture=e})),Ut.createEmptyTexture(this.gl,l.WORLD_WIDTH,l.WORLD_HEIGHT).then((function(e){t.blurRenderTexture=e}))}},{key:"processDrawFrog",value:function(t,e,n,r){r&&(e.animationState.update(this.world.delta),e.animationState.apply(e.skeleton)),e.skeleton.x=n.x,e.skeleton.y=n.y,e.skeleton.scaleX=l.FROG_SKELETON_SCALE,e.skeleton.scaleY=l.FROG_SKELETON_SCALE,e.skeleton.updateWorldTransform(),this.skeletonRenderer.draw(t,e.skeleton)}},{key:"drawFrogs",value:function(t,e){t.begin();for(var n=0;n<this.branches.length;n++){var r=this.branches[n];if(r){var i=n===this.levelState.selectingBranch;if(!e||i){var a=this.effectStates.branchEffects.get(n);if(void 0===a)for(var s=r.frogs.length>0?r.frogs[r.frogs.length-1].type:void 0,o=r.frogs.length-1;o>=0;o--){var h=r.frogs[o];if(e&&i&&s!==h.type)break;var l=it(o,r),u=this.frogSpines.get(r.frogs[o].spineIndex);this.processDrawFrog(t,u,l,!e)}else{var c,d=f(a.frogTransitions);try{for(d.s();!(c=d.n()).done;){var v=T(c.value,2),p=v[0],g=v[1][0];if(g.delay>0){var m=it(p,r),y=this.frogSpines.get(g.spineIndex);this.processDrawFrog(t,y,m,!e)}else{var x=Math.max(g.from.y,g.to.y)+g.extra.y,M=1-g.remainingTime/g.duration;this.cp.set(g.from.x+(g.to.x-g.from.x)/2,x),nt(this.m1,g.from,this.cp,M),nt(this.m2,this.cp,g.to,M),nt(this.frogPos,this.m1,this.m2,M);var w=this.frogSpines.get(g.spineIndex);this.processDrawFrog(t,w,this.frogPos,!e)}}}catch(E){d.e(E)}finally{d.f()}for(var b=0;b<r.frogs.length;b++){var k=a.frogTransitions.get(b),S=0;if(void 0!==k){var A,C=f(k);try{for(C.s();!(A=C.n()).done;){S+=A.value.delay}}catch(E){C.e(E)}finally{C.f()}}if(0===S){var _=it(b,r),I=this.frogSpines.get(r.frogs[b].spineIndex);this.processDrawFrog(t,I,_,!e)}}}}}}t.end()}},{key:"bindFBO",value:function(t){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbo),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,t.getWebGLTexture(),0),this.gl.viewport(0,0,t.width,t.height),this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}},{key:"unbindFBO",value:function(t){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.viewport(t.x,t.y,t.width,t.height)}},{key:"drawPrerenderedTexture",value:function(t,e){t.begin(),t.draw(e,0,0,l.WORLD_WIDTH,l.WORLD_HEIGHT,0,l.WORLD_HEIGHT/2,0,1,-1),t.end()}},{key:"process",value:function(){if(void 0!==this.outlineRenderTexture&&void 0!==this.blurRenderTexture){var t=this.viewport.getViewportInfo();this.outlineBatch.setProjection(this.camera.combined),this.blurBatch.setProjection(this.camera.combined),this.bindFBO(this.outlineRenderTexture),this.drawFrogs(this.polygonBatch,!0),this.unbindFBO(t),this.bindFBO(this.blurRenderTexture),this.drawPrerenderedTexture(this.outlineBatch,this.outlineRenderTexture),this.unbindFBO(t),this.drawPrerenderedTexture(this.blurBatch,this.blurRenderTexture),this.drawFrogs(this.polygonBatch,!1)}}},{key:"dispose",value:function(){var t,e;this.outlineBatch.dispose(),null===(t=this.outlineRenderTexture)||void 0===t||t.dispose(),null===(e=this.blurRenderTexture)||void 0===e||e.dispose(),this.gl.deleteFramebuffer(this.fbo)}}]),n}(b.xP),mt=R(gt.prototype,"gl",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yt=R(gt.prototype,"camera",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xt=R(gt.prototype,"viewport",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mt=R(gt.prototype,"polygonBatch",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wt=R(gt.prototype,"skeletonRenderer",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bt=R(gt.prototype,"branches",[ft],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kt=R(gt.prototype,"effectStates",[dt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tt=R(gt.prototype,"frogSpines",[vt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),St=R(gt.prototype,"levelState",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gt),jt=.1,Nt=(At=(0,b.tB)("inputHandler"),Ct=(0,b.tB)("effectStates"),_t=(0,b.tB)("branches"),It=(0,b.tB)("levelState"),Et=function(t){_(n,t);var e=P(n);function n(){var t;h(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return S(t=e.call.apply(e,[this].concat(i)),"inputHandler",Pt,A(t)),S(t,"effectStates",Rt,A(t)),S(t,"branches",Ft,A(t)),S(t,"levelState",Bt,A(t)),t.canTriggerJustTouched=!0,t.justTouched=!1,t}return o(n,[{key:"checkBranchSameColor",value:function(t){if(t.frogs.length<l.BRANCH_MAX_FROG)return!1;for(var e=t.frogs.length-1;e>0;e--)if(t.frogs[e].type!==t.frogs[e-1].type)return!1;return!0}},{key:"cleanBranch",value:function(t,e){this.effectStates.branchEffects.has(t)||this.effectStates.branchEffects.set(t,{frogTransitions:new Map});var n,r=this.effectStates.branchEffects.get(t),i=0,s=f(r.frogTransitions);try{for(s.s();!(n=s.n()).done;){var o,h=f(T(n.value,2)[1]);try{for(h.s();!(o=h.n()).done;){var u=o.value;u.duration>i&&(i=u.duration)}}catch(g){h.e(g)}finally{h.f()}}}catch(g){s.e(g)}finally{s.f()}for(var c=0;c<e.frogs.length;c++){var d=it(c,e),v={from:d,to:new a.Vector2(d.x,d.y-l.DISTANCE_FROG_JUMP_TO_WATER),extra:new a.Vector2(0,200),remainingTime:l.FROG_JUMP_TIME,duration:l.FROG_JUMP_TIME,spineIndex:e.frogs[c].spineIndex,delay:i+l.JUMP_TO_WATER_DELAY+jt},p=r.frogTransitions.get(c);void 0===p?r.frogTransitions.set(c,[v]):p.push(v)}e.frogs.length=0}},{key:"applyChimXuong",value:function(t,e){e.branchTransition={from:new a.Vector2(t.x,t.y),to:new a.Vector2(t.x,t.y-5),delay:l.FROG_JUMP_TIME,duration:jt,remainingTime:jt};for(var n=0;n<t.frogs.length;n++){var r=it(n,t),i={from:r,to:new a.Vector2(r.x,r.y-5),extra:new a.Vector2,remainingTime:jt,duration:jt,spineIndex:t.frogs[n].spineIndex,delay:l.FROG_JUMP_TIME},s=e.frogTransitions.get(n);void 0===s?e.frogTransitions.set(n,[i]):s.push(i)}}},{key:"processTouchBranch",value:function(){if(this.justTouched)for(var t=this.inputHandler.getTouchedWorldCoord(),e=0;e<this.branches.length;e++){var n=this.branches[e];if(n&&(0,a.pointInRect)(t.x,t.y-.5*n.height/2,n.x,n.y,n.width,.5*n.height)){if(this.levelState.selectingBranch===e)return;if(void 0===this.levelState.selectingBranch)return void(0!==n.frogs.length&&(this.levelState.selectingBranch=e));if(n.frogs.length===l.BRANCH_MAX_FROG)return void(this.levelState.selectingBranch=e);var r=0,i=this.branches[this.levelState.selectingBranch],s=i.frogs[i.frogs.length-1].type;if(0===n.frogs.length?r=l.BRANCH_MAX_FROG:n.frogs[n.frogs.length-1].type===s&&(r=l.BRANCH_MAX_FROG-n.frogs.length),0===r)return void(this.levelState.selectingBranch=void 0);var o=this.effectStates.branchEffects.get(e);void 0===o&&(o={frogTransitions:new Map},this.effectStates.branchEffects.set(e,o),o.branchTransition={from:new a.Vector2(n.x,n.y),to:new a.Vector2(n.x,n.y-5),delay:l.FROG_JUMP_TIME,duration:jt,remainingTime:jt});for(var h=0;h<r;h++){var u=i.frogs[i.frogs.length-1];if(u.type===s){n.frogs.push(u);var c={from:it(i.frogs.length-1,i),to:it(n.frogs.length-1,n),extra:new a.Vector2(0,200),remainingTime:l.FROG_JUMP_TIME,duration:l.FROG_JUMP_TIME,spineIndex:u.spineIndex,delay:0},f=o.frogTransitions.get(n.frogs.length-1);void 0===f?o.frogTransitions.set(n.frogs.length-1,[c]):f.push(c),i.frogs.pop()}if(0===i.frogs.length)break}this.applyChimXuong(n,o),this.checkBranchSameColor(n)&&this.cleanBranch(e,n),this.levelState.selectingBranch=void 0}}}},{key:"process",value:function(){this.justTouched?this.justTouched=!1:this.inputHandler.isTouched()?this.canTriggerJustTouched&&(this.justTouched=!0,this.canTriggerJustTouched=!1):(this.justTouched=!1,this.canTriggerJustTouched=!0),this.processTouchBranch()}}]),n}(b.xP),Pt=R(Et.prototype,"inputHandler",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rt=R(Et.prototype,"effectStates",[Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ft=R(Et.prototype,"branches",[_t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bt=R(Et.prototype,"levelState",[It],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Et),zt=(Ot=(0,b.tB)("assetManager"),Lt=(0,b.tB)("batch"),Dt=function(t){_(n,t);var e=P(n);function n(){var t;h(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return S(t=e.call.apply(e,[this].concat(i)),"assetManager",Yt,A(t)),S(t,"batch",Xt,A(t)),t.uiAtlas=void 0,t}return o(n,[{key:"initialized",value:function(){}},{key:"process",value:function(){}}]),n}(b.xP),Yt=R(Dt.prototype,"assetManager",[Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xt=R(Dt.prototype,"batch",[Lt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dt),Wt=o((function t(){h(this,t)}));function Gt(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Wt.addListener=function(t,e,n){return t.addListener(e,n),function(){return t.removeListener(e,n)}};var Ht=new Map,qt=function(){var t=i(e().mark((function t(n){var r,i,a,s;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Ht.has(n)){t.next=2;break}return t.abrupt("return",Ht.get(n));case 2:return t.next=4,fetch("./level/levels-".concat(n+1,".json")).then((function(t){return t.json()}));case 4:for(r=t.sent,i=[],a=0;a<r.levels[0].map.length;a++)-1===(s=r.levels[0].map[a].values)&&i.push(void 0),"object"===typeof s&&i.push(Gt(s));return t.abrupt("return",i);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Jt=function(){var t=i(e().mark((function t(n,r){var i,s,o,h,u,c,d,v,p,g,m,y,x,M,T,S,A,C,_,I,E,P,R,F,B,O,L,D,Y,X,U,V,j,N,z,W,G,H,q,J=arguments;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i=J.length>2&&void 0!==J[2]?J[2]:0,s=n.getContext(),o=n.getCamera(),h=new a.PolygonBatch(s,!0),u=new a.ViewportInputHandler(n),c=["json/ech1.json","json/ech2.json","json/ech3.json","json/ech4.json","json/ech5.json","json/ech6.json","json/ech7.json","json/ech8.json","json/ech9.json","json/ech10.json","json/ech11.json"],d=new k.SkeletonRenderer(s,!0),(v=new k.SpineAssetManager(s,"./assets/")).loadTextureAtlas("atlas/ech.atlas"),p=0,g=c;p<g.length;p++)m=g[p],v.loadJson(m);return t.next=12,v.loadAll();case 12:for(y=new k.AtlasAttachmentLoader(v.get("atlas/ech.atlas")),x=new k.SkeletonJson(y),M=[],T=0;T<l.TOTAL_FROG_TYPE;T++)S=x.readSkeletonData(v.get("json/ech".concat(T+1,".json"))),M.push(S);return t.next=18,qt(i);case 18:A=t.sent,C=[],_=new Map,I=0,E=0,P=.6*l.WORLD_HEIGHT+A.length%2*l.BRANCH_OFFSET,R=0;case 25:if(!(R<A.length)){t.next=63;break}if(F=A[R]){t.next=31;break}C.push(void 0),t.next=58;break;case 31:B=[],O=f(F),t.prev=33,O.s();case 35:if((L=O.n()).done){t.next=48;break}if(D=L.value,Y=M[D]){t.next=40;break}return t.abrupt("continue",46);case 40:(X=new k.AnimationState(new k.AnimationStateData(Y))).setAnimation(0,"idle",!0),U=new k.Skeleton(Y),V=_.size-1,_.set(V,{skeleton:U,animationState:X}),B.push({type:D,spineIndex:V});case 46:t.next=35;break;case 48:t.next=53;break;case 50:t.prev=50,t.t0=t.catch(33),O.e(t.t0);case 53:return t.prev=53,O.f(),t.finish(53);case 56:j=R%2!==0,C.push({flip:j,x:j?l.WORLD_WIDTH-l.BRANCH_WIDTH:0,y:P-I*l.BRANCH_OFFSET+50,width:l.BRANCH_WIDTH,height:l.BRANCH_HEIGHT,frogs:B});case 58:2===++E&&(E=0,I++);case 60:R++,t.next=25;break;case 63:return N={branchEffects:new Map},z={themeIndex:i%4},W=void 0,G=new(w()),H=Wt.addListener(G,"checkEndGame",(function(){var t,e=f(C);try{for(e.s();!(t=e.n()).done;){var s=t.value;if(void 0!==s&&s.frogs.length>0)return}}catch(o){e.e(o)}finally{e.f()}Jt(n,r,i+1).then((function(t){a.Game.shared.setScreen(t)}))})),(q=new b.q3).register("gl",s),q.register("viewport",n),q.register("camera",o),q.register("polygonBatch",h),q.register("assetManager",r),q.register("inputHandler",u),q.register("spineAssetManager",v),q.register("skeletonRenderer",d),q.register("eventEmitter",G),q.register("levelData",A),q.register("branches",C),q.register("effectStates",N),q.register("frogSpines",_),q.register("levelState",z),q.register("selectingBranch",W),q.addSystem(new et,!1),q.addSystem(new rt,!1),q.addSystem(new Vt,!1),q.addSystem(new Nt,!0),q.addSystem(new tt,!0),q.addSystem(new zt,!1),t.abrupt("return",{update:function(t){h.setProjection(o.combined),q.setDelta(t),q.processActiveSystem(),q.processPassiveSystem()},dispose:function(){u.cleanup(),H()}});case 91:case"end":return t.stop()}}),t,null,[[33,50,53,56]])})));return function(e,n){return t.apply(this,arguments)}}(),Kt=function(){var t=i(e().mark((function t(){var n,r,i,s,o,h;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,a.createStage)(),r=n.getCanvas(),i=(0,a.createViewport)(r,l.WORLD_WIDTH,l.WORLD_HEIGHT),s=i.getContext(),(o=new a.AssetManager(s)).loadTexture("./assets/level_01.jpg","bg_1"),o.loadTexture("./assets/level_02.jpg","bg_2"),o.loadTexture("./assets/level_03.jpg","bg_3"),o.loadTexture("./assets/level_04.jpg","bg_4"),o.loadAtlas("./assets/atlas/objects.atlas","objects"),t.next=12,o.finishLoading();case 12:return t.next=14,Jt(i,o,0);case 14:h=t.sent,a.Game.shared.setScreen(h),(0,a.createGameLoop)((function(t){s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT),a.Game.shared.update(t)}));case 17:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Kt()}()}();